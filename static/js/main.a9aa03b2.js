/*! For license information please see main.a9aa03b2.js.LICENSE.txt */
(()=>{"use strict";var e={213:(e,t,n)=>{n.d(t,{Z:()=>i});var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const i=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){return r.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}))},725:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in o=Object(arguments[u]))n.call(o,l)&&(a[l]=o[l]);if(t){s=t(o);for(var c=0;c<s.length;c++)r.call(o,s[c])&&(a[s[c]]=o[s[c]])}}return a}},463:(e,t,n)=>{var r=n(791),i=n(725),o=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(e,t,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var u=!1,l=null,c=!1,h=null,d={onError:function(e){u=!0,l=e}};function f(e,t,n,r,i,o,s,c,h){u=!1,l=null,a.apply(d,arguments)}var p=null,m=null,g=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,a,d,p){if(f.apply(this,arguments),u){if(!u)throw Error(s(198));var m=l;u=!1,l=null,c||(c=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var v=null,w={};function b(){if(v)for(var e in w){var t=w[e],n=v.indexOf(e);if(!(-1<n))throw Error(s(96,e));if(!E[n]){if(!t.extractEvents)throw Error(s(97,e));for(var r in E[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,u=r;if(T.hasOwnProperty(u))throw Error(s(99,u));T[u]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&_(l[i],a,u);i=!0}else o.registrationName?(_(o.registrationName,a,u),i=!0):i=!1;if(!i)throw Error(s(98,r,e))}}}}function _(e,t,n){if(x[e])throw Error(s(100,e));x[e]=t,S[e]=t.eventTypes[n].dependencies}var E=[],T={},x={},S={};function I(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!w.hasOwnProperty(t)||w[t]!==r){if(w[t])throw Error(s(102,t));w[t]=r,n=!0}}n&&b()}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,A=null,D=null;function N(e){if(e=m(e)){if("function"!==typeof C)throw Error(s(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function P(e){A?D?D.push(e):D=[e]:A=e}function R(){if(A){var e=A,t=D;if(D=A=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function O(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function M(){}var F=O,V=!1,U=!1;function B(){null===A&&null===D||(M(),R())}function z(e,t,n){if(U)return e(t,n);U=!0;try{return F(e,t,n)}finally{U=!1,B()}}var q=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j=Object.prototype.hasOwnProperty,K={},G={};function H(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){W[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];W[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){W[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){W[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){W[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){W[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){W[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){W[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){W[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,Y);W[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,Y);W[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,Y);W[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){W[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),W.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){W[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(e,t,n,r){var i=W.hasOwnProperty(t)?W[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!j.call(G,e)||!j.call(K,e)&&(q.test(e)?G[e]=!0:(K[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,oe=Z?Symbol.for("react.provider"):60109,se=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,ue=Z?Symbol.for("react.forward_ref"):60112,le=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case oe:return"Context.Provider";case ue:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case fe:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ge(e.type);n=null,r&&(n=ge(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=we(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=we(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ee(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xe(e,t){null!=(t=t.checked)&&$(e,"checked",t,!1)}function Se(e,t){xe(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ke(e,t.type,n):t.hasOwnProperty("defaultValue")&&ke(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ke(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function De(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Pe(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Oe="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ve,Ue,Be=(Ue=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Ve=Ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ue(e,t)}))}:Ue);function ze(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var je={animationend:qe("Animation","AnimationEnd"),animationiteration:qe("Animation","AnimationIteration"),animationstart:qe("Animation","AnimationStart"),transitionend:qe("Transition","TransitionEnd")},Ke={},Ge={};function He(e){if(Ke[e])return Ke[e];if(!je[e])return e;var t,n=je[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ke[e]=n[t];return e}k&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete je.animationend.animation,delete je.animationiteration.animation,delete je.animationstart.animation),"TransitionEvent"in window||delete je.transitionend.transition);var We=He("animationend"),Qe=He("animationiteration"),Ye=He("animationstart"),Xe=He("transitionend"),$e="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(s(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ot(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var st=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ut(e){if(null!==e&&(st=it(st,e)),e=st,st=null,e){if(ot(e,at),st)throw Error(s(95));if(c)throw e=h,c=!1,h=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!k)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function ft(e,t,n,r){if(ht.length){var i=ht.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Rn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=lt(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,s=e.eventSystemFlags;0===n&&(s|=64);for(var a=null,u=0;u<E.length;u++){var l=E[u];l&&(l=l.extractEvents(r,t,o,i,s))&&(a=it(a,l))}ut(a)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$e.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var gt,yt,vt,wt=!1,bt=[],_t=null,Et=null,Tt=null,xt=new Map,St=new Map,It=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function At(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Dt(e,t){switch(e){case"focus":case"blur":_t=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":xt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Nt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=At(t,n,r,i,o),null!==t&&(null!==(t=On(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Pt(e){var t=Rn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){vt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=On(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Ot(e,t,n){Rt(e)&&n.delete(t)}function Lt(){for(wt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=On(e.blockedOn))&&gt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==_t&&Rt(_t)&&(_t=null),null!==Et&&Rt(Et)&&(Et=null),null!==Tt&&Rt(Tt)&&(Tt=null),xt.forEach(Ot),St.forEach(Ot)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Lt)))}function Ft(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Mt(_t,e),null!==Et&&Mt(Et,e),null!==Tt&&Mt(Tt,e),xt.forEach(t),St.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Pt(n),null===n.blockedOn&&It.shift()}var Vt={},Ut=new Map,Bt=new Map,zt=["abort","abort",We,"animationEnd",Qe,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function qt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Bt.set(r,t),Ut.set(r,o),Vt[i]=o}}qt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qt(zt,2);for(var jt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Kt=0;Kt<jt.length;Kt++)Bt.set(jt[Kt],0);var Gt=o.unstable_UserBlockingPriority,Ht=o.unstable_runWithPriority,Wt=!0;function Qt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Bt.get(t);switch(void 0===r?2:r){case 0:r=Xt.bind(null,t,1,e);break;case 1:r=$t.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Xt(e,t,n,r){V||M();var i=Jt,o=V;V=!0;try{L(i,e,t,n,r)}finally{(V=o)||B()}}function $t(e,t,n,r){Ht(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Wt)if(0<bt.length&&-1<kt.indexOf(e))e=At(null,e,t,n,r),bt.push(e);else{var i=Zt(e,t,n,r);if(null===i)Dt(e,r);else if(-1<kt.indexOf(e))e=At(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return _t=Nt(_t,e,t,n,r,i),!0;case"dragenter":return Et=Nt(Et,e,t,n,r,i),!0;case"mouseover":return Tt=Nt(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return xt.set(o,Nt(xt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,St.set(o,Nt(St.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Dt(e,r),e=ft(e,r,null,t);try{z(pt,e)}finally{dt(e)}}}}function Zt(e,t,n,r){if(null!==(n=Rn(n=lt(r)))){var i=et(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=tt(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{z(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var on=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(e,t){if(t){if(on[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var un=Oe;function ln(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function cn(){}function hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=hn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn="$",vn="/$",wn="$?",bn="$!",_n=null,En=null;function Tn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function xn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sn="function"===typeof setTimeout?setTimeout:void 0,In="function"===typeof clearTimeout?clearTimeout:void 0;function kn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn||n===bn||n===wn){if(0===t)return e;t--}else n===vn&&t++}e=e.previousSibling}return null}var An=Math.random().toString(36).slice(2),Dn="__reactInternalInstance$"+An,Nn="__reactEventHandlers$"+An,Pn="__reactContainere$"+An;function Rn(e){var t=e[Dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[Dn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Cn(e);null!==e;){if(n=e[Dn])return n;e=Cn(e)}return t}n=(e=n).parentNode}return null}function On(e){return!(e=e[Dn]||e[Pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ln(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Mn(e){return e[Nn]||null}function Fn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Vn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}function Un(e,t,n){(t=Vn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Bn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Fn(t);for(t=n.length;0<t--;)Un(n[t],"captured",e);for(t=0;t<n.length;t++)Un(n[t],"bubbled",e)}}function zn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Vn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function qn(e){e&&e.dispatchConfig.registrationName&&zn(e._targetInst,null,e)}function jn(e){ot(e,Bn)}var Kn=null,Gn=null,Hn=null;function Wn(){if(Hn)return Hn;var e,t,n=Gn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Hn=i.slice(e,1<t?1-t:void 0)}function Qn(){return!0}function Yn(){return!1}function Xn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Yn,this.isPropagationStopped=Yn,this}function $n(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Jn(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=$n,e.release=Jn}i(Xn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Yn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Yn,this._dispatchInstances=this._dispatchListeners=null}}),Xn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Xn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn(Xn);var er=Xn.extend({data:null}),tr=Xn.extend({data:null}),nr=[9,13,27,32],rr=k&&"CompositionEvent"in window,ir=null;k&&"documentMode"in document&&(ir=document.documentMode);var or=k&&"TextEvent"in window&&!ir,sr=k&&(!rr||ir&&8<ir&&11>=ir),ar=String.fromCharCode(32),ur={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},lr=!1;function cr(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function hr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var dr=!1;var fr={eventTypes:ur,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var o=ur.compositionStart;break e;case"compositionend":o=ur.compositionEnd;break e;case"compositionupdate":o=ur.compositionUpdate;break e}o=void 0}else dr?cr(e,n)&&(o=ur.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=ur.compositionStart);return o?(sr&&"ko"!==n.locale&&(dr||o!==ur.compositionStart?o===ur.compositionEnd&&dr&&(i=Wn()):(Gn="value"in(Kn=r)?Kn.value:Kn.textContent,dr=!0)),o=er.getPooled(o,t,n,r),i?o.data=i:null!==(i=hr(n))&&(o.data=i),jn(o),i=o):i=null,(e=or?function(e,t){switch(e){case"compositionend":return hr(t);case"keypress":return 32!==t.which?null:(lr=!0,ar);case"textInput":return(e=t.data)===ar&&lr?null:e;default:return null}}(e,n):function(e,t){if(dr)return"compositionend"===e||!rr&&cr(e,t)?(e=Wn(),Hn=Gn=Kn=null,dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sr&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(ur.beforeInput,t,n,r)).data=e,jn(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var gr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function yr(e,t,n){return(e=Xn.getPooled(gr.change,e,t,n)).type="change",P(n),jn(e),e}var vr=null,wr=null;function br(e){ut(e)}function _r(e){if(_e(Ln(e)))return e}function Er(e,t){if("change"===e)return t}var Tr=!1;function xr(){vr&&(vr.detachEvent("onpropertychange",Sr),wr=vr=null)}function Sr(e){if("value"===e.propertyName&&_r(wr))if(e=yr(wr,e,lt(e)),V)ut(e);else{V=!0;try{O(br,e)}finally{V=!1,B()}}}function Ir(e,t,n){"focus"===e?(xr(),wr=n,(vr=t).attachEvent("onpropertychange",Sr)):"blur"===e&&xr()}function kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return _r(wr)}function Cr(e,t){if("click"===e)return _r(t)}function Ar(e,t){if("input"===e||"change"===e)return _r(t)}k&&(Tr=ct("input")&&(!document.documentMode||9<document.documentMode));var Dr={eventTypes:gr,_isInputEventSupported:Tr,extractEvents:function(e,t,n,r){var i=t?Ln(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=Er;else if(mr(i))if(Tr)s=Ar;else{s=kr;var a=Ir}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Cr);if(s&&(s=s(e,t)))return yr(s,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&ke(i,"number",i.value)}},Nr=Xn.extend({view:null,detail:null}),Pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pr[e])&&!!t[e]}function Or(){return Rr}var Lr=0,Mr=0,Fr=!1,Vr=!1,Ur=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Or,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lr;return Lr=e.screenX,Fr?"mousemove"===e.type?e.screenX-t:0:(Fr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mr;return Mr=e.screenY,Vr?"mousemove"===e.type?e.screenY-t:0:(Vr=!0,0)}}),Br=Ur.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),zr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},qr={eventTypes:zr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,s)?(s=t,null!==(t=(t=n.relatedTarget||n.toElement)?Rn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null;if(s===t)return null;if("mouseout"===e||"mouseover"===e)var a=Ur,u=zr.mouseLeave,l=zr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=Br,u=zr.pointerLeave,l=zr.pointerEnter,c="pointer");if(e=null==s?o:Ln(s),o=null==t?o:Ln(t),(u=a.getPooled(u,s,n,r)).type=c+"leave",u.target=e,u.relatedTarget=o,(n=a.getPooled(l,t,n,r)).type=c+"enter",n.target=o,n.relatedTarget=e,c=t,(r=s)&&c)e:{for(l=c,s=0,e=a=r;e;e=Fn(e))s++;for(e=0,t=l;t;t=Fn(t))e++;for(;0<s-e;)a=Fn(a),s--;for(;0<e-s;)l=Fn(l),e--;for(;s--;){if(a===l||a===l.alternate)break e;a=Fn(a),l=Fn(l)}a=null}else a=null;for(l=a,a=[];r&&r!==l&&(null===(s=r.alternate)||s!==l);)a.push(r),r=Fn(r);for(r=[];c&&c!==l&&(null===(s=c.alternate)||s!==l);)r.push(c),c=Fn(c);for(c=0;c<a.length;c++)zn(a[c],"bubbled",u);for(c=r.length;0<c--;)zn(r[c],"captured",n);return 0===(64&i)?[u]:[u,n]}};var jr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Kr=Object.prototype.hasOwnProperty;function Gr(e,t){if(jr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Kr.call(t,n[r])||!jr(e[n[r]],t[n[r]]))return!1;return!0}var Hr=k&&"documentMode"in document&&11>=document.documentMode,Wr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qr=null,Yr=null,Xr=null,$r=!1;function Jr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return $r||null==Qr||Qr!==hn(n)?null:("selectionStart"in(n=Qr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Xr&&Gr(Xr,n)?null:(Xr=n,(e=Xn.getPooled(Wr.select,Yr,e,t)).type="select",e.target=Qr,jn(e),e))}var Zr={eventTypes:Wr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),o=S.onSelect;for(var s=0;s<o.length;s++)if(!i.has(o[s])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Ln(t):window,e){case"focus":(mr(i)||"true"===i.contentEditable)&&(Qr=i,Yr=t,Xr=null);break;case"blur":Xr=Yr=Qr=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":return $r=!1,Jr(n,r);case"selectionchange":if(Hr)break;case"keydown":case"keyup":return Jr(n,r)}return null}},ei=Xn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=Xn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Nr.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},si=Nr.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?oi[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Or,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Ur.extend({dataTransfer:null}),ui=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Or}),li=Xn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ci=Ur.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hi={eventTypes:Vt,extractEvents:function(e,t,n,r){var i=Ut.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=si;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Ur;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ui;break;case We:case Qe:case Ye:e=ei;break;case Xe:e=li;break;case"scroll":e=Nr;break;case"wheel":e=ci;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Br;break;default:e=Xn}return jn(t=e.getPooled(i,t,n,r)),t}};if(v)throw Error(s(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Mn,m=On,g=Ln,I({SimpleEventPlugin:hi,EnterLeaveEventPlugin:qr,ChangeEventPlugin:Dr,SelectEventPlugin:Zr,BeforeInputEventPlugin:fr});var di=[],fi=-1;function pi(e){0>fi||(e.current=di[fi],di[fi]=null,fi--)}function mi(e,t){fi++,di[fi]=e.current,e.current=t}var gi={},yi={current:gi},vi={current:!1},wi=gi;function bi(e,t){var n=e.type.contextTypes;if(!n)return gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function _i(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ei(){pi(vi),pi(yi)}function Ti(e,t,n){if(yi.current!==gi)throw Error(s(168));mi(yi,t),mi(vi,n)}function xi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,ge(t)||"Unknown",o));return i({},n,{},r)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gi,wi=yi.current,mi(yi,e),mi(vi,vi.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=xi(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,pi(vi),pi(yi),mi(yi,e)):pi(vi),mi(vi,n)}var ki=o.unstable_runWithPriority,Ci=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Di=o.unstable_requestPaint,Ni=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,Ri=o.unstable_ImmediatePriority,Oi=o.unstable_UserBlockingPriority,Li=o.unstable_NormalPriority,Mi=o.unstable_LowPriority,Fi=o.unstable_IdlePriority,Vi={},Ui=o.unstable_shouldYield,Bi=void 0!==Di?Di:function(){},zi=null,qi=null,ji=!1,Ki=Ni(),Gi=1e4>Ki?Ni:function(){return Ni()-Ki};function Hi(){switch(Pi()){case Ri:return 99;case Oi:return 98;case Li:return 97;case Mi:return 96;case Fi:return 95;default:throw Error(s(332))}}function Wi(e){switch(e){case 99:return Ri;case 98:return Oi;case 97:return Li;case 96:return Mi;case 95:return Fi;default:throw Error(s(332))}}function Qi(e,t){return e=Wi(e),ki(e,t)}function Yi(e,t,n){return e=Wi(e),Ci(e,t,n)}function Xi(e){return null===zi?(zi=[e],qi=Ci(Ri,Ji)):zi.push(e),Vi}function $i(){if(null!==qi){var e=qi;qi=null,Ai(e)}Ji()}function Ji(){if(!ji&&null!==zi){ji=!0;var e=0;try{var t=zi;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),zi=null}catch(n){throw null!==zi&&(zi=zi.slice(e+1)),Ci(Ri,$i),n}finally{ji=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function eo(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var to={current:null},no=null,ro=null,io=null;function oo(){io=ro=no=null}function so(e){var t=to.current;pi(to),e.type._context._currentValue=t}function ao(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function uo(e,t){no=e,io=ro=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ms=!0),e.firstContext=null)}function lo(e,t){if(io!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(io=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ro){if(null===no)throw Error(s(308));ro=t,no.dependencies={expirationTime:0,firstContext:t,responders:null}}else ro=ro.next=t;return e._currentValue}var co=!1;function ho(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function po(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function mo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function go(e,t){var n=e.alternate;null!==n&&fo(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function yo(e,t,n,r){var o=e.updateQueue;co=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var u=s.next;s.next=a.next,a.next=u}s=a,o.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=a))}if(null!==s){u=s.next;var l=o.baseState,c=0,h=null,d=null,f=null;if(null!==u)for(var p=u;;){if((a=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=m,h=l):f=f.next=m,a>c&&(c=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),Eu(a,p.suspenseConfig);e:{var g=e,y=p;switch(a=t,m=n,y.tag){case 1:if("function"===typeof(g=y.payload)){l=g.call(m,l,a);break e}l=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"===typeof(g=y.payload)?g.call(m,l,a):g)||void 0===a)break e;l=i({},l,a);break e;case 2:co=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=o.effects)?o.effects=[p]:a.push(p))}if(null===(p=p.next)||p===u){if(null===(a=o.shared.pending))break;p=s.next=a.next,a.next=u,o.baseQueue=s=a,o.shared.pending=null}}null===f?h=l:f.next=d,o.baseState=h,o.baseQueue=f,Tu(c),e.expirationTime=c,e.memoizedState=l}}function vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var wo=X.ReactCurrentBatchConfig,bo=(new r.Component).refs;function _o(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var Eo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=lu(),i=wo.suspense;(i=po(r=cu(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),mo(e,i),hu(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=lu(),i=wo.suspense;(i=po(r=cu(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),mo(e,i),hu(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=lu(),r=wo.suspense;(r=po(n=cu(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),mo(e,r),hu(e,n)}};function To(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!Gr(n,r)||!Gr(i,o))}function xo(e,t,n){var r=!1,i=gi,o=t.contextType;return"object"===typeof o&&null!==o?o=lo(o):(i=_i(t)?wi:yi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?bi(e,i):gi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Eo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Eo.enqueueReplaceState(t,t.state,null)}function Io(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=bo,ho(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=lo(o):(o=_i(t)?wi:yi.current,i.context=bi(e,o)),yo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(_o(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Eo.enqueueReplaceState(i,i.state,null),yo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var ko=Array.isArray;function Co(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===bo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ao(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Do(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ju(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Hu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Co(e,t,n),r.return=e,r):((r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=Co(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Gu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Hu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Ku(t.type,t.key,t.props,null,e.mode,n)).ref=Co(e,null,t),n.return=e,n;case te:return(t=Wu(t,e.mode,n)).return=e,t}if(ko(t)||me(t))return(t=Gu(t,e.mode,n,null)).return=e,t;Ao(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case te:return n.key===i?c(e,t,n,r):null}if(ko(n)||me(n))return null!==i?null:h(e,t,n,r,null);Ao(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ko(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);Ao(t,r)}return null}function m(i,s,a,u){for(var l=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?l=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],u))&&(s=o(h,s,m),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?l=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),l}function g(i,a,u,l){var c=me(u);if("function"!==typeof c)throw Error(s(150));if(null==(u=c.call(u)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=u.next())null!==(v=d(i,v.value,l))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=u.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,u){var l="object"===typeof o&&null!==o&&o.type===ne&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case ee:e:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(7===l.tag){if(o.type===ne){n(e,l.sibling),(r=i(l,o.props.children)).return=e,e=r;break e}}else if(l.elementType===o.type){n(e,l.sibling),(r=i(l,o.props)).ref=Co(e,l,o),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}o.type===ne?((r=Gu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Ku(o.type,o.key,o.props,null,e.mode,u)).ref=Co(e,r,o),u.return=e,e=u)}return a(e);case te:e:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Wu(o,e.mode,u)).return=e,e=r}return a(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Hu(o,e.mode,u)).return=e,e=r),a(e);if(ko(o))return m(e,r,o,u);if(me(o))return g(e,r,o,u);if(c&&Ao(e,o),"undefined"===typeof o&&!l)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return n(e,r)}}var No=Do(!0),Po=Do(!1),Ro={},Oo={current:Ro},Lo={current:Ro},Mo={current:Ro};function Fo(e){if(e===Ro)throw Error(s(174));return e}function Vo(e,t){switch(mi(Mo,t),mi(Lo,e),mi(Oo,Ro),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(Oo),mi(Oo,t)}function Uo(){pi(Oo),pi(Lo),pi(Mo)}function Bo(e){Fo(Mo.current);var t=Fo(Oo.current),n=Fe(t,e.type);t!==n&&(mi(Lo,e),mi(Oo,n))}function zo(e){Lo.current===e&&(pi(Oo),pi(Lo))}var qo={current:0};function jo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===wn||n.data===bn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ko(e,t){return{responder:e,props:t}}var Go=X.ReactCurrentDispatcher,Ho=X.ReactCurrentBatchConfig,Wo=0,Qo=null,Yo=null,Xo=null,$o=!1;function Jo(){throw Error(s(321))}function Zo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jr(e[n],t[n]))return!1;return!0}function es(e,t,n,r,i,o){if(Wo=o,Qo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Go.current=null===e||null===e.memoizedState?Ts:xs,e=n(r,i),t.expirationTime===Wo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(s(301));o+=1,Xo=Yo=null,t.updateQueue=null,Go.current=Ss,e=n(r,i)}while(t.expirationTime===Wo)}if(Go.current=Es,t=null!==Yo&&null!==Yo.next,Wo=0,Xo=Yo=Qo=null,$o=!1,t)throw Error(s(300));return e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Xo?Qo.memoizedState=Xo=e:Xo=Xo.next=e,Xo}function ns(){if(null===Yo){var e=Qo.alternate;e=null!==e?e.memoizedState:null}else e=Yo.next;var t=null===Xo?Qo.memoizedState:Xo.next;if(null!==t)Xo=t,Yo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Yo=e).memoizedState,baseState:Yo.baseState,baseQueue:Yo.baseQueue,queue:Yo.queue,next:null},null===Xo?Qo.memoizedState=Xo=e:Xo=Xo.next=e}return Xo}function rs(e,t){return"function"===typeof t?t(e):t}function is(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=o=null,l=i;do{var c=l.expirationTime;if(c<Wo){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(a=u=h,o=r):u=u.next=h,c>Qo.expirationTime&&(Qo.expirationTime=c,Tu(c))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),Eu(c,l.suspenseConfig),r=l.eagerReducer===e?l.eagerState:e(r,l.action);l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=a,jr(r,t.memoizedState)||(Ms=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function os(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);jr(o,t.memoizedState)||(Ms=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ss(e){var t=ts();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e}).dispatch=_s.bind(null,Qo,e),[t.memoizedState,e]}function as(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qo.updateQueue)?(t={lastEffect:null},Qo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function us(){return ns().memoizedState}function ls(e,t,n,r){var i=ts();Qo.effectTag|=e,i.memoizedState=as(1|t,n,void 0,void 0===r?null:r)}function cs(e,t,n,r){var i=ns();r=void 0===r?null:r;var o=void 0;if(null!==Yo){var s=Yo.memoizedState;if(o=s.destroy,null!==r&&Zo(r,s.deps))return void as(t,n,o,r)}Qo.effectTag|=e,i.memoizedState=as(1|t,n,o,r)}function hs(e,t){return ls(516,4,e,t)}function ds(e,t){return cs(516,4,e,t)}function fs(e,t){return cs(4,2,e,t)}function ps(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ms(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,cs(4,2,ps.bind(null,t,e),n)}function gs(){}function ys(e,t){return ts().memoizedState=[e,void 0===t?null:t],e}function vs(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ws(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bs(e,t,n){var r=Hi();Qi(98>r?98:r,(function(){e(!0)})),Qi(97<r?97:r,(function(){var r=Ho.suspense;Ho.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ho.suspense=r}}))}function _s(e,t,n){var r=lu(),i=wo.suspense;i={expirationTime:r=cu(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Qo||null!==o&&o===Qo)$o=!0,i.expirationTime=Wo,Qo.expirationTime=Wo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.eagerReducer=o,i.eagerState=a,jr(a,s))return}catch(u){}hu(e,r)}}var Es={readContext:lo,useCallback:Jo,useContext:Jo,useEffect:Jo,useImperativeHandle:Jo,useLayoutEffect:Jo,useMemo:Jo,useReducer:Jo,useRef:Jo,useState:Jo,useDebugValue:Jo,useResponder:Jo,useDeferredValue:Jo,useTransition:Jo},Ts={readContext:lo,useCallback:ys,useContext:lo,useEffect:hs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ls(4,2,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ls(4,2,e,t)},useMemo:function(e,t){var n=ts();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ts();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=_s.bind(null,Qo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ts().memoizedState=e},useState:ss,useDebugValue:gs,useResponder:Ko,useDeferredValue:function(e,t){var n=ss(e),r=n[0],i=n[1];return hs((function(){var n=Ho.suspense;Ho.suspense=void 0===t?null:t;try{i(e)}finally{Ho.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ss(!1),n=t[0];return t=t[1],[ys(bs.bind(null,t,e),[t,e]),n]}},xs={readContext:lo,useCallback:vs,useContext:lo,useEffect:ds,useImperativeHandle:ms,useLayoutEffect:fs,useMemo:ws,useReducer:is,useRef:us,useState:function(){return is(rs)},useDebugValue:gs,useResponder:Ko,useDeferredValue:function(e,t){var n=is(rs),r=n[0],i=n[1];return ds((function(){var n=Ho.suspense;Ho.suspense=void 0===t?null:t;try{i(e)}finally{Ho.suspense=n}}),[e,t]),r},useTransition:function(e){var t=is(rs),n=t[0];return t=t[1],[vs(bs.bind(null,t,e),[t,e]),n]}},Ss={readContext:lo,useCallback:vs,useContext:lo,useEffect:ds,useImperativeHandle:ms,useLayoutEffect:fs,useMemo:ws,useReducer:os,useRef:us,useState:function(){return os(rs)},useDebugValue:gs,useResponder:Ko,useDeferredValue:function(e,t){var n=os(rs),r=n[0],i=n[1];return ds((function(){var n=Ho.suspense;Ho.suspense=void 0===t?null:t;try{i(e)}finally{Ho.suspense=n}}),[e,t]),r},useTransition:function(e){var t=os(rs),n=t[0];return t=t[1],[vs(bs.bind(null,t,e),[t,e]),n]}},Is=null,ks=null,Cs=!1;function As(e,t){var n=zu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ds(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ns(e){if(Cs){var t=ks;if(t){var n=t;if(!Ds(e,t)){if(!(t=kn(n.nextSibling))||!Ds(e,t))return e.effectTag=-1025&e.effectTag|2,Cs=!1,void(Is=e);As(Is,n)}Is=e,ks=kn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Cs=!1,Is=e}}function Ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Is=e}function Rs(e){if(e!==Is)return!1;if(!Cs)return Ps(e),Cs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!xn(t,e.memoizedProps))for(t=ks;t;)As(e,t),t=kn(t.nextSibling);if(Ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===vn){if(0===t){ks=kn(e.nextSibling);break e}t--}else n!==yn&&n!==bn&&n!==wn||t++}e=e.nextSibling}ks=null}}else ks=Is?kn(e.stateNode.nextSibling):null;return!0}function Os(){ks=Is=null,Cs=!1}var Ls=X.ReactCurrentOwner,Ms=!1;function Fs(e,t,n,r){t.child=null===e?Po(t,null,n,r):No(t,e.child,n,r)}function Vs(e,t,n,r,i){n=n.render;var o=t.ref;return uo(t,i),r=es(e,t,n,r,o,i),null===e||Ms?(t.effectTag|=1,Fs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function Us(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!==typeof s||qu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ku(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Bs(e,t,s,r,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:Gr)(i,r)&&e.ref===t.ref)?ta(e,t,o):(t.effectTag|=1,(e=ju(s,r)).ref=t.ref,e.return=t,t.child=e)}function Bs(e,t,n,r,i,o){return null!==e&&Gr(e.memoizedProps,r)&&e.ref===t.ref&&(Ms=!1,i<o)?(t.expirationTime=e.expirationTime,ta(e,t,o)):qs(e,t,n,r,o)}function zs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function qs(e,t,n,r,i){var o=_i(n)?wi:yi.current;return o=bi(t,o),uo(t,i),n=es(e,t,n,r,o,i),null===e||Ms?(t.effectTag|=1,Fs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function js(e,t,n,r,i){if(_i(n)){var o=!0;Si(t)}else o=!1;if(uo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),xo(t,n,r),Io(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var u=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=lo(l):l=bi(t,l=_i(n)?wi:yi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==l)&&So(t,s,r,l),co=!1;var d=t.memoizedState;s.state=d,yo(t,r,s,i),u=t.memoizedState,a!==r||d!==u||vi.current||co?("function"===typeof c&&(_o(t,n,c,r),u=t.memoizedState),(a=co||To(t,n,a,r,d,u,l))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.effectTag|=4)):("function"===typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=l,r=a):("function"===typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,fo(e,t),a=t.memoizedProps,s.props=t.type===t.elementType?a:eo(t.type,a),u=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=lo(l):l=bi(t,l=_i(n)?wi:yi.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==l)&&So(t,s,r,l),co=!1,u=t.memoizedState,s.state=u,yo(t,r,s,i),d=t.memoizedState,a!==r||u!==d||vi.current||co?("function"===typeof c&&(_o(t,n,c,r),d=t.memoizedState),(c=co||To(t,n,a,r,u,d,l))?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Ks(e,t,n,r,o,i)}function Ks(e,t,n,r,i,o){zs(e,t);var s=0!==(64&t.effectTag);if(!r&&!s)return i&&Ii(t,n,!1),ta(e,t,o);r=t.stateNode,Ls.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=No(t,e.child,null,o),t.child=No(t,null,a,o)):Fs(e,t,a,o),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function Gs(e){var t=e.stateNode;t.pendingContext?Ti(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ti(0,t.context,!1),Vo(e,t.containerInfo)}var Hs,Ws,Qs,Ys,Xs={dehydrated:null,retryTime:0};function $s(e,t,n){var r,i=t.mode,o=t.pendingProps,s=qo.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&s)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),mi(qo,1&s),null===e){if(void 0!==o.fallback&&Ns(t),a){if(a=o.fallback,(o=Gu(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Gu(a,i,n,null)).return=t,o.sibling=n,t.memoizedState=Xs,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Po(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(o=o.fallback,(n=ju(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=ju(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Xs,t.child=n,i}return n=No(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=o.fallback,(o=Gu(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Gu(a,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Xs,t.child=o,n}return t.memoizedState=null,t.child=No(t,e,o.children,n)}function Js(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ao(e.return,t)}function Zs(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function ea(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Fs(e,t,r.children,n),0!==(2&(r=qo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Js(e,n);else if(19===e.tag)Js(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mi(qo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===jo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===jo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zs(t,!0,n,null,o,t.lastEffect);break;case"together":Zs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ta(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Tu(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=ju(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ju(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function na(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ra(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(t.type)&&Ei(),null;case 3:return Uo(),pi(vi),pi(yi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Rs(t)||(t.effectTag|=4),Ws(t),null;case 5:zo(t),n=Fo(Mo.current);var o=t.type;if(null!==e&&null!=t.stateNode)Qs(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Fo(Oo.current),Rs(t)){r=t.stateNode,o=t.type;var a=t.memoizedProps;switch(r[Dn]=t,r[Nn]=a,o){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<$e.length;e++)Qt($e[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Te(r,a),Qt("invalid",r),ln(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qt("invalid",r),ln(n,"onChange");break;case"textarea":Ne(r,a),Qt("invalid",r),ln(n,"onChange")}for(var u in sn(o,a),e=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?r.textContent!==l&&(e=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(e=["children",""+l]):x.hasOwnProperty(u)&&null!=l&&ln(n,u)}switch(o){case"input":be(r),Ie(r,a,!0);break;case"textarea":be(r),Re(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,e===un&&(e=Me(o)),e===un?"script"===o?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(o,{is:r.is}):(e=u.createElement(o),"select"===o&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,o),e[Dn]=t,e[Nn]=r,Hs(e,t,!1,!1),t.stateNode=e,u=an(o,r),o){case"iframe":case"object":case"embed":Qt("load",e),l=r;break;case"video":case"audio":for(l=0;l<$e.length;l++)Qt($e[l],e);l=r;break;case"source":Qt("error",e),l=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),l=r;break;case"form":Qt("reset",e),Qt("submit",e),l=r;break;case"details":Qt("toggle",e),l=r;break;case"input":Te(e,r),l=Ee(e,r),Qt("invalid",e),ln(n,"onChange");break;case"option":l=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=i({},r,{value:void 0}),Qt("invalid",e),ln(n,"onChange");break;case"textarea":Ne(e,r),l=De(e,r),Qt("invalid",e),ln(n,"onChange");break;default:l=r}sn(o,l);var c=l;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?rn(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&Be(e,h):"children"===a?"string"===typeof h?("textarea"!==o||""!==h)&&ze(e,h):"number"===typeof h&&ze(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(x.hasOwnProperty(a)?null!=h&&ln(n,a):null!=h&&$(e,a,h,u))}switch(o){case"input":be(e),Ie(e,r,!1);break;case"textarea":be(e),Re(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ae(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof l.onClick&&(e.onclick=cn)}Tn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ys(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=Fo(Mo.current),Fo(Oo.current),Rs(t)?(n=t.stateNode,r=t.memoizedProps,n[Dn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Dn]=t,t.stateNode=n)}return null;case 13:return pi(qo),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Rs(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&qo.current)?ja===Ra&&(ja=Ma):(ja!==Ra&&ja!==Ma||(ja=Fa),0!==Qa&&null!==Ba&&(Xu(Ba,qa),$u(Ba,Qa)))),(n||r)&&(t.effectTag|=4),null);case 4:return Uo(),Ws(t),null;case 10:return so(t),null;case 19:if(pi(qo),null===(r=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(a=r.rendering)){if(o)na(r,!1);else if(ja!==Ra||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=jo(a))){for(t.effectTag|=64,na(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return mi(qo,1&qo.current|2),t.child}a=a.sibling}}else{if(!o)if(null!==(e=jo(a))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),na(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Gi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,na(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Gi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Gi(),n.sibling=null,t=qo.current,mi(qo,o?1&t|2:1&t),n):null}throw Error(s(156,t.tag))}function ia(e){switch(e.tag){case 1:_i(e.type)&&Ei();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Uo(),pi(vi),pi(yi),0!==(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return zo(e),null;case 13:return pi(qo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(qo),null;case 4:return Uo(),null;case 10:return so(e),null;default:return null}}function oa(e,t){return{value:e,source:t,stack:ye(t)}}Hs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ws=function(){},Qs=function(e,t,n,r,o){var s=e.memoizedProps;if(s!==r){var a,u,l=t.stateNode;switch(Fo(Oo.current),e=null,n){case"input":s=Ee(l,s),r=Ee(l,r),e=[];break;case"option":s=Ce(l,s),r=Ce(l,r),e=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":s=De(l,s),r=De(l,r),e=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(l.onclick=cn)}for(a in sn(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(u in l=s[a])l.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(x.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var c=r[a];if(l=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&c!==l&&(null!=c||null!=l))if("style"===a)if(l){for(u in l)!l.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in c)c.hasOwnProperty(u)&&l[u]!==c[u]&&(n||(n={}),n[u]=c[u])}else n||(e||(e=[]),e.push(a,n)),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(e=e||[]).push(a,c)):"children"===a?l===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(x.hasOwnProperty(a)?(null!=c&&ln(o,a),e||l===c||(e=[])):(e=e||[]).push(a,c))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Ys=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var sa="function"===typeof WeakSet?WeakSet:Set;function aa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function ua(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Lu(e,n)}else t.current=null}function la(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:eo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(s(163))}function ca(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ha(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function da(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ha(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:eo(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&vo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}vo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&Tn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(s(163))}function fa(e,t,n){switch("function"===typeof Uu&&Uu(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){Lu(i,o)}}e=e.next}while(e!==r)}))}break;case 1:ua(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Lu(e,n)}}(t,n);break;case 5:ua(t);break;case 4:wa(e,t,n)}}function pa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pa(t)}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var n=t;break e}t=t.return}throw Error(s(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(ze(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?ya(e,n,t):va(e,n,t)}function ya(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=cn));else if(4!==r&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function va(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function wa(e,t,n){for(var r,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var u=e,l=o,c=n,h=l;;)if(fa(u,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===l)break e;for(;null===h.sibling;){if(null===h.return||h.return===l)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,l=o.stateNode,8===u.nodeType?u.parentNode.removeChild(l):u.removeChild(l)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(fa(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ca(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&xe(n,r),an(e,i),t=an(e,r),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];"style"===a?rn(n,u):"dangerouslySetInnerHTML"===a?Be(n,u):"children"===a?ze(n,u):$(n,a,u,t)}switch(e){case"input":Se(n,r);break;case"textarea":Pe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ae(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ae(n,!!r.multiple,r.defaultValue,!0):Ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Xa=Gi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void _a(t);case 19:return void _a(t)}throw Error(s(163))}function _a(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new sa),t.forEach((function(t){var r=Fu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var Ea="function"===typeof WeakMap?WeakMap:Map;function Ta(e,t,n){(n=po(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za||(Za=!0,eu=r),aa(e,t)},n}function xa(e,t,n){(n=po(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return aa(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===tu?tu=new Set([this]):tu.add(this),aa(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Sa,Ia=Math.ceil,ka=X.ReactCurrentDispatcher,Ca=X.ReactCurrentOwner,Aa=0,Da=8,Na=16,Pa=32,Ra=0,Oa=1,La=2,Ma=3,Fa=4,Va=5,Ua=Aa,Ba=null,za=null,qa=0,ja=Ra,Ka=null,Ga=1073741823,Ha=1073741823,Wa=null,Qa=0,Ya=!1,Xa=0,$a=500,Ja=null,Za=!1,eu=null,tu=null,nu=!1,ru=null,iu=90,ou=null,su=0,au=null,uu=0;function lu(){return(Ua&(Na|Pa))!==Aa?1073741821-(Gi()/10|0):0!==uu?uu:uu=1073741821-(Gi()/10|0)}function cu(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Hi();if(0===(4&t))return 99===r?1073741823:1073741822;if((Ua&Na)!==Aa)return qa;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==Ba&&e===qa&&--e,e}function hu(e,t){if(50<su)throw su=0,au=null,Error(s(185));if(null!==(e=du(e,t))){var n=Hi();1073741823===t?(Ua&Da)!==Aa&&(Ua&(Na|Pa))===Aa?gu(e):(pu(e),Ua===Aa&&$i()):pu(e),(4&Ua)===Aa||98!==n&&99!==n||(null===ou?ou=new Map([[e,t]]):(void 0===(n=ou.get(e))||n>t)&&ou.set(e,t))}}function du(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ba===i&&(Tu(t),ja===Fa&&Xu(i,qa)),$u(i,t)),i}function fu(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Yu(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pu(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Xi(gu.bind(null,e));else{var t=fu(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=lu();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Vi&&Ai(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Xi(gu.bind(null,e)):Yi(r,mu.bind(null,e),{timeout:10*(1073741821-t)-Gi()}),e.callbackNode=t}}}function mu(e,t){if(uu=0,t)return Ju(e,t=lu()),pu(e),null;var n=fu(e);if(0!==n){if(t=e.callbackNode,(Ua&(Na|Pa))!==Aa)throw Error(s(327));if(Pu(),e===Ba&&n===qa||wu(e,n),null!==za){var r=Ua;Ua|=Na;for(var i=_u();;)try{Su();break}catch(u){bu(e,u)}if(oo(),Ua=r,ka.current=i,ja===Oa)throw t=Ka,wu(e,n),Xu(e,n),pu(e),t;if(null===za)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=ja,Ba=null,r){case Ra:case Oa:throw Error(s(345));case La:Ju(e,2<n?2:n);break;case Ma:if(Xu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cu(i)),1073741823===Ga&&10<(i=Xa+$a-Gi())){if(Ya){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,wu(e,n);break}}if(0!==(o=fu(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Sn(Au.bind(null,e),i);break}Au(e);break;case Fa:if(Xu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cu(i)),Ya&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,wu(e,n);break}if(0!==(i=fu(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ha?r=10*(1073741821-Ha)-Gi():1073741823===Ga?r=0:(r=10*(1073741821-Ga)-5e3,0>(r=(i=Gi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ia(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Sn(Au.bind(null,e),r);break}Au(e);break;case Va:if(1073741823!==Ga&&null!==Wa){o=Ga;var a=Wa;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=Gi()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Xu(e,n),e.timeoutHandle=Sn(Au.bind(null,e),r);break}}Au(e);break;default:throw Error(s(329))}if(pu(e),e.callbackNode===t)return mu.bind(null,e)}}return null}function gu(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Ua&(Na|Pa))!==Aa)throw Error(s(327));if(Pu(),e===Ba&&t===qa||wu(e,t),null!==za){var n=Ua;Ua|=Na;for(var r=_u();;)try{xu();break}catch(i){bu(e,i)}if(oo(),Ua=n,ka.current=r,ja===Oa)throw n=Ka,wu(e,t),Xu(e,t),pu(e),n;if(null!==za)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ba=null,Au(e),pu(e)}return null}function yu(e,t){var n=Ua;Ua|=1;try{return e(t)}finally{(Ua=n)===Aa&&$i()}}function vu(e,t){var n=Ua;Ua&=-2,Ua|=Da;try{return e(t)}finally{(Ua=n)===Aa&&$i()}}function wu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,In(n)),null!==za)for(n=za.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ei();break;case 3:Uo(),pi(vi),pi(yi);break;case 5:zo(r);break;case 4:Uo();break;case 13:case 19:pi(qo);break;case 10:so(r)}n=n.return}Ba=e,za=ju(e.current,null),qa=t,ja=Ra,Ka=null,Ha=Ga=1073741823,Wa=null,Qa=0,Ya=!1}function bu(e,t){for(;;){try{if(oo(),Go.current=Es,$o)for(var n=Qo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Wo=0,Xo=Yo=Qo=null,$o=!1,null===za||null===za.return)return ja=Oa,Ka=t,za=null;e:{var i=e,o=za.return,s=za,a=t;if(t=qa,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var u=a;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.expirationTime=l.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var c=0!==(1&qo.current),h=o;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(u),h.updateQueue=g}else m.add(u);if(0===(2&h.mode)){if(h.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=po(1073741823,null);y.tag=2,mo(s,y)}s.expirationTime=1073741823;break e}a=void 0,s=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new Ea,a=new Set,v.set(u,a)):void 0===(a=v.get(u))&&(a=new Set,v.set(u,a)),!a.has(s)){a.add(s);var w=Mu.bind(null,i,u,s);u.then(w,w)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);a=Error((ge(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(s))}ja!==Va&&(ja=La),a=oa(a,s),h=o;do{switch(h.tag){case 3:u=a,h.effectTag|=4096,h.expirationTime=t,go(h,Ta(h,u,t));break e;case 1:u=a;var b=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===tu||!tu.has(_)))){h.effectTag|=4096,h.expirationTime=t,go(h,xa(h,u,t));break e}}h=h.return}while(null!==h)}za=ku(za)}catch(E){t=E;continue}break}}function _u(){var e=ka.current;return ka.current=Es,null===e?Es:e}function Eu(e,t){e<Ga&&2<e&&(Ga=e),null!==t&&e<Ha&&2<e&&(Ha=e,Wa=t)}function Tu(e){e>Qa&&(Qa=e)}function xu(){for(;null!==za;)za=Iu(za)}function Su(){for(;null!==za&&!Ui();)za=Iu(za)}function Iu(e){var t=Sa(e.alternate,e,qa);return e.memoizedProps=e.pendingProps,null===t&&(t=ku(e)),Ca.current=null,t}function ku(e){za=e;do{var t=za.alternate;if(e=za.return,0===(2048&za.effectTag)){if(t=ra(t,za,qa),1===qa||1!==za.childExpirationTime){for(var n=0,r=za.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}za.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=za.firstEffect),null!==za.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=za.firstEffect),e.lastEffect=za.lastEffect),1<za.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=za:e.firstEffect=za,e.lastEffect=za))}else{if(null!==(t=ia(za)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=za.sibling))return t;za=e}while(null!==za);return ja===Ra&&(ja=Va),null}function Cu(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Au(e){var t=Hi();return Qi(99,Du.bind(null,e,t)),null}function Du(e,t){do{Pu()}while(null!==ru);if((Ua&(Na|Pa))!==Aa)throw Error(s(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Cu(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ba&&(za=Ba=null,qa=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ua;Ua|=Pa,Ca.current=null,_n=Wt;var a=mn();if(gn(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{var l=(u=(u=a.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(l&&0!==l.rangeCount){u=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{u.nodeType,h.nodeType}catch(I){u=null;break e}var d=0,f=-1,p=-1,m=0,g=0,y=a,v=null;t:for(;;){for(var w;y!==u||0!==c&&3!==y.nodeType||(f=d+c),y!==h||0!==l&&3!==y.nodeType||(p=d+l),3===y.nodeType&&(d+=y.nodeValue.length),null!==(w=y.firstChild);)v=y,y=w;for(;;){if(y===a)break t;if(v===u&&++m===c&&(f=d),v===h&&++g===l&&(p=d),null!==(w=y.nextSibling))break;v=(y=v).parentNode}y=w}u=-1===f||-1===p?null:{start:f,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;En={activeElementDetached:null,focusedElem:a,selectionRange:u},Wt=!1,Ja=i;do{try{Nu()}catch(I){if(null===Ja)throw Error(s(330));Lu(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);Ja=i;do{try{for(a=e,u=t;null!==Ja;){var b=Ja.effectTag;if(16&b&&ze(Ja.stateNode,""),128&b){var _=Ja.alternate;if(null!==_){var E=_.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&b){case 2:ga(Ja),Ja.effectTag&=-3;break;case 6:ga(Ja),Ja.effectTag&=-3,ba(Ja.alternate,Ja);break;case 1024:Ja.effectTag&=-1025;break;case 1028:Ja.effectTag&=-1025,ba(Ja.alternate,Ja);break;case 4:ba(Ja.alternate,Ja);break;case 8:wa(a,c=Ja,u),pa(c)}Ja=Ja.nextEffect}}catch(I){if(null===Ja)throw Error(s(330));Lu(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);if(E=En,_=mn(),b=E.focusedElem,u=E.selectionRange,_!==b&&b&&b.ownerDocument&&pn(b.ownerDocument.documentElement,b)){null!==u&&gn(b)&&(_=u.start,void 0===(E=u.end)&&(E=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(E,b.value.length)):(E=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(E=E.getSelection(),c=b.textContent.length,a=Math.min(u.start,c),u=void 0===u.end?a:Math.min(u.end,c),!E.extend&&a>u&&(c=u,u=a,a=c),c=fn(b,a),h=fn(b,u),c&&h&&(1!==E.rangeCount||E.anchorNode!==c.node||E.anchorOffset!==c.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((_=_.createRange()).setStart(c.node,c.offset),E.removeAllRanges(),a>u?(E.addRange(_),E.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),E.addRange(_))))),_=[];for(E=b;E=E.parentNode;)1===E.nodeType&&_.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(E=_[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Wt=!!_n,En=_n=null,e.current=n,Ja=i;do{try{for(b=e;null!==Ja;){var T=Ja.effectTag;if(36&T&&da(b,Ja.alternate,Ja),128&T){_=void 0;var x=Ja.ref;if(null!==x){var S=Ja.stateNode;Ja.tag,_=S,"function"===typeof x?x(_):x.current=_}}Ja=Ja.nextEffect}}catch(I){if(null===Ja)throw Error(s(330));Lu(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);Ja=null,Bi(),Ua=o}else e.current=n;if(nu)nu=!1,ru=e,iu=t;else for(Ja=i;null!==Ja;)t=Ja.nextEffect,Ja.nextEffect=null,Ja=t;if(0===(t=e.firstPendingTime)&&(tu=null),1073741823===t?e===au?su++:(su=0,au=e):su=0,"function"===typeof Vu&&Vu(n.stateNode,r),pu(e),Za)throw Za=!1,e=eu,eu=null,e;return(Ua&Da)!==Aa||$i(),null}function Nu(){for(;null!==Ja;){var e=Ja.effectTag;0!==(256&e)&&la(Ja.alternate,Ja),0===(512&e)||nu||(nu=!0,Yi(97,(function(){return Pu(),null}))),Ja=Ja.nextEffect}}function Pu(){if(90!==iu){var e=97<iu?97:iu;return iu=90,Qi(e,Ru)}}function Ru(){if(null===ru)return!1;var e=ru;if(ru=null,(Ua&(Na|Pa))!==Aa)throw Error(s(331));var t=Ua;for(Ua|=Pa,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ca(5,n),ha(5,n)}}catch(r){if(null===e)throw Error(s(330));Lu(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Ua=t,$i(),!0}function Ou(e,t,n){mo(e,t=Ta(e,t=oa(n,t),1073741823)),null!==(e=du(e,1073741823))&&pu(e)}function Lu(e,t){if(3===e.tag)Ou(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ou(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tu||!tu.has(r))){mo(n,e=xa(n,e=oa(t,e),1073741823)),null!==(n=du(n,1073741823))&&pu(n);break}}n=n.return}}function Mu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ba===e&&qa===n?ja===Fa||ja===Ma&&1073741823===Ga&&Gi()-Xa<$a?wu(e,qa):Ya=!0:Yu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pu(e)))}function Fu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=cu(t=lu(),e,null)),null!==(e=du(e,t))&&pu(e)}Sa=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||vi.current)Ms=!0;else{if(r<n){switch(Ms=!1,t.tag){case 3:Gs(t),Os();break;case 5:if(Bo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:_i(t.type)&&Si(t);break;case 4:Vo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,mi(to,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?$s(e,t,n):(mi(qo,1&qo.current),null!==(t=ta(e,t,n))?t.sibling:null);mi(qo,1&qo.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return ea(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),mi(qo,qo.current),!r)return null}return ta(e,t,n)}Ms=!1}}else Ms=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,yi.current),uo(t,n),i=es(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,_i(r)){var o=!0;Si(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ho(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&_o(t,r,a,e),i.updater=Eo,t.stateNode=i,i._reactInternalFiber=t,Io(t,r,e,n),t=Ks(null,t,r,!0,o,n)}else t.tag=0,Fs(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return qu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ue)return 11;if(e===he)return 14}return 2}(i),e=eo(i,e),o){case 0:t=qs(null,t,i,e,n);break e;case 1:t=js(null,t,i,e,n);break e;case 11:t=Vs(null,t,i,e,n);break e;case 14:t=Us(null,t,i,eo(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,qs(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 1:return r=t.type,i=t.pendingProps,js(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 3:if(Gs(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,fo(e,t),yo(t,r,null,n),(r=t.memoizedState.element)===i)Os(),t=ta(e,t,n);else{if((i=t.stateNode.hydrate)&&(ks=kn(t.stateNode.containerInfo.firstChild),Is=t,i=Cs=!0),i)for(n=Po(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Fs(e,t,r,n),Os();t=t.child}return t;case 5:return Bo(t),null===e&&Ns(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,xn(r,i)?a=null:null!==o&&xn(r,o)&&(t.effectTag|=16),zs(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Fs(e,t,a,n),t=t.child),t;case 6:return null===e&&Ns(t),null;case 13:return $s(e,t,n);case 4:return Vo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=No(t,null,r,n):Fs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vs(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 7:return Fs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fs(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var u=t.type._context;if(mi(to,u._currentValue),u._currentValue=o,null!==a)if(u=a.value,0===(o=jr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!vi.current){t=ta(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){a=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===u.tag&&((c=po(n,null)).tag=2,mo(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),ao(u.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else a=10===u.tag&&u.type===t.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===t){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}Fs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,uo(t,n),r=r(i=lo(i,o.unstable_observedBits)),t.effectTag|=1,Fs(e,t,r,n),t.child;case 14:return o=eo(i=t.type,t.pendingProps),Us(e,t,i,o=eo(i.type,o),r,n);case 15:return Bs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,_i(r)?(e=!0,Si(t)):e=!1,uo(t,n),xo(t,r,i),Io(t,r,i,n),Ks(null,t,r,!0,e,n);case 19:return ea(e,t,n)}throw Error(s(156,t.tag))};var Vu=null,Uu=null;function Bu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function zu(e,t,n,r){return new Bu(e,t,n,r)}function qu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ju(e,t){var n=e.alternate;return null===n?((n=zu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ku(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)qu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Gu(n.children,i,o,t);case ae:a=8,i|=7;break;case re:a=8,i|=1;break;case ie:return(e=zu(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case le:return(e=zu(13,n,t,i)).type=le,e.elementType=le,e.expirationTime=o,e;case ce:return(e=zu(19,n,t,i)).elementType=ce,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:a=10;break e;case se:a=9;break e;case ue:a=11;break e;case he:a=14;break e;case de:a=16,r=null;break e;case fe:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=zu(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Gu(e,t,n,r){return(e=zu(7,e,r,t)).expirationTime=n,e}function Hu(e,t,n){return(e=zu(6,e,null,t)).expirationTime=n,e}function Wu(e,t,n){return(t=zu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qu(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Yu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Xu(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function $u(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ju(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zu(e,t,n,r){var i=t.current,o=lu(),a=wo.suspense;o=cu(o,i,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(_i(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(s(171))}if(1===n.tag){var l=n.type;if(_i(l)){n=xi(n,l,u);break e}}n=u}else n=gi;return null===t.context?t.context=n:t.pendingContext=n,(t=po(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),mo(i,t),hu(i,o),o}function el(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nl(e,t){tl(e,t),(e=e.alternate)&&tl(e,t)}function rl(e,t,n){var r=new Qu(e,t,n=null!=n&&!0===n.hydrate),i=zu(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,ho(i),e[Pn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);kt.forEach((function(e){mt(e,t,n)})),Ct.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function il(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ol(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=el(s);a.call(e)}}Zu(t,s,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rl(e,0,t?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=el(s);u.call(e)}}vu((function(){Zu(t,s,e,i)}))}return el(s)}function sl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!il(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}rl.prototype.render=function(e){Zu(e,this._internalRoot,null,null)},rl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zu(null,e,null,(function(){t[Pn]=null}))},gt=function(e){if(13===e.tag){var t=Zi(lu(),150,100);hu(e,t),nl(e,t)}},yt=function(e){13===e.tag&&(hu(e,3),nl(e,3))},vt=function(e){if(13===e.tag){var t=lu();hu(e,t=cu(t,e,null)),nl(e,t)}},C=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mn(r);if(!i)throw Error(s(90));_e(r),Se(r,i)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&Ae(e,!!n.multiple,t,!1)}},O=yu,L=function(e,t,n,r,i){var o=Ua;Ua|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{(Ua=o)===Aa&&$i()}},M=function(){(Ua&(1|Na|Pa))===Aa&&(function(){if(null!==ou){var e=ou;ou=null,e.forEach((function(e,t){Ju(t,e),pu(t)})),$i()}}(),Pu())},F=function(e,t){var n=Ua;Ua|=2;try{return e(t)}finally{(Ua=n)===Aa&&$i()}};var al={Events:[On,Ln,Mn,I,T,jn,function(e){ot(e,qn)},P,R,Jt,ut,Pu,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Vu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Uu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Rn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=al,t.createPortal=sl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Ua&(Na|Pa))!==Aa)throw Error(s(187));var n=Ua;Ua|=1;try{return Qi(99,e.bind(null,t))}finally{Ua=n,$i()}},t.hydrate=function(e,t,n){if(!il(t))throw Error(s(200));return ol(null,e,t,!0,n)},t.render=function(e,t,n){if(!il(t))throw Error(s(200));return ol(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!il(e))throw Error(s(40));return!!e._reactRootContainer&&(vu((function(){ol(null,null,e,!1,(function(){e._reactRootContainer=null,e[Pn]=null}))})),!0)},t.unstable_batchedUpdates=yu,t.unstable_createPortal=function(e,t){return sl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!il(n))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return ol(e,t,n,!1,r)},t.version="16.13.1"},164:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},117:(e,t,n)=>{var r=n(725),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function b(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}function _(){}function E(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=b.prototype;var T=E.prototype=new _;T.constructor=E,r(T,b.prototype),T.isPureReactComponent=!0;var x={current:null},S=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&!I.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:x.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var A=/\/+/g,D=[];function N(e,t,n,r){if(D.length){var i=D.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function R(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case o:case s:a=!0}}if(a)return n(r,e,""===t?"."+L(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=t+L(i=e[u],u);a+=R(i,l,n,r)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=g&&e[g]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),u=0;!(i=e.next()).done;)a+=R(i=i.value,l=t+L(i,u++),n,r);else if("object"===i)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function O(e,t,n){return null==e?0:R(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?V(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function V(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),O(e,F,t=N(t,o,r,i)),P(t)}var U={current:null};function B(){var e=U.current;if(null===e)throw Error(y(321));return e}var z={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return V(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;O(e,M,t=N(null,null,t,n)),P(t)},count:function(e){return O(e,(function(){return null}),null)},toArray:function(e){var t=[];return V(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(y(143));return e}},t.Component=b,t.Fragment=a,t.Profiler=l,t.PureComponent=E,t.StrictMode=u,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(y(267,e));var i=r({},e.props),s=e.key,a=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,u=x.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return B().useCallback(e,t)},t.useContext=function(e,t){return B().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return B().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return B().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return B().useLayoutEffect(e,t)},t.useMemo=function(e,t){return B().useMemo(e,t)},t.useReducer=function(e,t,n){return B().useReducer(e,t,n)},t.useRef=function(e){return B().useRef(e)},t.useState=function(e){return B().useState(e)},t.version="16.13.1"},791:(e,t,n)=>{e.exports=n(117)},813:(e,t)=>{var n,r,i,o,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var a=null,u=null,l=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(n){throw setTimeout(l,0),n}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==a?setTimeout(n,0,e):(a=e,setTimeout(l,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},o=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var y=!1,v=null,w=-1,b=5,_=0;o=function(){return t.unstable_now()>=_},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,T=E.port2;E.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();_=e+b;try{v(!0,e)?T.postMessage(null):(y=!1,v=null)}catch(n){throw T.postMessage(null),n}}else y=!1},n=function(e){v=e,y||(y=!0,T.postMessage(null))},r=function(e,n){w=f((function(){e(t.unstable_now())}),n)},i=function(){p(w),w=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,u=e[a];if(void 0!==s&&0>k(s,n))void 0!==u&&0>k(u,s)?(e[r]=u,e[a]=n,r=a):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==u&&0>k(u,n)))break e;e[r]=u,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],A=[],D=1,N=null,P=3,R=!1,O=!1,L=!1;function M(e){for(var t=S(A);null!==t;){if(null===t.callback)I(A);else{if(!(t.startTime<=e))break;I(A),t.sortIndex=t.expirationTime,x(C,t)}t=S(A)}}function F(e){if(L=!1,M(e),!O)if(null!==S(C))O=!0,n(V);else{var t=S(A);null!==t&&r(F,t.startTime-e)}}function V(e,n){O=!1,L&&(L=!1,i()),R=!0;var s=P;try{for(M(n),N=S(C);null!==N&&(!(N.expirationTime>n)||e&&!o());){var a=N.callback;if(null!==a){N.callback=null,P=N.priorityLevel;var u=a(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===S(C)&&I(C),M(n)}else I(C);N=S(C)}if(null!==N)var l=!0;else{var c=S(A);null!==c&&r(F,c.startTime-n),l=!1}return l}finally{N=null,P=s,R=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var B=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||R||(O=!0,n(V))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,o,s){var a=t.unstable_now();if("object"===typeof s&&null!==s){var u=s.delay;u="number"===typeof u&&0<u?a+u:a,s="number"===typeof s.timeout?s.timeout:U(e)}else s=U(e),u=a;return e={id:D++,callback:o,priorityLevel:e,startTime:u,expirationTime:s=u+s,sortIndex:-1},u>a?(e.sortIndex=u,x(A,e),null===S(C)&&e===S(A)&&(L?i():L=!0,r(F,u-a))):(e.sortIndex=s,x(C,e),O||R||(O=!0,n(V))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=S(C);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:(e,t,n)=>{e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>b,SDK_VERSION:()=>be,_DEFAULT_ENTRY_NAME:()=>ue,_addComponent:()=>de,_addOrOverwriteComponent:()=>fe,_apps:()=>ce,_clearComponents:()=>ye,_components:()=>he,_getProvider:()=>me,_registerComponent:()=>pe,_removeServiceInstance:()=>ge,deleteApp:()=>xe,getApp:()=>Ee,getApps:()=>Te,initializeApp:()=>_e,onLog:()=>Ie,registerVersion:()=>Se,setLogLevel:()=>ke});var t={};n.r(t),n.d(t,{anticipate:()=>Lb,backIn:()=>Pb,backInOut:()=>Ob,backOut:()=>Rb,bounceIn:()=>Fb,bounceInOut:()=>Vb,bounceOut:()=>Mb,circIn:()=>Ab,circInOut:()=>Nb,circOut:()=>Db,createAnticipateEasing:()=>xb,createBackIn:()=>Tb,createExpoIn:()=>Eb,createMirroredEasing:()=>_b,createReversedEasing:()=>bb,cubicBezier:()=>$b,easeIn:()=>Ib,easeInOut:()=>Cb,easeOut:()=>kb,linear:()=>Sb,mirrored:()=>wb,reversed:()=>vb});var r=n(791),i=n(164);const o=()=>r.createElement("div",{className:"title"},r.createElement("h1",null,r.createElement("span",{role:"img","aria-label":"heart"},"\ud83d\udc96")," Photo Galleria ",r.createElement("span",{role:"img","aria-label":"heart"},"\ud83d\udc96")),r.createElement("h2",null,r.createElement("span",{role:"img","aria-label":"palette"},"\ud83c\udfa8")," Your Art Inspo ",r.createElement("span",{role:"img","aria-label":"palette"},"\ud83c\udfa8")),r.createElement("p",null,r.createElement("span",{role:"img","aria-label":"sparkle"},"\u2728")," Unleash Your Inner Artist: Experience a World of Inspiration with Our Gallery App ",r.createElement("span",{role:"img","aria-label":"sparkle"},"\u2728"))),s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,u=a?e[i+2]:0,l=t>>2,c=(3&t)<<4|s>>4;let h=(15&s)<<2|u>>6,d=63&u;a||(d=64,o||(h=64)),r.push(n[l],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new u;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=h(e[n],t[n]));return e}const d=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,f=()=>{try{return d()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Photo-Galleria",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},p=()=>{var e;return null===(e=f())||void 0===e?void 0:e.config};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function g(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(o)),""].join(".")}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function v(){return!function(){var e;const t=null===(e=f())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w(){try{return"object"===typeof indexedDB}catch(e){return!1}}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(E,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new b(n,o,t)}}const E=/\{\$([^}]+)}/g;function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function x(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(S(n)&&S(o)){if(!x(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S(e){return null!==e&&"object"===typeof e}function I(e,t){const n=new k(e,t);return n.subscribe.bind(n)}class k{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function C(){}function A(e){return e&&e._delegate?e._delegate:e}class D{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const N="[DEFAULT]";class P{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:N})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(Ow){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===N?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(Ow){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return this.component?this.component.multipleInstances?e:N:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class R{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const O=[];var L;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(L||(L={}));const M={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},F=L.INFO,V={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},U=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=V[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class B{constructor(e){this.name=e,this._logLevel=F,this._logHandler=U,this._userLogHandler=null,O.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in L))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?M[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...t),this._logHandler(this,L.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...t),this._logHandler(this,L.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.INFO,...t),this._logHandler(this,L.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.WARN,...t),this._logHandler(this,L.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.ERROR,...t),this._logHandler(this,L.ERROR,...t)}}const z=(e,t)=>t.some((t=>e instanceof t));let q,j;const K=new WeakMap,G=new WeakMap,H=new WeakMap,W=new WeakMap,Q=new WeakMap;let Y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return G.get(e);if("objectStoreNames"===t)return e.objectStoreNames||H.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return J(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function X(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Z(this),n),J(K.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return J(e.apply(Z(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Z(this),t,...r);return H.set(o,t.sort?t.sort():[t]),J(o)}}function $(e){return"function"===typeof e?X(e):(e instanceof IDBTransaction&&function(e){if(G.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));G.set(e,t)}(e),z(e,q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Y):e)}function J(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(J(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&K.set(t,e)})).catch((()=>{})),Q.set(t,e),t}(e);if(W.has(e))return W.get(e);const t=$(e);return t!==e&&(W.set(e,t),Q.set(t,e)),t}const Z=e=>Q.get(e);const ee=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ne=new Map;function re(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ne.get(t))return ne.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=te.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ee.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),u=1;u<s;u++)a[u-1]=arguments[u];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return ne.set(t,o),o}Y=(e=>({...e,get:(t,n,r)=>re(t,n)||e.get(t,n,r),has:(t,n)=>!!re(t,n)||e.has(t,n)}))(Y);class ie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const oe="@firebase/app",se="0.9.25",ae=new B("@firebase/app"),ue="[DEFAULT]",le={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ce=new Map,he=new Map;function de(e,t){try{e.container.addComponent(t)}catch(n){ae.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function fe(e,t){e.container.addOrOverwriteComponent(t)}function pe(e){const t=e.name;if(he.has(t))return ae.debug("There were multiple attempts to register component ".concat(t,".")),!1;he.set(t,e);for(const n of ce.values())de(n,e);return!0}function me(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ge(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue;me(e,t).clearInstance(n)}function ye(){he.clear()}const ve=new _("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class we{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ve.create("app-deleted",{appName:this._name})}}const be="10.7.1";function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ue,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ve.create("bad-app-name",{appName:String(i)});if(n||(n=p()),!n)throw ve.create("no-options");const o=ce.get(i);if(o){if(x(n,o.options)&&x(r,o.config))return o;throw ve.create("duplicate-app",{appName:i})}const s=new R(i);for(const u of he.values())s.addComponent(u);const a=new we(n,r,s);return ce.set(i,a),a}function Ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;const t=ce.get(e);if(!t&&e===ue&&p())return _e();if(!t)throw ve.create("no-app",{appName:e});return t}function Te(){return Array.from(ce.values())}async function xe(e){const t=e.name;ce.has(t)&&(ce.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Se(e,t,n){var r;let i=null!==(r=le[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ae.warn(e.join(" "))}pe(new D("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ie(e,t){if(null!==e&&"function"!==typeof e)throw ve.create("invalid-log-argument");!function(e,t){for(const n of O){let r=null;t&&t.level&&(r=M[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:L[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function ke(e){var t;t=e,O.forEach((e=>{e.setLogLevel(t)}))}const Ce="firebase-heartbeat-database",Ae=1,De="firebase-heartbeat-store";let Ne=null;function Pe(){return Ne||(Ne=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=J(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(J(s.result),e.oldVersion,e.newVersion,J(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Ce,Ae,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(De)}}).catch((e=>{throw ve.create("idb-open",{originalErrorMessage:e.message})}))),Ne}async function Re(e,t){try{const n=(await Pe()).transaction(De,"readwrite"),r=n.objectStore(De);await r.put(t,Oe(e)),await n.done}catch(n){if(n instanceof b)ae.warn(n.message);else{const e=ve.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ae.warn(e.message)}}}function Oe(e){return"".concat(e.name,"!").concat(e.options.appId)}class Le{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Fe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Me();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Me(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ve(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ve(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Me(){return(new Date).toISOString().substring(0,10)}class Fe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!w()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Pe();return await t.transaction(De).objectStore(De).get(Oe(e))}catch(t){if(t instanceof b)ae.warn(t.message);else{const e=ve.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ae.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ve(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var Ue;Ue="",pe(new D("platform-logger",(e=>new ie(e)),"PRIVATE")),pe(new D("heartbeat",(e=>new Le(e)),"PRIVATE")),Se(oe,se,Ue),Se(oe,se,"esm2017"),Se("fire-js","");class Be{constructor(e,t){this._delegate=e,this.firebase=t,de(e,new D("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),xe(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){de(this._delegate,e)}_addOrOverwriteComponent(e){fe(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ze=new _("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const qe=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=_e(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(T(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:Se,setLogLevel:ke,onLog:Ie,apps:null,SDK_VERSION:be,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(pe(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw ze.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&h(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!T(n,e=e||ue))throw ze.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Be);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){h(n,e)},createSubscribe:I,ErrorFactory:_,deepExtend:h}),n}(),je=new B("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){je.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&je.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=qe;!function(e){Se("@firebase/app-compat","0.2.25",e)}();Ke.registerVersion("firebase","10.7.1","app-compat");const Ge="firebasestorage.googleapis.com",He="storageBucket";class We extends b{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Xe(e),"Firebase Storage: ".concat(t," (").concat(Xe(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xe(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Qe,Ye;function Xe(e){return"storage/"+e}function $e(){return new We(Qe.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Je(){return new We(Qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ze(){return new We(Qe.CANCELED,"User canceled the upload/download.")}function et(){return new We(Qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tt(e){return new We(Qe.INVALID_ARGUMENT,e)}function nt(){return new We(Qe.APP_DELETED,"The Firebase app was deleted.")}function rt(e){return new We(Qe.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function it(e,t){return new We(Qe.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ot(e){throw new We(Qe.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Qe||(Qe={}));class st{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=st.makeFromUrl(e,t)}catch(i){return new st(e,"")}if(""===n.path)return n;throw r=e,new We(Qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===Ge?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let u=0;u<a.length;u++){const t=a[u],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new st(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new We(Qe.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class at{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function ut(e){return"string"===typeof e||e instanceof String}function lt(e){return ct()&&e instanceof Blob}function ct(){return"undefined"!==typeof Blob}function ht(e,t,n,r){if(r<t)throw tt("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw tt("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function dt(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ft(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function pt(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ye||(Ye={}));class mt{constructor(e,t,n,r,i,o,s,a,u,l,c){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=u,this.progressCallback_=l,this.connectionFactory_=c,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new gt(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ye.NO_ERROR,i=n.getStatus();if(!t||pt(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Ye.ABORT;return void e(!1,new gt(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new gt(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(o){r(o)}else if(null!==i){const e=$e();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?nt():Ze())}else{r(Je())}};this.canceled_?t(0,new gt(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return 2===a}let l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,u())}),t)}function d(){o&&clearTimeout(o)}function f(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void c.call(null,e,...n);if(u()||s)return d(),void c.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),h(o)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class gt{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function yt(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function vt(){const e=yt();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(ct())return new Blob(n);throw new We(Qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function wt(e){if("undefined"===typeof atob)throw t="base-64",new We(Qe.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const bt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _t{constructor(e,t){this.data=e,this.contentType=t||null}}function Et(e,t){switch(e){case bt.RAW:return new _t(Tt(t));case bt.BASE64:case bt.BASE64URL:return new _t(xt(e,t));case bt.DATA_URL:return new _t(function(e){const t=new St(e);return t.base64?xt(bt.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw it(bt.DATA_URL,"Malformed data URL.")}return Tt(t)}(t.rest)}(t),new St(t).contentType)}throw $e()}function Tt(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function xt(e,t){switch(e){case bt.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw it(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case bt.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw it(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wt(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw it(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class St{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw it(bt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class It{constructor(e,t){let n=0,r="";lt(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(lt(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new It(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new It(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(ct()){const e=t.map((e=>e instanceof It?e.data_:e));return new It(vt.apply(null,e))}{const e=t.map((e=>ut(e)?Et(bt.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new It(r,!0)}}uploadData(){return this.data_}}function kt(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Ct(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function At(e,t){return t}class Dt{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||At}}let Nt=null;function Pt(){if(Nt)return Nt;const e=[];e.push(new Dt("bucket")),e.push(new Dt("generation")),e.push(new Dt("metageneration")),e.push(new Dt("name","fullPath",!0));const t=new Dt("name");t.xform=function(e,t){return function(e){return!ut(e)||e.length<2?e:Ct(e)}(t)},e.push(t);const n=new Dt("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Dt("timeCreated")),e.push(new Dt("updated")),e.push(new Dt("md5Hash",null,!0)),e.push(new Dt("cacheControl",null,!0)),e.push(new Dt("contentDisposition",null,!0)),e.push(new Dt("contentEncoding",null,!0)),e.push(new Dt("contentLanguage",null,!0)),e.push(new Dt("contentType",null,!0)),e.push(new Dt("metadata","customMetadata",!0)),Nt=e,Nt}function Rt(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new st(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Ot(e,t,n){const r=kt(t);if(null===r)return null;return Rt(e,r,n)}function Lt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const Mt="prefixes",Ft="items";function Vt(e,t,n){const r=kt(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Mt])for(const i of n[Mt]){const n=i.replace(/\/$/,""),o=e._makeStorageReference(new st(t,n));r.prefixes.push(o)}if(n[Ft])for(const i of n[Ft]){const n=e._makeStorageReference(new st(t,i.name));r.items.push(n)}return r}(e,t,r)}class Ut{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bt(e){if(!e)throw $e()}function zt(e,t){return function(n,r){const i=Ot(e,r,t);return Bt(null!==i),i}}function qt(e,t){return function(n,r){const i=Ot(e,r,t);return Bt(null!==i),function(e,t,n,r){const i=kt(t);if(null===i)return null;if(!ut(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return dt("/b/"+s(i)+"/o/"+s(o),n,r)+ft({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function jt(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new We(Qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new We(Qe.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new We(Qe.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new We(Qe.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Kt(e){const t=jt(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new We(Qe.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Gt(e,t,n){const r=dt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Ut(r,"GET",zt(e,n),i);return o.errorHandler=Kt(t),o}function Ht(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=dt(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,u=new Ut(s,"GET",function(e,t){return function(n,r){const i=Vt(e,t,r);return Bt(null!==i),i}}(e,t.bucket),a);return u.urlParams=o,u.errorHandler=jt(t),u}function Wt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Qt(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const u=Wt(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Lt(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+a+"--",h=It.getBlob(l,r,c);if(null===h)throw et();const d={name:u.fullPath},f=dt(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Ut(f,"POST",zt(e,n),p);return m.urlParams=d,m.headers=s,m.body=h.uploadData(),m.errorHandler=jt(t),m}class Yt{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function Xt(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Bt(!1)}return Bt(!!n&&-1!==(t||["active"]).indexOf(n)),n}const $t=262144;function Jt(e,t,n,r,i,o,s,a){const u=new Yt(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new We(Qe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const l=u.total-u.current;let c=l;i>0&&(c=Math.min(c,i));const h=u.current,d=h+c;let f="";f=0===c?"finalize":l===c?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(u.current)},m=r.slice(h,d);if(null===m)throw et();const g=t.maxUploadRetryTime,y=new Ut(n,"POST",(function(e,n){const i=Xt(e,["active","final"]),s=u.current+c,a=r.size();let l;return l="final"===i?zt(t,o)(e,n):null,new Yt(s,a,"final"===i,l)}),g);return y.headers=p,y.body=m.uploadData(),y.progressCallback=a||null,y.errorHandler=jt(e),y}const Zt={STATE_CHANGED:"state_changed"},en={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tn(e){switch(e){case"running":case"pausing":case"canceling":return en.RUNNING;case"paused":return en.PAUSED;case"success":return en.SUCCESS;case"canceled":return en.CANCELED;default:return en.ERROR}}class nn{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function rn(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let on=null;class sn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ye.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Ye.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Ye.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw ot("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ot("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ot("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw ot("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ot("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class an extends sn{initXhr(){this.xhr_.responseType="text"}}function un(){return on?on():new an}class ln{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Pt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Qe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(pt(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Je()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Qe.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s=Wt(t,r,i),a={name:s.fullPath},u=dt(o,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},c=Lt(s,n),h=e.maxUploadRetryTime,d=new Ut(u,"POST",(function(e){let t;Xt(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Bt(!1)}return Bt(ut(t)),t}),h);return d.urlParams=a,d.headers=l,d.body=c,d.errorHandler=jt(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,un,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new Ut(n,"POST",(function(e){const t=Xt(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Bt(!1)}n||Bt(!1);const i=Number(n);return Bt(!isNaN(i)),new Yt(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=jt(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,un,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=$t*this._chunkMultiplier,t=new Yt(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=Jt(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const s=this._ref.storage._makeRequest(o,un,r,i,!1);this._request=s,s.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*($t*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=Gt(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,un,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=Qt(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,un,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ze(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=tn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new nn(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(tn(this._state)){case en.SUCCESS:rn(this._resolve.bind(null,this.snapshot))();break;case en.CANCELED:case en.ERROR:rn(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(tn(this._state)){case en.RUNNING:case en.PAUSED:e.next&&rn(e.next.bind(e,this.snapshot))();break;case en.SUCCESS:e.complete&&rn(e.complete.bind(e))();break;default:e.error&&rn(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class cn{constructor(e,t){this._service=e,this._location=t instanceof st?t:st.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cn(e,t)}get root(){const e=new st(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ct(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new st(this._location.bucket,e);return new cn(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw rt(e)}}function hn(e){const t={prefixes:[],items:[]};return dn(e,t).then((()=>t))}async function dn(e,t,n){const r={pageToken:n},i=await fn(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await dn(e,t,i.nextPageToken)}function fn(e,t){null!=t&&"number"===typeof t.maxResults&&ht("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=Ht(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,un)}function pn(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=dt(t.fullServerUrl(),e.host,e._protocol),o=Lt(n,r),s=e.maxOperationRetryTime,a=new Ut(i,"PATCH",zt(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Kt(t),a}(e.storage,e._location,t,Pt());return e.storage.makeRequestWithTokens(n,un)}function mn(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=dt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Ut(r,"GET",qt(e,n),i);return o.errorHandler=Kt(t),o}(e.storage,e._location,Pt());return e.storage.makeRequestWithTokens(t,un).then((e=>{if(null===e)throw new We(Qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function gn(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=dt(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Ut(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Kt(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,un)}function yn(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new st(e._location.bucket,n);return new cn(e.storage,r)}function vn(e,t){if(e instanceof _n){const n=e;if(null==n._bucket)throw new We(Qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+He+"' property when initializing the app?");const r=new cn(n,n._bucket);return null!=t?vn(r,t):r}return void 0!==t?yn(e,t):e}function wn(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof _n)return new cn(e,t);throw tt("To use ref(service, url), the first argument must be a Storage instance.")}return vn(e,t)}function bn(e,t){const n=null===t||void 0===t?void 0:t[He];return null==n?null:st.makeFromBucketSpec(n,e)}class _n{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Ge,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?st.makeFromBucketSpec(r,this._host):bn(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=st.makeFromBucketSpec(this._url,e):this._bucket=bn(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ht("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ht("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cn(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new at(nt());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=ft(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new mt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const En="@firebase/storage",Tn="0.12.0",xn="storage";function Sn(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new ln(e,new It(t),n)}(e=A(e),t,n)}function In(e){return function(e){e._throwIfRoot("getMetadata");const t=Gt(e.storage,e._location,Pt());return e.storage.makeRequestWithTokens(t,un)}(e=A(e))}function kn(e,t){return wn(e=A(e),t)}function Cn(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:g(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function An(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new _n(r,i,o,n,be)}pe(new D(xn,An,"PUBLIC").setMultipleInstances(!0)),Se(En,Tn,""),Se(En,Tn,"esm2017");class Dn{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Nn{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Dn(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new Dn(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new Dn(e,this,this._ref)):{next:t.next?e=>t.next(new Dn(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class Pn{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new Rn(e,this._service)))}get items(){return this._delegate.items.map((e=>new Rn(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Rn{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return yn(e,t)}(this._delegate,e);return new Rn(t,this.storage)}get root(){return new Rn(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Rn(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Nn(Sn(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=Et(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Nn(new ln(this._delegate,new It(r.data,!0),i),this)}listAll(){return function(e){return hn(e=A(e))}(this._delegate).then((e=>new Pn(e,this.storage)))}list(e){return function(e,t){return fn(e=A(e),t)}(this._delegate,e||void 0).then((e=>new Pn(e,this.storage)))}getMetadata(){return In(this._delegate)}updateMetadata(e){return function(e,t){return pn(e=A(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return mn(e=A(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return gn(e=A(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw rt(e)}}class On{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Ln(e))throw tt("ref() expected a child path but got a URL, use refFromURL instead.");return new Rn(kn(this._delegate,e),this)}refFromURL(e){if(!Ln(e))throw tt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{st.makeFromUrl(e,this._delegate.host)}catch(t){throw tt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Rn(kn(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Cn(this._delegate,e,t,n)}}function Ln(e){return/^[A-Za-z]+:\/\//.test(e)}function Mn(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new On(r,i)}!function(e){const t={TaskState:en,TaskEvent:Zt,StringFormat:bt,Storage:On,Reference:Rn};e.INTERNAL.registerComponent(new D("storage-compat",Mn,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.3")}(Ke);var Fn,Vn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Un={},Bn=Bn||{},zn=Vn||self;function qn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function jn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Kn="closure_uid_"+(1e9*Math.random()>>>0),Gn=0;function Hn(e,t,n){return e.call.apply(e.bind,arguments)}function Wn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Qn(e,t,n){return(Qn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hn:Wn).apply(null,arguments)}function Yn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function $n(){this.s=this.s,this.o=this.o}$n.prototype.s=!1,$n.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Kn)&&e[Kn]||(e[Kn]=++Gn)}(this)},$n.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Zn(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function er(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(qn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function tr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}tr.prototype.h=function(){this.defaultPrevented=!0};var nr=function(){if(!zn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};zn.addEventListener("test",e,t),zn.removeEventListener("test",e,t)}catch(Qb){}return e}();function rr(e){return/^[\s\xa0]*$/.test(e)}function ir(){var e=zn.navigator;return e&&(e=e.userAgent)?e:""}function or(e){return-1!=ir().indexOf(e)}function sr(e){return sr[" "](e),e}sr[" "]=function(){};var ar,ur,lr=or("Opera"),cr=or("Trident")||or("MSIE"),hr=or("Edge"),dr=hr||cr,fr=or("Gecko")&&!(-1!=ir().toLowerCase().indexOf("webkit")&&!or("Edge"))&&!(or("Trident")||or("MSIE"))&&!or("Edge"),pr=-1!=ir().toLowerCase().indexOf("webkit")&&!or("Edge");function mr(){var e=zn.document;return e?e.documentMode:void 0}e:{var gr="",yr=function(){var e=ir();return fr?/rv:([^\);]+)(\)|;)/.exec(e):hr?/Edge\/([\d\.]+)/.exec(e):cr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):pr?/WebKit\/(\S+)/.exec(e):lr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(yr&&(gr=yr?yr[1]:""),cr){var vr=mr();if(null!=vr&&vr>parseFloat(gr)){ar=String(vr);break e}}ar=gr}if(zn.document&&cr){var wr=mr();ur=wr||(parseInt(ar,10)||void 0)}else ur=void 0;var br=ur;function _r(e,t){if(tr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(fr){e:{try{sr(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Er[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_r.$.h.call(this)}}Xn(_r,tr);var Er={2:"touch",3:"pen",4:"mouse"};_r.prototype.h=function(){_r.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Tr="closure_listenable_"+(1e6*Math.random()|0),xr=0;function Sr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++xr,this.fa=this.ia=!1}function Ir(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function kr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Cr(e){const t={};for(const n in e)t[n]=e[n];return t}const Ar="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Ar.length;t++)n=Ar[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Nr(e){this.src=e,this.g={},this.h=0}function Pr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Jn(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ir(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Rr(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}Nr.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=Rr(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Sr(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var Or="closure_lm_"+(1e6*Math.random()|0),Lr={};function Mr(e,t,n,r,i){if(r&&r.once)return Vr(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Mr(e,t[o],n,r,i);return null}return n=Gr(n),e&&e[Tr]?e.O(t,n,jn(r)?!!r.capture:!!r,i):Fr(e,t,n,!1,r,i)}function Fr(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=jn(i)?!!i.capture:!!i,a=jr(e);if(a||(e[Or]=a=new Nr(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=qr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)nr||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(zr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Vr(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Vr(e,t[o],n,r,i);return null}return n=Gr(n),e&&e[Tr]?e.P(t,n,jn(r)?!!r.capture:!!r,i):Fr(e,t,n,!0,r,i)}function Ur(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Ur(e,t[o],n,r,i);else r=jn(r)?!!r.capture:!!r,n=Gr(n),e&&e[Tr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Rr(o=e.g[t],n,r,i))&&(Ir(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=jr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Rr(t,n,r,i)),(n=-1<e?t[e]:null)&&Br(n))}function Br(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Tr])Pr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(zr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=jr(t))?(Pr(n,e),0==n.h&&(n.src=null,t[Or]=null)):Ir(e)}}}function zr(e){return e in Lr?Lr[e]:Lr[e]="on"+e}function qr(e,t){if(e.fa)e=!0;else{t=new _r(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Br(e),e=n.call(r,t)}return e}function jr(e){return(e=e[Or])instanceof Nr?e:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gr(e){return"function"===typeof e?e:(e[Kr]||(e[Kr]=function(t){return e.handleEvent(t)}),e[Kr])}function Hr(){$n.call(this),this.i=new Nr(this),this.S=this,this.J=null}function Wr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new tr(t,e);else if(t instanceof tr)t.target=t.target||e;else{var i=t;Dr(t=new tr(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Qr(s,r,!0,t)&&i}if(i=Qr(s=t.g=e,r,!0,t)&&i,i=Qr(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Qr(s=t.g=n[o],r,!1,t)&&i}function Qr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&Pr(e.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Xn(Hr,$n),Hr.prototype[Tr]=!0,Hr.prototype.removeEventListener=function(e,t,n,r){Ur(this,e,t,n,r)},Hr.prototype.N=function(){if(Hr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ir(n[r]);delete t.g[e],t.h--}}this.J=null},Hr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Hr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Yr=zn.JSON.stringify;function Xr(){var e=ri;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var $r=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Jr),(e=>e.reset()));class Jr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Zr(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ei(e){zn.setTimeout((()=>{throw e}),0)}let ti,ni=!1,ri=new class{constructor(){this.h=this.g=null}add(e,t){const n=$r.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ii=()=>{const e=zn.Promise.resolve(void 0);ti=()=>{e.then(oi)}};var oi=()=>{for(var e;e=Xr();){try{e.h.call(e.g)}catch(Qb){ei(Qb)}var t=$r;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ni=!1};function si(e,t){Hr.call(this),this.h=e||1,this.g=t||zn,this.j=Qn(this.qb,this),this.l=Date.now()}function ai(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ui(e,t,n){if("function"===typeof e)n&&(e=Qn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Qn(e.handleEvent,e)}return 2147483647<Number(t)?-1:zn.setTimeout(e,t||0)}function li(e){e.g=ui((()=>{e.g=null,e.i&&(e.i=!1,li(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Xn(si,Hr),(Fn=si.prototype).ga=!1,Fn.T=null,Fn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Wr(this,"tick"),this.ga&&(ai(this),this.start()))}},Fn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fn.N=function(){si.$.N.call(this),ai(this),delete this.g};class ci extends $n{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:li(this)}N(){super.N(),this.g&&(zn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(e){$n.call(this),this.h=e,this.g={}}Xn(hi,$n);var di=[];function fi(e,t,n,r){Array.isArray(n)||(n&&(di[0]=n.toString()),n=di);for(var i=0;i<n.length;i++){var o=Mr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function pi(e){kr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Br(e)}),e),e.g={}}function mi(){this.g=!0}function gi(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Yr(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}hi.prototype.N=function(){hi.$.N.call(this),pi(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mi.prototype.Ea=function(){this.g=!1},mi.prototype.info=function(){};var yi={},vi=null;function wi(){return vi=vi||new Hr}function bi(e){tr.call(this,yi.Ta,e)}function _i(e){const t=wi();Wr(t,new bi(t))}function Ei(e,t){tr.call(this,yi.STAT_EVENT,e),this.stat=t}function Ti(e){const t=wi();Wr(t,new Ei(t,e))}function xi(e,t){tr.call(this,yi.Ua,e),this.size=t}function Si(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return zn.setTimeout((function(){e()}),t)}yi.Ta="serverreachability",Xn(bi,tr),yi.STAT_EVENT="statevent",Xn(Ei,tr),yi.Ua="timingevent",Xn(xi,tr);var Ii={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ki={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ci(){}function Ai(e){return e.h||(e.h=e.i())}function Di(){}Ci.prototype.h=null;var Ni,Pi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ri(){tr.call(this,"d")}function Oi(){tr.call(this,"c")}function Li(){}function Mi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new hi(this),this.P=Vi,e=dr?125:void 0,this.V=new si(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Fi}function Fi(){this.i=null,this.g="",this.h=!1}Xn(Ri,tr),Xn(Oi,tr),Xn(Li,Ci),Li.prototype.g=function(){return new XMLHttpRequest},Li.prototype.i=function(){return{}},Ni=new Li;var Vi=45e3,Ui={},Bi={};function zi(e,t,n){e.L=1,e.A=so(to(t)),e.u=n,e.S=!0,qi(e,null)}function qi(e,t){e.G=Date.now(),Hi(e),e.B=to(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),bo(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Fi,e.g=bs(e.l,n?t:null,!e.u),0<e.O&&(e.M=new ci(Qn(e.Pa,e,e.g),e.O)),fi(e.U,e.g,"readystatechange",e.nb),t=e.I?Cr(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),_i(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");s=2<=h.length&&"type"==h[1]?s+(c+"=")+l+"&":s+(c+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ji(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Ki(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Gi(e,n),r==Bi){4==t&&(e.s=4,Ti(14),i=!1),gi(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ui){e.s=4,Ti(15),gi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}gi(e.j,e.m,r,null),$i(e,r)}ji(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Ti(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ds(t),t.M=!0,Ti(11))):(gi(e.j,e.m,n,"[Invalid Chunked Response]"),Xi(e),Yi(e))}function Gi(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Bi:(n=Number(t.substring(n,r)),isNaN(n)?Ui:(r+=1)+n>t.length?Bi:(t=t.slice(r,r+n),e.o=r+n,t))}function Hi(e){e.Y=Date.now()+e.P,Wi(e,e.P)}function Wi(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Si(Qn(e.lb,e),t)}function Qi(e){e.C&&(zn.clearTimeout(e.C),e.C=null)}function Yi(e){0==e.l.H||e.J||ms(e.l,e)}function Xi(e){Qi(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ai(e.V),pi(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function $i(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ko(n.i,e)))if(!e.K&&ko(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ps(n),is(n)}hs(n),Ti(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Si(Qn(n.ib,n),6e3));if(1>=Io(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else ys(n,11)}else if((e.K||n.g==e)&&ps(n),!rr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=l[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Co(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,oo(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=ws(r,r.J?r.pa:null,r.Y),s.K){Ao(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Qi(a),Hi(a)),r.g=s}else cs(r);0<n.j.length&&ss(n)}else"stop"!=l[0]&&"close"!=l[0]||ys(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?ys(n,7):rs(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}_i()}catch(l){}}function Ji(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(qn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(qn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(qn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(Fn=Mi.prototype).setTimeout=function(e){this.P=e},Fn.nb=function(e){e=e.target;const t=this.M;t&&3==$o(e)?t.l():this.Pa(e)},Fn.Pa=function(e){try{if(e==this.g)e:{const c=$o(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||dr||this.g&&(this.h.h||this.g.ja()||Jo(this.g)))){this.J||4!=c||7==t||_i(),Qi(this);var n=this.g.da();this.ca=n;t:if(ji(this)){var r=Jo(this.g);e="";var i=r.length,o=4==$o(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Xi(this),Yi(this);var s="";break t}this.h.i=new zn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rr(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Ti(12),Xi(this),Yi(this);break e}gi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$i(this,n)}this.S?(Ki(this,c,s),dr&&this.i&&3==c&&(fi(this.U,this.V,"tick",this.mb),this.V.start())):(gi(this.j,this.m,s,null),$i(this,s)),4==c&&Xi(this),this.i&&!this.J&&(4==c?ms(this.l,this):(this.i=!1,Hi(this)))}else(function(e){const t={};e=(e.g&&2<=$o(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(rr(e[r]))continue;var n=Zr(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Ti(12)):(this.s=0,Ti(13)),Xi(this),Yi(this)}}}catch(c){}},Fn.mb=function(){if(this.g){var e=$o(this.g),t=this.g.ja();this.o<t.length&&(Qi(this),Ki(this,e,t),this.i&&4!=e&&Hi(this))}},Fn.cancel=function(){this.J=!0,Xi(this)},Fn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(_i(),Ti(17)),Xi(this),this.s=2,Yi(this)):Wi(this,this.Y-e)};var Zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eo(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof eo){this.h=e.h,no(this,e.j),this.s=e.s,this.g=e.g,ro(this,e.m),this.l=e.l;var t=e.i,n=new go;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),io(this,n),this.o=e.o}else e&&(t=String(e).match(Zi))?(this.h=!1,no(this,t[1]||"",!0),this.s=ao(t[2]||""),this.g=ao(t[3]||"",!0),ro(this,t[4]),this.l=ao(t[5]||"",!0),io(this,t[6]||"",!0),this.o=ao(t[7]||"")):(this.h=!1,this.i=new go(null,this.h))}function to(e){return new eo(e)}function no(e,t,n){e.j=n?ao(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ro(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function io(e,t,n){t instanceof go?(e.i=t,function(e,t){t&&!e.j&&(yo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(vo(this,t),bo(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=uo(t,po)),e.i=new go(t,e.h))}function oo(e,t,n){e.i.set(t,n)}function so(e){return oo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ao(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function uo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}eo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(uo(t,co,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(uo(t,co,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(uo(n,"/"==n.charAt(0)?fo:ho,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",uo(n,mo)),e.join("")};var co=/[#\/\?@]/g,ho=/[#\?:]/g,fo=/[#\?]/g,po=/[#\?@]/g,mo=/#/g;function go(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function yo(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function vo(e,t){yo(e),t=_o(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wo(e,t){return yo(e),t=_o(e,t),e.g.has(t)}function bo(e,t,n){vo(e,t),0<n.length&&(e.i=null,e.g.set(_o(e,t),Zn(n)),e.h+=n.length)}function _o(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Fn=go.prototype).add=function(e,t){yo(this),this.i=null,e=_o(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Fn.forEach=function(e,t){yo(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Fn.ta=function(){yo(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Fn.Z=function(e){yo(this);let t=[];if("string"===typeof e)wo(this,e)&&(t=t.concat(this.g.get(_o(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Fn.set=function(e,t){return yo(this),this.i=null,wo(this,e=_o(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Fn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Fn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Eo=class{constructor(e,t){this.g=e,this.map=t}};function To(e){this.l=e||xo,zn.PerformanceNavigationTiming?e=0<(e=zn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(zn.g&&zn.g.Ka&&zn.g.Ka()&&zn.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xo=10;function So(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Io(e){return e.h?1:e.g?e.g.size:0}function ko(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Co(e,t){e.g?e.g.add(t):e.h=t}function Ao(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Do(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Zn(e.i)}To.prototype.cancel=function(){if(this.i=Do(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var No=class{stringify(e){return zn.JSON.stringify(e,void 0)}parse(e){return zn.JSON.parse(e,void 0)}};function Po(){this.g=new No}function Ro(e,t,n){const r=n||"";try{Ji(e,(function(e,n){let i=e;jn(e)&&(i=Yr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Oo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Lo(e){this.l=e.ec||null,this.j=e.ob||!1}function Mo(e,t){Hr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Fo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xn(Lo,Ci),Lo.prototype.g=function(){return new Mo(this.l,this.j)},Lo.prototype.i=function(e){return function(){return e}}({}),Xn(Mo,Hr);var Fo=0;function Vo(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Uo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Bo(e)}function Bo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Fn=Mo.prototype).open=function(e,t){if(this.readyState!=Fo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Bo(this)},Fn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||zn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Fn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Uo(this)),this.readyState=Fo},Fn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Bo(this)),this.g&&(this.readyState=3,Bo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof zn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vo(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Fn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Uo(this):Bo(this),3==this.readyState&&Vo(this)}},Fn.Za=function(e){this.g&&(this.response=this.responseText=e,Uo(this))},Fn.Ya=function(e){this.g&&(this.response=e,Uo(this))},Fn.ka=function(){this.g&&Uo(this)},Fn.setRequestHeader=function(e,t){this.v.append(e,t)},Fn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Fn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var zo=zn.JSON.parse;function qo(e){Hr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jo,this.L=this.M=!1}Xn(qo,Hr);var jo="",Ko=/^https?$/i,Go=["POST","PUT"];function Ho(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Wo(e),Yo(e)}function Wo(e){e.F||(e.F=!0,Wr(e,"complete"),Wr(e,"error"))}function Qo(e){if(e.h&&"undefined"!=typeof Bn&&(!e.C[1]||4!=$o(e)||2!=e.da()))if(e.v&&4==$o(e))ui(e.La,0,e);else if(Wr(e,"readystatechange"),4==$o(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Zi)[1]||null;!i&&zn.self&&zn.self.location&&(i=zn.self.location.protocol.slice(0,-1)),r=!Ko.test(i?i.toLowerCase():"")}n=r}if(n)Wr(e,"complete"),Wr(e,"success");else{e.m=6;try{var o=2<$o(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Wo(e)}}finally{Yo(e)}}}function Yo(e,t){if(e.g){Xo(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Wr(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Xo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(zn.clearTimeout(e.A),e.A=null)}function $o(e){return e.g?e.g.readyState:0}function Jo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case jo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(oa){return null}}function Zo(e){let t="";return kr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function es(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Zo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):oo(e,t,n))}function ts(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ns(e){this.Ga=0,this.j=[],this.l=new mi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ts("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ts("baseRetryDelayMs",5e3,e),this.hb=ts("retryDelaySeedMs",1e4,e),this.eb=ts("forwardChannelMaxRetries",2,e),this.xa=ts("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new To(e&&e.concurrentRequestLimit),this.Ja=new Po,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function rs(e){if(os(e),3==e.H){var t=e.W++,n=to(e.I);if(oo(n,"SID",e.K),oo(n,"RID",t),oo(n,"TYPE","terminate"),us(e,n),(t=new Mi(e,e.l,t)).L=2,t.A=so(to(n)),n=!1,zn.navigator&&zn.navigator.sendBeacon)try{n=zn.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&zn.Image&&((new Image).src=t.A,n=!0),n||(t.g=bs(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Hi(t)}vs(e)}function is(e){e.g&&(ds(e),e.g.cancel(),e.g=null)}function os(e){is(e),e.u&&(zn.clearTimeout(e.u),e.u=null),ps(e),e.i.cancel(),e.m&&("number"===typeof e.m&&zn.clearTimeout(e.m),e.m=null)}function ss(e){if(!So(e.i)&&!e.m){e.m=!0;var t=e.Na;ti||ii(),ni||(ti(),ni=!0),ri.add(t,e),e.C=0}}function as(e,t){var n;n=t?t.m:e.W++;const r=to(e.I);oo(r,"SID",e.K),oo(r,"RID",n),oo(r,"AID",e.V),us(e,r),e.o&&e.s&&es(r,e.o,e.s),n=new Mi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ls(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Co(e.i,n),zi(n,r,t)}function us(e,t){e.na&&kr(e.na,(function(e,n){oo(t,n,e)})),e.h&&Ji({},(function(e,n){oo(t,n,e)}))}function ls(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Qn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{Ro(a,e,"req"+n+"_")}catch(Eu){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function cs(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ti||ii(),ni||(ti(),ni=!0),ri.add(t,e),e.A=0}}function hs(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Si(Qn(e.Ma,e),gs(e,e.A)),e.A++,!0)}function ds(e){null!=e.B&&(zn.clearTimeout(e.B),e.B=null)}function fs(e){e.g=new Mi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=to(e.wa);oo(t,"RID","rpc"),oo(t,"SID",e.K),oo(t,"AID",e.V),oo(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&oo(t,"TO",e.qa),oo(t,"TYPE","xmlhttp"),us(e,t),e.o&&e.s&&es(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=so(to(t)),n.u=null,n.S=!0,qi(n,e)}function ps(e){null!=e.v&&(zn.clearTimeout(e.v),e.v=null)}function ms(e,t){var n=null;if(e.g==t){ps(e),ds(e),e.g=null;var r=2}else{if(!ko(e.i,t))return;n=t.F,Ao(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Wr(r=wi(),new xi(r,n)),ss(e)}else cs(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Io(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Si(Qn(e.Na,e,t),gs(e,e.C)),e.C++,!0))}(e,t)||2==r&&hs(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ys(e,5);break;case 4:ys(e,10);break;case 3:ys(e,6);break;default:ys(e,2)}}function gs(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ys(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Qn(e.pb,e);n||(n=new eo("//www.google.com/images/cleardot.gif"),zn.location&&"http"==zn.location.protocol||no(n,"https"),so(n)),function(e,t){const n=new mi;if(zn.Image){const r=new Image;r.onload=Yn(Oo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Yn(Oo,n,r,"TestLoadImage: error",!1,t),r.onabort=Yn(Oo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Yn(Oo,n,r,"TestLoadImage: timeout",!1,t),zn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ti(2);e.H=0,e.h&&e.h.za(t),vs(e),os(e)}function vs(e){if(e.H=0,e.ma=[],e.h){const t=Do(e.i);0==t.length&&0==e.j.length||(er(e.ma,t),er(e.ma,e.j),e.i.i.length=0,Zn(e.j),e.j.length=0),e.h.ya()}}function ws(e,t,n){var r=n instanceof eo?to(n):new eo(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ro(r,r.m);else{var i=zn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new eo(null);r&&no(o,r),t&&(o.g=t),i&&ro(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&oo(r,n,t),oo(r,"VER",e.ra),us(e,r),r}function bs(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new qo(new Lo({ob:n})):new qo(e.va)).Oa(e.J),t}function _s(){}function Es(){if(cr&&!(10<=Number(br)))throw Error("Environmental error: no available transport.")}function Ts(e,t){Hr.call(this),this.g=new ns(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!rr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!rr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Is(this)}function xs(e){Ri.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ss(){Oi.call(this),this.status=1}function Is(e){this.g=e}function ks(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Cs(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function As(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(Fn=qo.prototype).Oa=function(e){this.M=e},Fn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ni.g(),this.C=this.u?Ai(this.u):Ai(Ni),this.g.onreadystatechange=Qn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void Ho(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=zn.FormData&&e instanceof zn.FormData,!(0<=Jn(Go,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Xo(this),0<this.B&&((this.L=function(e){return cr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qn(this.ua,this)):this.A=ui(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Ho(this,o)}},Fn.ua=function(){"undefined"!=typeof Bn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wr(this,"timeout"),this.abort(8))},Fn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Wr(this,"complete"),Wr(this,"abort"),Yo(this))},Fn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yo(this,!0)),qo.$.N.call(this)},Fn.La=function(){this.s||(this.G||this.v||this.l?Qo(this):this.kb())},Fn.kb=function(){Qo(this)},Fn.isActive=function(){return!!this.g},Fn.da=function(){try{return 2<$o(this)?this.g.status:-1}catch(Hb){return-1}},Fn.ja=function(){try{return this.g?this.g.responseText:""}catch(Hb){return""}},Fn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),zo(t)}},Fn.Ia=function(){return this.m},Fn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Fn=ns.prototype).ra=8,Fn.H=1,Fn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Mi(this,this.l,e);let o=this.s;if(this.U&&(o?(o=Cr(o),Dr(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ls(this,i,t),oo(n=to(this.I),"RID",e),oo(n,"CVER",22),this.F&&oo(n,"X-HTTP-Session-Id",this.F),us(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Zo(o)))+"&"+t:this.o&&es(n,this.o,o)),Co(this.i,i),this.bb&&oo(n,"TYPE","init"),this.P?(oo(n,"$req",t),oo(n,"SID","null"),i.aa=!0,zi(i,n,null)):zi(i,n,t),this.H=2}}else 3==this.H&&(e?as(this,e):0==this.j.length||So(this.i)||as(this))},Fn.Ma=function(){if(this.u=null,fs(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Si(Qn(this.jb,this),e)}},Fn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ti(10),is(this),fs(this))},Fn.ib=function(){null!=this.v&&(this.v=null,is(this),hs(this),Ti(19))},Fn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ti(2)):(this.l.info("Failed to ping google.com"),Ti(1))},Fn.isActive=function(){return!!this.h&&this.h.isActive(this)},(Fn=_s.prototype).Ba=function(){},Fn.Aa=function(){},Fn.za=function(){},Fn.ya=function(){},Fn.isActive=function(){return!0},Fn.Va=function(){},Es.prototype.g=function(e,t){return new Ts(e,t)},Xn(Ts,Hr),Ts.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ti(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ws(e,null,e.Y),ss(e)},Ts.prototype.close=function(){rs(this.g)},Ts.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Yr(e),e=n);t.j.push(new Eo(t.fb++,e)),3==t.H&&ss(t)},Ts.prototype.N=function(){this.g.h=null,delete this.j,rs(this.g),delete this.g,Ts.$.N.call(this)},Xn(xs,Ri),Xn(Ss,Oi),Xn(Is,_s),Is.prototype.Ba=function(){Wr(this.g,"a")},Is.prototype.Aa=function(e){Wr(this.g,new xs(e))},Is.prototype.za=function(e){Wr(this.g,new Ss)},Is.prototype.ya=function(){Wr(this.g,"b")},Xn(ks,(function(){this.blockSize=-1})),ks.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ks.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)Cs(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Cs(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Cs(this,r),i=0;break}}this.h=i,this.i+=t},ks.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ds={};function Ns(e){return-128<=e&&128>e?function(e,t){var n=Ds;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new As([0|e],0>e?-1:0)})):new As([0|e],0>e?-1:0)}function Ps(e){if(isNaN(e)||!isFinite(e))return Os;if(0>e)return Us(Ps(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Rs;return new As(t,0)}var Rs=4294967296,Os=Ns(0),Ls=Ns(1),Ms=Ns(16777216);function Fs(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Vs(e){return-1==e.h}function Us(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new As(n,~e.h).add(Ls)}function Bs(e,t){return e.add(Us(t))}function zs(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function qs(e,t){this.g=e,this.h=t}function js(e,t){if(Fs(t))throw Error("division by zero");if(Fs(e))return new qs(Os,Os);if(Vs(e))return t=js(Us(e),t),new qs(Us(t.g),Us(t.h));if(Vs(t))return t=js(e,Us(t)),new qs(Us(t.g),t.h);if(30<e.g.length){if(Vs(e)||Vs(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ls,r=t;0>=r.X(e);)n=Ks(n),r=Ks(r);var i=Gs(n,1),o=Gs(r,1);for(r=Gs(r,2),n=Gs(n,2);!Fs(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=Gs(r,1),n=Gs(n,1)}return t=Bs(e,i.R(t)),new qs(i,t)}for(i=Os;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Ps(n)).R(t);Vs(s)||0<s.X(e);)s=(o=Ps(n-=r)).R(t);Fs(o)&&(o=Ls),i=i.add(o),e=Bs(e,s)}return new qs(i,e)}function Ks(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new As(n,e.h)}function Gs(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new As(i,e.h)}(Fn=As.prototype).ea=function(){if(Vs(this))return-Us(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Rs+r)*t,t*=Rs}return e},Fn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Fs(this))return"0";if(Vs(this))return"-"+Us(this).toString(e);for(var t=Ps(Math.pow(e,6)),n=this,r="";;){var i=js(n,t).g,o=((0<(n=Bs(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Fs(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Fn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Fn.X=function(e){return Vs(e=Bs(this,e))?-1:Fs(e)?0:1},Fn.abs=function(){return Vs(this)?Us(this):this},Fn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new As(n,-2147483648&n[n.length-1]?-1:0)},Fn.R=function(e){if(Fs(this)||Fs(e))return Os;if(Vs(this))return Vs(e)?Us(this).R(Us(e)):Us(Us(this).R(e));if(Vs(e))return Us(this.R(Us(e)));if(0>this.X(Ms)&&0>e.X(Ms))return Ps(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=s*u,zs(n,2*r+2*i),n[2*r+2*i+1]+=o*u,zs(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,zs(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,zs(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new As(n,0)},Fn.gb=function(e){return js(this,e).h},Fn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new As(n,this.h&e.h)},Fn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new As(n,this.h|e.h)},Fn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new As(n,this.h^e.h)},Es.prototype.createWebChannel=Es.prototype.g,Ts.prototype.send=Ts.prototype.u,Ts.prototype.open=Ts.prototype.m,Ts.prototype.close=Ts.prototype.close,Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,ki.COMPLETE="complete",Di.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",Hr.prototype.listen=Hr.prototype.O,qo.prototype.listenOnce=qo.prototype.P,qo.prototype.getLastError=qo.prototype.Sa,qo.prototype.getLastErrorCode=qo.prototype.Ia,qo.prototype.getStatus=qo.prototype.da,qo.prototype.getResponseJson=qo.prototype.Wa,qo.prototype.getResponseText=qo.prototype.ja,qo.prototype.send=qo.prototype.ha,qo.prototype.setWithCredentials=qo.prototype.Oa,ks.prototype.digest=ks.prototype.l,ks.prototype.reset=ks.prototype.reset,ks.prototype.update=ks.prototype.j,As.prototype.add=As.prototype.add,As.prototype.multiply=As.prototype.R,As.prototype.modulo=As.prototype.gb,As.prototype.compare=As.prototype.X,As.prototype.toNumber=As.prototype.ea,As.prototype.toString=As.prototype.toString,As.prototype.getBits=As.prototype.D,As.fromNumber=Ps,As.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Us(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ps(Math.pow(n,8)),i=Os,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=Ps(Math.pow(n,s)),i=i.R(s).add(Ps(a))):i=(i=i.R(r)).add(Ps(a))}return i};var Hs=Un.createWebChannelTransport=function(){return new Es},Ws=Un.getStatEventTarget=function(){return wi()},Qs=Un.ErrorCode=Ii,Ys=Un.EventType=ki,Xs=Un.Event=yi,$s=Un.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Js=(Un.FetchXmlHttpFactory=Lo,Un.WebChannel=Di),Zs=Un.XhrIo=qo,ea=Un.Md5=ks,ta=Un.Integer=As;const na="@firebase/firestore";class ra{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ra.UNAUTHENTICATED=new ra(null),ra.GOOGLE_CREDENTIALS=new ra("google-credentials-uid"),ra.FIRST_PARTY=new ra("first-party-uid"),ra.MOCK_USER=new ra("mock-user");let ia="10.7.0";const oa=new B("@firebase/firestore");function sa(){return oa.logLevel}function aa(e){if(oa.logLevel<=L.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ca);oa.debug("Firestore (".concat(ia,"): ").concat(e),...i)}}function ua(e){if(oa.logLevel<=L.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ca);oa.error("Firestore (".concat(ia,"): ").concat(e),...i)}}function la(e){if(oa.logLevel<=L.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ca);oa.warn("Firestore (".concat(ia,"): ").concat(e),...i)}}function ca(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(ia,") INTERNAL ASSERTION FAILED: ")+e;throw ua(t),new Error(t)}function da(e,t){e||ha()}function fa(e,t){return e}const pa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ma extends b{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ga{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ya{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class va{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ra.UNAUTHENTICATED)))}shutdown(){}}class wa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ba{constructor(e){this.t=e,this.currentUser=ra.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ga;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ga,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{aa("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(aa("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ga)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(aa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(da("string"==typeof t.accessToken),new ya(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return da(null===e||"string"==typeof e),new ra(e)}}class _a{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ra.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ea{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new _a(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ra.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ta{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xa{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&aa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,aa("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{aa("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):aa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(da("string"==typeof e.token),this.R=e.token,new Ta(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Sa(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ia{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Sa(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function ka(e,t){return e<t?-1:e>t?1:0}function Ca(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Aa(e){return e+"\0"}class Da{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ma(pa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ma(pa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ma(pa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ma(pa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Da.fromMillis(Date.now())}static fromDate(e){return Da.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Da(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ka(this.nanoseconds,e.nanoseconds):ka(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Na{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Na(e)}static min(){return new Na(new Da(0,0))}static max(){return new Na(new Da(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pa{constructor(e,t,n){void 0===t?t=0:t>e.length&&ha(),void 0===n?n=e.length-t:n>e.length-t&&ha(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Pa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pa?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ra extends Pa{construct(e,t,n){return new Ra(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ma(pa.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Ra(e)}static emptyPath(){return new Ra([])}}const Oa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class La extends Pa{construct(e,t,n){return new La(e,t,n)}static isValidIdentifier(e){return Oa.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),La.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new La(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ma(pa.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ma(pa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ma(pa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new ma(pa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new La(t)}static emptyPath(){return new La([])}}class Ma{constructor(e){this.path=e}static fromPath(e){return new Ma(Ra.fromString(e))}static fromName(e){return new Ma(Ra.fromString(e).popFirst(5))}static empty(){return new Ma(Ra.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ra.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ra.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ma(new Ra(e.slice()))}}class Fa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Va(e){return e.fields.find((e=>2===e.kind))}function Ua(e){return e.fields.filter((e=>2!==e.kind))}Fa.UNKNOWN_ID=-1;class Ba{constructor(e,t){this.fieldPath=e,this.kind=t}}class za{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new za(0,Ka.min())}}function qa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Na.fromTimestamp(1e9===r?new Da(n+1,0):new Da(n,r));return new Ka(i,Ma.empty(),t)}function ja(e){return new Ka(e.readTime,e.key,-1)}class Ka{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ka(Na.min(),Ma.empty(),-1)}static max(){return new Ka(Na.max(),Ma.empty(),-1)}}function Ga(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ma.comparator(e.documentKey,t.documentKey),0!==n?n:ka(e.largestBatchId,t.largestBatchId))}const Ha="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Qa(e){if(e.code!==pa.FAILED_PRECONDITION||e.message!==Ha)throw e;aa("LocalStore","Unexpectedly lost primary lease")}class Ya{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ha(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ya(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ya?t:Ya.resolve(t)}catch(e){return Ya.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ya.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ya.reject(t)}static resolve(e){return new Ya(((t,n)=>{t(e)}))}static reject(e){return new Ya(((t,n)=>{n(e)}))}static waitFor(e){return new Ya(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Ya.resolve(!1);for(const n of e)t=t.next((e=>e?Ya.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ya(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const u=a;t(e[u]).next((e=>{o[u]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ya(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Xa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ga,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Za(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=iu(t.target.error);this.V.reject(new Za(e,n))}}static open(e,t,n,r){try{return new Xa(t,e.transaction(r,n))}catch(e){throw new Za(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(aa("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new tu(t)}}class $a{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===$a.S(y())&&ua("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return aa("SimpleDb","Removing database:",e),nu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!w())return!1;if($a.C())return!0;const e=y(),t=$a.S(e),n=0<t&&t<10,r=$a.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Photo-Galleria",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(aa("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Za(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ma(pa.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ma(pa.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Za(e,r))},r.onupgradeneeded=e=>{aa("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{aa("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=Xa.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Ya.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(aa("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ja{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return nu(this.k.delete())}}class Za extends ma{constructor(e,t){super(pa.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function eu(e){return"IndexedDbTransactionError"===e.name}class tu{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(aa("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(aa("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),nu(n)}add(e){return aa("SimpleDb","ADD",this.store.name,e,e),nu(this.store.add(e))}get(e){return nu(this.store.get(e)).next((t=>(void 0===t&&(t=null),aa("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return aa("SimpleDb","DELETE",this.store.name,e),nu(this.store.delete(e))}count(){return aa("SimpleDb","COUNT",this.store.name),nu(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Ya(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Ya(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){aa("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Ya(((n,r)=>{t.onerror=e=>{const t=iu(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Ya(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Ja(i),s=t(i.primaryKey,i.value,o);if(s instanceof Ya){const e=s.catch((e=>(o.done(),Ya.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>Ya.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function nu(e){return new Ya(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=iu(e.target.error);n(t)}}))}let ru=!1;function iu(e){const t=$a.S(y());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ma("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ru||(ru=!0,setTimeout((()=>{throw e}),0)),e}}return e}class ou{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){aa("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{aa("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){eu(e)?aa("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Qa(e)}await this.ee(6e4)}))}}class su{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Ya.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return aa("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(aa("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=ja(t);Ga(r,n)>0&&(n=r)})),new Ka(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class au{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function uu(e){return null==e}function lu(e){return 0===e&&1/e==-1/0}function cu(e){return"number"==typeof e&&Number.isInteger(e)&&!lu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function hu(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=fu(t)),t=du(e.get(n),t);return fu(t)}function du(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function fu(e){return e+"\x01\x01"}function pu(e){const t=e.length;if(da(t>=2),2===t)return da("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ra.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&ha(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:ha()}o=t+2}return new Ra(r)}au._e=-1;const mu=["userId","batchId"];function gu(e,t){return[e,hu(t)]}function yu(e,t,n){return[e,hu(t),n]}const vu={},wu=["prefixPath","collectionGroup","readTime","documentId"],bu=["prefixPath","collectionGroup","documentId"],_u=["collectionGroup","readTime","prefixPath","documentId"],Eu=["canonicalId","targetId"],Tu=["targetId","path"],xu=["path","targetId"],Su=["collectionId","parent"],Iu=["indexId","uid"],ku=["uid","sequenceNumber"],Cu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Au=["indexId","uid","orderedDocumentKey"],Du=["userId","collectionPath","documentId"],Nu=["userId","collectionPath","largestBatchId"],Pu=["userId","collectionGroup","largestBatchId"],Ru=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ou=[...Ru,"documentOverlays"],Lu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Mu=Lu,Fu=[...Mu,"indexConfiguration","indexState","indexEntries"];class Vu extends Wa{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Uu(e,t){const n=fa(e);return $a.M(n.ae,t)}function Bu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ju{constructor(e,t){this.comparator=e,this.root=t||Gu.EMPTY}insert(e,t){return new ju(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gu.BLACK,null,null))}remove(e){return new ju(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Gu.RED,this.left=null!=r?r:Gu.EMPTY,this.right=null!=i?i:Gu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Gu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Gu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Gu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ha();if(this.right.isRed())throw ha();const e=this.left.check();if(e!==this.right.check())throw ha();return e+(this.isRed()?0:1)}}Gu.EMPTY=null,Gu.RED=!0,Gu.BLACK=!1,Gu.EMPTY=new class{constructor(){this.size=0}get key(){throw ha()}get value(){throw ha()}get color(){throw ha()}get left(){throw ha()}get right(){throw ha()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Gu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hu{constructor(e){this.comparator=e,this.data=new ju(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wu(this.data.getIterator())}getIteratorFrom(e){return new Wu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Hu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Hu(this.comparator);return t.data=e,t}}class Wu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qu(e){return e.hasNext()?e.getNext():void 0}class Yu{constructor(e){this.fields=e,e.sort(La.comparator)}static empty(){return new Yu([])}unionWith(e){let t=new Hu(La.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Yu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Xu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $u{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Xu("Invalid base64 string: "+e):e}}(e);return new $u(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new $u(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ka(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$u.EMPTY_BYTE_STRING=new $u("");const Ju=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zu(e){if(da(!!e),"string"==typeof e){let t=0;const n=Ju.exec(e);if(da(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:el(e.seconds),nanos:el(e.nanos)}}function el(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function tl(e){return"string"==typeof e?$u.fromBase64String(e):$u.fromUint8Array(e)}function nl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rl(e){const t=e.mapValue.fields.__previous_value__;return nl(t)?rl(t):t}function il(e){const t=Zu(e.mapValue.fields.__local_write_time__.timestampValue);return new Da(t.seconds,t.nanos)}class ol{constructor(e,t,n,r,i,o,s,a,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=u}}class sl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new sl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}const al={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ul={nullValue:"NULL_VALUE"};function ll(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nl(e)?4:Tl(e)?9007199254740991:10:ha()}function cl(e,t){if(e===t)return!0;const n=ll(e);if(n!==ll(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return il(e).isEqual(il(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Zu(e.timestampValue),r=Zu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return tl(e.bytesValue).isEqual(tl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return el(e.geoPointValue.latitude)===el(t.geoPointValue.latitude)&&el(e.geoPointValue.longitude)===el(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return el(e.integerValue)===el(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=el(e.doubleValue),r=el(t.doubleValue);return n===r?lu(n)===lu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ca(e.arrayValue.values||[],t.arrayValue.values||[],cl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Bu(n)!==Bu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cl(n[i],r[i])))return!1;return!0}(e,t);default:return ha()}}function hl(e,t){return void 0!==(e.values||[]).find((e=>cl(e,t)))}function dl(e,t){if(e===t)return 0;const n=ll(e),r=ll(t);if(n!==r)return ka(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ka(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=el(e.integerValue||e.doubleValue),r=el(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fl(e.timestampValue,t.timestampValue);case 4:return fl(il(e),il(t));case 5:return ka(e.stringValue,t.stringValue);case 6:return function(e,t){const n=tl(e),r=tl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ka(n[i],r[i]);if(0!==e)return e}return ka(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ka(el(e.latitude),el(t.latitude));return 0!==n?n:ka(el(e.longitude),el(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=dl(n[i],r[i]);if(e)return e}return ka(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===al.mapValue&&t===al.mapValue)return 0;if(e===al.mapValue)return 1;if(t===al.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=ka(r[s],o[s]);if(0!==e)return e;const t=dl(n[r[s]],i[o[s]]);if(0!==t)return t}return ka(r.length,o.length)}(e.mapValue,t.mapValue);default:throw ha()}}function fl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ka(e,t);const n=Zu(e),r=Zu(t),i=ka(n.seconds,r.seconds);return 0!==i?i:ka(n.nanos,r.nanos)}function pl(e){return ml(e)}function ml(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Zu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return tl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ma.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ml(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ml(e.fields[i]));return n+"}"}(e.mapValue):ha()}function gl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function yl(e){return!!e&&"integerValue"in e}function vl(e){return!!e&&"arrayValue"in e}function wl(e){return!!e&&"nullValue"in e}function bl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _l(e){return!!e&&"mapValue"in e}function El(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return zu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=El(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=El(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Tl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function xl(e){return"nullValue"in e?ul:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?gl(sl.empty(),Ma.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ha()}function Sl(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?gl(sl.empty(),Ma.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?al:ha()}function Il(e,t){const n=dl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function kl(e,t){const n=dl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Cl{constructor(e){this.value=e}static empty(){return new Cl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!_l(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(t)}setAll(e){let t=La.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=El(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());_l(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];_l(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){zu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Cl(El(this.value))}}function Al(e){const t=[];return zu(e.fields,((e,n)=>{const r=new La([e]);if(_l(n)){const e=Al(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Yu(t)}class Dl{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Dl(e,0,Na.min(),Na.min(),Na.min(),Cl.empty(),0)}static newFoundDocument(e,t,n,r){return new Dl(e,1,t,Na.min(),n,r,0)}static newNoDocument(e,t){return new Dl(e,2,t,Na.min(),Na.min(),Cl.empty(),0)}static newUnknownDocument(e,t){return new Dl(e,3,t,Na.min(),Na.min(),Cl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Na.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Na.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Nl{constructor(e,t){this.position=e,this.inclusive=t}}function Pl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Ma.comparator(Ma.fromName(s.referenceValue),n.key):dl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Rl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cl(e.position[n],t.position[n]))return!1;return!0}class Ol{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ll(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ml{}class Fl extends Ml{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Wl(e,t,n):"array-contains"===t?new $l(e,n):"in"===t?new Jl(e,n):"not-in"===t?new Zl(e,n):"array-contains-any"===t?new ec(e,n):new Fl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ql(e,n):new Yl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(dl(t,this.value)):null!==t&&ll(this.value)===ll(t)&&this.matchesComparison(dl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ha()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vl extends Ml{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Vl(e,t)}matches(e){return Ul(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ul(e){return"and"===e.op}function Bl(e){return"or"===e.op}function zl(e){return ql(e)&&Ul(e)}function ql(e){for(const t of e.filters)if(t instanceof Vl)return!1;return!0}function jl(e){if(e instanceof Fl)return e.field.canonicalString()+e.op.toString()+pl(e.value);if(zl(e))return e.filters.map((e=>jl(e))).join(",");{const t=e.filters.map((e=>jl(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Kl(e,t){return e instanceof Fl?function(e,t){return t instanceof Fl&&e.op===t.op&&e.field.isEqual(t.field)&&cl(e.value,t.value)}(e,t):e instanceof Vl?function(e,t){return t instanceof Vl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Kl(n,t.filters[r])),!0)}(e,t):void ha()}function Gl(e,t){const n=e.filters.concat(t);return Vl.create(n,e.op)}function Hl(e){return e instanceof Fl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(pl(e.value))}(e):e instanceof Vl?function(e){return e.op.toString()+" {"+e.getFilters().map(Hl).join(" ,")+"}"}(e):"Filter"}class Wl extends Fl{constructor(e,t,n){super(e,t,n),this.key=Ma.fromName(n.referenceValue)}matches(e){const t=Ma.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ql extends Fl{constructor(e,t){super(e,"in",t),this.keys=Xl("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Yl extends Fl{constructor(e,t){super(e,"not-in",t),this.keys=Xl("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Xl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ma.fromName(e.referenceValue)))}class $l extends Fl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vl(t)&&hl(t.arrayValue,this.value)}}class Jl extends Fl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hl(this.value.arrayValue,t)}}class Zl extends Fl{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hl(this.value.arrayValue,t)}}class ec extends Fl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>hl(this.value.arrayValue,e)))}}class tc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function nc(e){return new tc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function rc(e){const t=fa(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>jl(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),uu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>pl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>pl(e))).join(",")),t.ce=e}return t.ce}function ic(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ll(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Kl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Rl(e.startAt,t.startAt)&&Rl(e.endAt,t.endAt)}function oc(e){return Ma.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function sc(e,t){return e.filters.filter((e=>e instanceof Fl&&e.field.isEqual(t)))}function ac(e,t,n){let r=ul,i=!0;for(const o of sc(e,t)){let e=ul,t=!0;switch(o.op){case"<":case"<=":e=xl(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=ul}Il({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Il({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function uc(e,t,n){let r=al,i=!0;for(const o of sc(e,t)){let e=al,t=!0;switch(o.op){case">=":case">":e=Sl(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=al}kl({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];kl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class lc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function cc(e,t,n,r,i,o,s,a){return new lc(e,t,n,r,i,o,s,a)}function hc(e){return new lc(e)}function dc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function fc(e){return null!==e.collectionGroup}function pc(e){const t=fa(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Hu(La.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Ol(r,n))})),e.has(La.keyField().canonicalString())||t.le.push(new Ol(La.keyField(),n))}return t.le}function mc(e){const t=fa(e);return t.he||(t.he=gc(t,pc(e))),t.he}function gc(e,t){if("F"===e.limitType)return nc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Ol(e.field,t)}));const n=e.endAt?new Nl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nl(e.startAt.position,e.startAt.inclusive):null;return nc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function yc(e,t){const n=e.filters.concat([t]);return new lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function vc(e,t,n){return new lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wc(e,t){return ic(mc(e),mc(t))&&e.limitType===t.limitType}function bc(e){return"".concat(rc(mc(e)),"|lt:").concat(e.limitType)}function _c(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Hl(e))).join(", "),"]")),uu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>pl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>pl(e))).join(",")),"Target(".concat(t,")")}(mc(e)),"; limitType=").concat(e.limitType,")")}function Ec(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ma.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of pc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Pl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,pc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Pl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,pc(e),t))}(e,t)}function Tc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xc(e){return(t,n)=>{let r=!1;for(const i of pc(e)){const e=Sc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Sc(e,t,n){const r=e.field.isKeyField()?Ma.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?dl(r,i):ha()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ha()}}class Ic{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){zu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return qu(this.inner)}size(){return this.innerSize}}const kc=new ju(Ma.comparator);function Cc(){return kc}const Ac=new ju(Ma.comparator);function Dc(){let e=Ac;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Nc(e){let t=Ac;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Pc(){return Oc()}function Rc(){return Oc()}function Oc(){return new Ic((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Lc=new ju(Ma.comparator),Mc=new Hu(Ma.comparator);function Fc(){let e=Mc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Vc=new Hu(ka);function Uc(){return Vc}function Bc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lu(t)?"-0":t}}function zc(e){return{integerValue:""+e}}function qc(e,t){return cu(t)?zc(t):Bc(e,t)}class jc{constructor(){this._=void 0}}function Kc(e,t,n){return e instanceof Wc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&nl(t)&&(t=rl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Qc?Yc(e,t):e instanceof Xc?$c(e,t):function(e,t){const n=Hc(e,t),r=Zc(n)+Zc(e.Ie);return yl(n)&&yl(e.Ie)?zc(r):Bc(e.serializer,r)}(e,t)}function Gc(e,t,n){return e instanceof Qc?Yc(e,t):e instanceof Xc?$c(e,t):n}function Hc(e,t){return e instanceof Jc?function(e){return yl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Wc extends jc{}class Qc extends jc{constructor(e){super(),this.elements=e}}function Yc(e,t){const n=eh(t);for(const r of e.elements)n.some((e=>cl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Xc extends jc{constructor(e){super(),this.elements=e}}function $c(e,t){let n=eh(t);for(const r of e.elements)n=n.filter((e=>!cl(e,r)));return{arrayValue:{values:n}}}class Jc extends jc{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Zc(e){return el(e.integerValue||e.doubleValue)}function eh(e){return vl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class th{constructor(e,t){this.field=e,this.transform=t}}class nh{constructor(e,t){this.version=e,this.transformResults=t}}class rh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rh}static exists(e){return new rh(void 0,e)}static updateTime(e){return new rh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ih(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class oh{}function sh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new gh(e.key,rh.none()):new hh(e.key,e.data,rh.none());{const n=e.data,r=Cl.empty();let i=new Hu(La.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new dh(e.key,r,new Yu(i.toArray()),rh.none())}}function ah(e,t,n){e instanceof hh?function(e,t,n){const r=e.value.clone(),i=ph(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof dh?function(e,t,n){if(!ih(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ph(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(fh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function uh(e,t,n,r){return e instanceof hh?function(e,t,n,r){if(!ih(e.precondition,t))return n;const i=e.value.clone(),o=mh(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof dh?function(e,t,n,r){if(!ih(e.precondition,t))return n;const i=mh(e.fieldTransforms,r,t),o=t.data;return o.setAll(fh(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ih(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function lh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Hc(r.transform,e||null);null!=i&&(null===n&&(n=Cl.empty()),n.set(r.field,i))}return n||null}function ch(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ca(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Qc&&t instanceof Qc||e instanceof Xc&&t instanceof Xc?Ca(e.elements,t.elements,cl):e instanceof Jc&&t instanceof Jc?cl(e.Ie,t.Ie):e instanceof Wc&&t instanceof Wc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hh extends oh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class dh extends oh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ph(e,t,n){const r=new Map;da(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Gc(s,a,n[i]))}return r}function mh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Kc(e,o,t))}return r}class gh extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yh extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ah(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=uh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=uh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Rc();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=sh(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Na.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fc())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,((e,t)=>ch(e,t)))&&Ca(this.baseMutations,e.baseMutations,((e,t)=>ch(e,t)))}}class wh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){da(e.mutations.length===n.length);let r=Lc;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new wh(e,t,n,r)}}class bh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class _h{constructor(e,t){this.count=e,this.unchangedNames=t}}var Eh,Th;function xh(e){switch(e){default:return ha();case pa.CANCELLED:case pa.UNKNOWN:case pa.DEADLINE_EXCEEDED:case pa.RESOURCE_EXHAUSTED:case pa.INTERNAL:case pa.UNAVAILABLE:case pa.UNAUTHENTICATED:return!1;case pa.INVALID_ARGUMENT:case pa.NOT_FOUND:case pa.ALREADY_EXISTS:case pa.PERMISSION_DENIED:case pa.FAILED_PRECONDITION:case pa.ABORTED:case pa.OUT_OF_RANGE:case pa.UNIMPLEMENTED:case pa.DATA_LOSS:return!0}}function Sh(e){if(void 0===e)return ua("GRPC error has no .code"),pa.UNKNOWN;switch(e){case Eh.OK:return pa.OK;case Eh.CANCELLED:return pa.CANCELLED;case Eh.UNKNOWN:return pa.UNKNOWN;case Eh.DEADLINE_EXCEEDED:return pa.DEADLINE_EXCEEDED;case Eh.RESOURCE_EXHAUSTED:return pa.RESOURCE_EXHAUSTED;case Eh.INTERNAL:return pa.INTERNAL;case Eh.UNAVAILABLE:return pa.UNAVAILABLE;case Eh.UNAUTHENTICATED:return pa.UNAUTHENTICATED;case Eh.INVALID_ARGUMENT:return pa.INVALID_ARGUMENT;case Eh.NOT_FOUND:return pa.NOT_FOUND;case Eh.ALREADY_EXISTS:return pa.ALREADY_EXISTS;case Eh.PERMISSION_DENIED:return pa.PERMISSION_DENIED;case Eh.FAILED_PRECONDITION:return pa.FAILED_PRECONDITION;case Eh.ABORTED:return pa.ABORTED;case Eh.OUT_OF_RANGE:return pa.OUT_OF_RANGE;case Eh.UNIMPLEMENTED:return pa.UNIMPLEMENTED;case Eh.DATA_LOSS:return pa.DATA_LOSS;default:return ha()}}(Th=Eh||(Eh={}))[Th.OK=0]="OK",Th[Th.CANCELLED=1]="CANCELLED",Th[Th.UNKNOWN=2]="UNKNOWN",Th[Th.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Th[Th.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Th[Th.NOT_FOUND=5]="NOT_FOUND",Th[Th.ALREADY_EXISTS=6]="ALREADY_EXISTS",Th[Th.PERMISSION_DENIED=7]="PERMISSION_DENIED",Th[Th.UNAUTHENTICATED=16]="UNAUTHENTICATED",Th[Th.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Th[Th.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Th[Th.ABORTED=10]="ABORTED",Th[Th.OUT_OF_RANGE=11]="OUT_OF_RANGE",Th[Th.UNIMPLEMENTED=12]="UNIMPLEMENTED",Th[Th.INTERNAL=13]="INTERNAL",Th[Th.UNAVAILABLE=14]="UNAVAILABLE",Th[Th.DATA_LOSS=15]="DATA_LOSS";let Ih=null;function kh(){return new TextEncoder}const Ch=new ta([4294967295,4294967295],0);function Ah(e){const t=kh().encode(e),n=new ea;return n.update(t),new Uint8Array(n.digest())}function Dh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ta([n,r],0),new ta([i,o],0)]}class Nh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ph("Invalid padding: ".concat(t));if(n<0)throw new Ph("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Ph("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Ph("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=ta.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(ta.fromNumber(n)));return 1===r.compare(Ch)&&(r=new ta([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Ah(e),[n,r]=Dh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Nh(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=Ah(e),[n,r]=Dh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ph extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Oh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Rh(Na.min(),r,new ju(ka),Cc(),Fc())}}class Oh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Oh(n,t,Fc(),Fc(),Fc())}}class Lh{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Mh{constructor(e,t){this.targetId=e,this.fe=t}}class Fh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$u.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Vh{constructor(){this.ge=0,this.pe=zh(),this.ye=$u.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Fc(),t=Fc(),n=Fc();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ha()}})),new Oh(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=zh()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,da(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Uh{constructor(e){this.Le=e,this.ke=new Map,this.qe=Cc(),this.Qe=Bh(),this.Ke=new ju(ka)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:ha()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(oc(i))if(0===n){const e=new Ma(i.path);this.We(t,e,Dl.newNoDocument(e,Na.min()))}else da(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Ih||Ih.tt(function(e,t,n,r,i){var o,s,a,u,l,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(u=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==u?u:0,padding:null!==(c=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=tl(n).toUint8Array()}catch(e){if(e instanceof Xu)return la("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Nh(o,r,i)}catch(e){return la(e instanceof Ph?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&oc(i.target)){const t=new Ma(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Dl.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Fc();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Rh(e,t,this.Ke,this.qe,n);return this.qe=Cc(),this.Qe=Bh(),this.Ke=new ju(ka),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Vh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Hu(ka),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||aa("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Vh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Bh(){return new ju(Ma.comparator)}function zh(){return new ju(Ma.comparator)}const qh={asc:"ASCENDING",desc:"DESCENDING"},jh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kh={and:"AND",or:"OR"};class Gh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hh(e,t){return e.useProto3Json||uu(t)?t:{value:t}}function Wh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Yh(e,t){return Wh(e,t.toTimestamp())}function Xh(e){return da(!!e),Na.fromTimestamp(function(e){const t=Zu(e);return new Da(t.seconds,t.nanos)}(e))}function $h(e,t){return function(e){return new Ra(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Jh(e){const t=Ra.fromString(e);return da(bd(t)),t}function Zh(e,t){return $h(e.databaseId,t.path)}function ed(e,t){const n=Jh(t);if(n.get(1)!==e.databaseId.projectId)throw new ma(pa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ma(pa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ma(id(n))}function td(e,t){return $h(e.databaseId,t)}function nd(e){const t=Jh(e);return 4===t.length?Ra.emptyPath():id(t)}function rd(e){return new Ra(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function id(e){return da(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function od(e,t,n){return{name:Zh(e,t),fields:n.value.mapValue.fields}}function sd(e,t,n){const r=ed(e,t.name),i=Xh(t.updateTime),o=t.createTime?Xh(t.createTime):Na.min(),s=new Cl({mapValue:{fields:t.fields}}),a=Dl.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ad(e,t){let n;if(t instanceof hh)n={update:od(e,t.key,t.value)};else if(t instanceof gh)n={delete:Zh(e,t.key)};else if(t instanceof dh)n={update:od(e,t.key,t.data),updateMask:wd(t.fieldMask)};else{if(!(t instanceof yh))return ha();n={verify:Zh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Wc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Xc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jc)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw ha()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Yh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ha()}(e,t.precondition)),n}function ud(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?rh.updateTime(Xh(e.updateTime)):void 0!==e.exists?rh.exists(e.exists):rh.none()}(t.currentDocument):rh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)da("REQUEST_TIME"===t.setToServerValue),n=new Wc;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Qc(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Xc(e)}else"increment"in t?n=new Jc(e,t.increment):ha();const r=La.fromServerFormat(t.fieldPath);return new th(r,n)}(e,t))):[];if(t.update){t.update.name;const i=ed(e,t.update.name),o=new Cl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Yu(t.map((e=>La.fromServerFormat(e))))}(t.updateMask);return new dh(i,o,e,n,r)}return new hh(i,o,n,r)}if(t.delete){const r=ed(e,t.delete);return new gh(r,n)}if(t.verify){const r=ed(e,t.verify);return new yh(r,n)}return ha()}function ld(e,t){return{documents:[td(e,t.path)]}}function cd(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=td(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=td(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return vd(Vl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:gd(e.field),direction:fd(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=Hh(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function hd(e){let t=nd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){da(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=dd(e);return t instanceof Vl&&zl(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Ol(yd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,uu(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){const t=!!e.before,n=e.values||[];return new Nl(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Nl(n,t)}(n.endAt)),cc(t,i,s,o,a,"F",u,l)}function dd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yd(e.unaryFilter.field);return Fl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=yd(e.unaryFilter.field);return Fl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=yd(e.unaryFilter.field);return Fl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=yd(e.unaryFilter.field);return Fl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ha()}}(e):void 0!==e.fieldFilter?function(e){return Fl.create(yd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ha()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Vl.create(e.compositeFilter.filters.map((e=>dd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ha()}}(e.compositeFilter.op))}(e):ha()}function fd(e){return qh[e]}function pd(e){return jh[e]}function md(e){return Kh[e]}function gd(e){return{fieldPath:e.canonicalString()}}function yd(e){return La.fromServerFormat(e.fieldPath)}function vd(e){return e instanceof Fl?function(e){if("=="===e.op){if(bl(e.value))return{unaryFilter:{field:gd(e.field),op:"IS_NAN"}};if(wl(e.value))return{unaryFilter:{field:gd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bl(e.value))return{unaryFilter:{field:gd(e.field),op:"IS_NOT_NAN"}};if(wl(e.value))return{unaryFilter:{field:gd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gd(e.field),op:pd(e.op),value:e.value}}}(e):e instanceof Vl?function(e){const t=e.getFilters().map((e=>vd(e)));return 1===t.length?t[0]:{compositeFilter:{op:md(e.op),filters:t}}}(e):ha()}function wd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function bd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class _d{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Na.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Na.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$u.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new _d(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _d(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ed{constructor(e){this.ut=e}}function Td(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Zh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Wh(e,t.version.toTimestamp()),createTime:Wh(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Sd(t.version)};else{if(!t.isUnknownDocument())return ha();r.unknownDocument={path:n.path.toArray(),version:Sd(t.version)}}return r}function xd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Sd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Id(e){const t=new Da(e.seconds,e.nanoseconds);return Na.fromTimestamp(t)}function kd(e,t){const n=(t.baseMutations||[]).map((t=>ud(e.ut,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>ud(e.ut,t))),i=Da.fromMillis(t.localWriteTimeMs);return new vh(t.batchId,i,n,r)}function Cd(e){const t=Id(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Id(e.lastLimboFreeSnapshotVersion):Na.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return da(1===e.documents.length),mc(hc(nd(e.documents[0])))}(e.query):function(e){return mc(hd(e))}(e.query),new _d(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,$u.fromBase64String(e.resumeToken))}function Ad(e,t){const n=Sd(t.snapshotVersion),r=Sd(t.lastLimboFreeSnapshotVersion);let i;i=oc(t.target)?ld(e.ut,t.target):cd(e.ut,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:rc(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Dd(e){const t=hd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vc(t,t.limit,"L"):t}function Nd(e,t){return new bh(t.largestBatchId,ud(e.ut,t.overlayMutation))}function Pd(e,t){const n=t.path.lastSegment();return[e,hu(t.path.popLast()),n]}function Rd(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Sd(r.readTime),documentKey:hu(r.documentKey.path),largestBatchId:r.largestBatchId}}class Od{getBundleMetadata(e,t){return Ld(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Id(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Ld(e).put(function(e){return{bundleId:e.id,createTime:Sd(Xh(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Md(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Dd(e.bundledQuery),readTime:Id(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Md(e).put(function(e){return{name:e.name,readTime:Sd(Xh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Ld(e){return Uu(e,"bundles")}function Md(e){return Uu(e,"namedQueries")}class Fd{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new Fd(e,n)}getOverlay(e,t){return Vd(e).get(Pd(this.userId,t)).next((e=>e?Nd(this.serializer,e):null))}getOverlays(e,t){const n=Pc();return Ya.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new bh(t,i);r.push(this.lt(e,o))})),Ya.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(hu(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Vd(e).H("collectionPathOverlayIndex",r))})),Ya.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Pc(),i=hu(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Vd(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=Nd(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Pc();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vd(e).Y({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=Nd(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return Vd(e).put(function(e,t,n){const[r,i,o]=Pd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ad(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function Vd(e){return Uu(e,"documentOverlays")}class Ud{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(el(e.integerValue));else if("doubleValue"in e){const n=el(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),lu(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(tl(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?Tl(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):ha()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Ma.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function Bd(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function zd(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Bd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ud.St=new Ud;class qd{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=zd(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=zd(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class jd{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Kd{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Gd{constructor(){this.Wt=new qd,this.Gt=new jd(this.Wt),this.zt=new Kd(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Hd{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Hd(this.indexId,this.documentKey,this.arrayValue,n)}}function Wd(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Qd(e.arrayValue,t.arrayValue),0!==n?n:(n=Qd(e.directionalValue,t.directionalValue),0!==n?n:Ma.comparator(e.documentKey,t.documentKey)))}function Qd(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Yd{constructor(e){this.Jt=new Hu(((e,t)=>La.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(da(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=Va(e);if(void 0!==t&&!this.tn(t))return!1;const n=Ua(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Yt.length||!this.rn(this.Yt[o++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new Hu(La.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Ba(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Ba(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Ba(n.field,"asc"===n.dir?0:1)));return new Fa(Fa.UNKNOWN_ID,this.collectionId,t,za.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Xd(e){var t,n;if(da(e instanceof Fl||e instanceof Vl),e instanceof Fl){if(e instanceof Jl){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Fl.create(e.field,"==",t))))||[];return Vl.create(r,"or")}return e}const r=e.filters.map((e=>Xd(e)));return Vl.create(r,e.op)}function $d(e){if(0===e.getFilters().length)return[];const t=tf(Xd(e));return da(ef(t)),Jd(t)||Zd(t)?[t]:t.getFilters()}function Jd(e){return e instanceof Fl}function Zd(e){return e instanceof Vl&&zl(e)}function ef(e){return Jd(e)||Zd(e)||function(e){if(e instanceof Vl&&Bl(e)){for(const t of e.getFilters())if(!Jd(t)&&!Zd(t))return!1;return!0}return!1}(e)}function tf(e){if(da(e instanceof Fl||e instanceof Vl),e instanceof Fl)return e;if(1===e.filters.length)return tf(e.filters[0]);const t=e.filters.map((e=>tf(e)));let n=Vl.create(t,e.op);return n=of(n),ef(n)?n:(da(n instanceof Vl),da(Ul(n)),da(n.filters.length>1),n.filters.reduce(((e,t)=>nf(e,t))))}function nf(e,t){let n;return da(e instanceof Fl||e instanceof Vl),da(t instanceof Fl||t instanceof Vl),n=e instanceof Fl?t instanceof Fl?function(e,t){return Vl.create([e,t],"and")}(e,t):rf(e,t):t instanceof Fl?rf(t,e):function(e,t){if(da(e.filters.length>0&&t.filters.length>0),Ul(e)&&Ul(t))return Gl(e,t.getFilters());const n=Bl(e)?e:t,r=Bl(e)?t:e,i=n.filters.map((e=>nf(e,r)));return Vl.create(i,"or")}(e,t),of(n)}function rf(e,t){if(Ul(t))return Gl(t,e.getFilters());{const n=t.filters.map((t=>nf(e,t)));return Vl.create(n,"or")}}function of(e){if(da(e instanceof Fl||e instanceof Vl),e instanceof Fl)return e;const t=e.getFilters();if(1===t.length)return of(t[0]);if(ql(e))return e;const n=t.map((e=>of(e))),r=[];return n.forEach((t=>{t instanceof Fl?r.push(t):t instanceof Vl&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Vl.create(r,e.op)}class sf{constructor(){this.on=new af}addToCollectionParentIndex(e,t){return this.on.add(t),Ya.resolve()}getCollectionParents(e,t){return Ya.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Ya.resolve()}deleteFieldIndex(e,t){return Ya.resolve()}deleteAllFieldIndexes(e){return Ya.resolve()}createTargetIndexes(e,t){return Ya.resolve()}getDocumentsMatchingTarget(e,t){return Ya.resolve(null)}getIndexType(e,t){return Ya.resolve(0)}getFieldIndexes(e,t){return Ya.resolve([])}getNextCollectionGroupToUpdate(e){return Ya.resolve(null)}getMinOffset(e,t){return Ya.resolve(Ka.min())}getMinOffsetFromCollectionGroup(e,t){return Ya.resolve(Ka.min())}updateCollectionGroup(e,t,n){return Ya.resolve()}updateIndexEntries(e,t){return Ya.resolve()}}class af{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hu(Ra.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Hu(Ra.comparator)).toArray()}}const uf=new Uint8Array(0);class lf{constructor(e,t){this.user=e,this.databaseId=t,this._n=new af,this.an=new Ic((e=>rc(e)),((e,t)=>ic(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:hu(r)};return cf(e).put(i)}return Ya.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Aa(t),""],!1,!0);return cf(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(pu(r.parent))}return n}))}addFieldIndex(e,t){const n=df(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=ff(e);return i.next((e=>{n.put(Rd(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=df(e),r=ff(e),i=hf(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=df(e),n=hf(e),r=ff(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Ya.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Yd(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=hf(e);let r=!0;const i=new Map;return Ya.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Fc();const r=[];return Ya.forEach(i,((i,o)=>{aa("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(rc(t)));const s=function(e,t){const n=Va(t);if(void 0===n)return null;for(const r of sc(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of Ua(t))for(const t of sc(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of Ua(t)){const t=0===i.kind?ac(e,i.fieldPath,e.startAt):uc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Nl(n,r)}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Ua(t)){const t=0===i.kind?uc(e,i.fieldPath,e.endAt):ac(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Nl(n,r)}(o,i),c=this.ln(i,o,u),h=this.ln(i,o,l),d=this.hn(i,o,a),f=this.Pn(i.indexId,s,c,u.inclusive,h,l.inclusive,d);return Ya.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Ma.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Ya.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:$d(Vl.create(e.filters,"and")).map((t=>nc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),u=a/(null!=t?t.length:1),l=[];for(let c=0;c<a;++c){const a=t?this.In(t[c/u]):uf,h=this.Tn(e,a,n[c%u],r),d=this.En(e,a,i[c%u],o),f=s.map((t=>this.Tn(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}Tn(e,t,n,r){const i=new Hd(e,Ma.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new Hd(e,Ma.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new Yd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return Ya.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Hu(La.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new Gd;for(const r of Ua(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);Ud.St.ht(e,i)}return n.Ut()}In(e){const t=new Gd;return Ud.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new Gd;return Ud.St.ht(gl(this.databaseId,t),n.jt(function(e){const t=Ua(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new Gd);let i=0;for(const o of Ua(e)){const e=n[i++];for(const n of r)if(this.Rn(t,o.fieldPath)&&vl(e))r=this.Vn(r,o,e);else{const t=n.jt(o.kind);Ud.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new Gd;n.seed(e.Ut()),Ud.St.ht(o,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof Fl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=df(e),r=ff(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Ya.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new za(t.sequenceNumber,new Ka(Id(t.readTime),new Ma(pu(t.documentKey)),t.largestBatchId)):za.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Ba(La.fromServerFormat(t),n)}));return new Fa(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ka(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=df(e),i=ff(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Ya.forEach(t,(t=>i.put(Rd(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Ya.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Ya.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Ya.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?Ya.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return hf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return hf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=hf(e);let i=new Hu(Wd);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new Hd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new Hu(Wd);const r=this.dn(t,e);if(null==r)return n;const i=Va(t);if(null!=i){const o=e.data.field(i.fieldPath);if(vl(o))for(const i of o.arrayValue.values||[])n=n.add(new Hd(t.indexId,e.key,this.In(i),r))}else n=n.add(new Hd(t.indexId,e.key,uf,r));return n}yn(e,t,n,r,i){aa("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=Qu(o),u=Qu(s);for(;a||u;){let e=!1,t=!1;if(a&&u){const r=n(a,u);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(u),u=Qu(s)):t?(i(a),a=Qu(o)):(a=Qu(o),u=Qu(s))}}(r,i,Wd,(r=>{o.push(this.wn(e,t,n,r))}),(r=>{o.push(this.Sn(e,t,n,r))})),Ya.waitFor(o)}fn(e){let t=1;return ff(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Wd(e,t))).filter(((e,t,n)=>!t||0!==Wd(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=Wd(o,e),i=Wd(o,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(o),r.push(o.Ht());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,uf,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,uf,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return Wd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pf)}getMinOffset(e,t){return Ya.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||ha())))).next(pf)}}function cf(e){return Uu(e,"collectionParents")}function hf(e){return Uu(e,"indexEntries")}function df(e){return Uu(e,"indexConfiguration")}function ff(e){return Uu(e,"indexState")}function pf(e){da(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Ga(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ka(t.readTime,t.documentKey,n)}const mf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new gf(e,gf.DEFAULT_COLLECTION_PERCENTILE,gf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},((e,t,n)=>(a++,n.delete())));o.push(u.next((()=>{da(1===a)})));const l=[];for(const c of n.mutations){const e=yu(t,c.key.path,n.batchId);o.push(i.delete(e)),l.push(c.key)}return Ya.waitFor(o).next((()=>l))}function vf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ha();t=e.noDocument}return JSON.stringify(t).length}gf.DEFAULT_COLLECTION_PERCENTILE=10,gf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gf.DEFAULT=new gf(41943040,gf.DEFAULT_COLLECTION_PERCENTILE,gf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gf.DISABLED=new gf(-1,0,0);class wf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){da(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new wf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _f(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Ef(e),o=_f(e);return o.add({}).next((s=>{da("number"==typeof s);const a=new vh(s,t,n,r),u=function(e,t,n){const r=n.baseMutations.map((t=>ad(e.ut,t))),i=n.mutations.map((t=>ad(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let c=new Hu(((e,t)=>ka(e.canonicalString(),t.canonicalString())));for(const e of r){const t=yu(this.userId,e.key.path,s);c=c.add(e.key.path.popLast()),l.push(o.put(u)),l.push(i.put(t,vu))}return c.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[s]=a.keys()})),Ya.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return _f(e).get(t).next((e=>e?(da(e.userId===this.userId),kd(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?Ya.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return _f(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(da(t.batchId>=n),i=kd(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return _f(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _f(e).W("userMutationsIndex",t).next((e=>e.map((e=>kd(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=gu(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Ef(e).Y({range:r},((n,r,o)=>{const[s,a,u]=n,l=pu(a);if(s===this.userId&&t.path.isEqual(l))return _f(e).get(u).next((e=>{if(!e)throw ha();da(e.userId===this.userId),i.push(kd(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hu(ka);const r=[];return t.forEach((t=>{const i=gu(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=Ef(e).Y({range:o},((e,r,i)=>{const[o,s,a]=e,u=pu(s);o===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()}));r.push(s)})),Ya.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=gu(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new Hu(ka);return Ef(e).Y({range:o},((e,t,i)=>{const[o,a,u]=e,l=pu(a);o===this.userId&&n.isPrefixOf(l)?l.length===r&&(s=s.add(u)):i.done()})).next((()=>this.vn(e,s)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(_f(e).get(t).next((e=>{if(null===e)throw ha();da(e.userId===this.userId),n.push(kd(this.serializer,e))})))})),Ya.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return yf(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),Ya.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Ya.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Ef(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=pu(e[1]);r.push(t)}else n.done()})).next((()=>{da(0===r.length)}))}))}containsKey(e,t){return bf(e,this.userId,t)}Mn(e){return Tf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function bf(e,t,n){const r=gu(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Ef(e).Y({range:o,J:!0},((e,n,r)=>{const[o,a,u]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function _f(e){return Uu(e,"mutations")}function Ef(e){return Uu(e,"documentMutations")}function Tf(e){return Uu(e,"mutationQueues")}class xf{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new xf(0)}static Nn(){return new xf(-1)}}class Sf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new xf(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Na.fromTimestamp(new Da(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>If(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(da(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return If(e).Y(((o,s)=>{const a=Cd(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Ya.waitFor(i))).next((()=>r))}forEachTarget(e,t){return If(e).Y(((e,n)=>{const r=Cd(n);t(r)}))}Bn(e){return kf(e).get("targetGlobalKey").next((e=>(da(null!==e),e)))}Ln(e,t){return kf(e).put("targetGlobalKey",t)}kn(e,t){return If(e).put(Ad(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=rc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return If(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=Cd(n);ic(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Cf(e);return t.forEach((t=>{const o=hu(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),Ya.waitFor(r)}removeMatchingKeys(e,t,n){const r=Cf(e);return Ya.forEach(t,(t=>{const i=hu(t.path);return Ya.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Cf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Cf(e);let i=Fc();return r.Y({range:n,J:!0},((e,t,n)=>{const r=pu(e[1]),o=new Ma(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=hu(t.path),r=IDBKeyRange.bound([n],[Aa(n)],!1,!0);let i=0;return Cf(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return If(e).get(t).next((e=>e?Cd(e):null))}}function If(e){return Uu(e,"targets")}function kf(e){return Uu(e,"targetGlobal")}function Cf(e){return Uu(e,"targetDocuments")}function Af(e,t){let[n,r]=e,[i,o]=t;const s=ka(n,i);return 0===s?ka(r,o):s}class Df{constructor(e){this.Qn=e,this.buffer=new Hu(Af),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Af(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Nf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){aa("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){eu(e)?aa("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Qa(e)}await this.Gn(3e5)}))}}class Pf{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ya.resolve(au._e);const n=new Df(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(aa("LruGarbageCollector","Garbage collection skipped; disabled"),Ya.resolve(mf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(aa("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),mf):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,o,s,a,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(aa("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(u=Date.now(),sa()<=L.DEBUG&&aa("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-a)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Ya.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Rf(e,t){return new Pf(e,t)}class Of{constructor(e,t){this.db=e,this.garbageCollector=Rf(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return Lf(e,n)}removeReference(e,t,n){return Lf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Lf(e,t)}Xn(e,t){return function(e,t){let n=!1;return Tf(e).Z((r=>bf(e,r,t).next((e=>(e&&(n=!0),Ya.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((o,s)=>{if(s<=t){const t=this.Xn(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Na.min()),Cf(e).delete(function(e){return[0,hu(e.path)]}(o)))))}));r.push(t)}})).next((()=>Ya.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Lf(e,t)}Zn(e,t){const n=Cf(e);let r,i=au._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:u}=n;0===o?(i!==au._e&&t(new Ma(pu(r)),i),i=u,r=a):i=au._e})).next((()=>{i!==au._e&&t(new Ma(pu(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(e,t){return Cf(e).put(function(e,t){return{targetId:0,path:hu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Mf{constructor(){this.changes=new Ic((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ya.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ff{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return zf(e).put(n)}removeEntry(e,t,n){return zf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],xd(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=Dl.newInvalidDocument(t);return zf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:Dl.newInvalidDocument(t)};return zf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},((e,r)=>{n={document:this.tr(t,r),size:vf(r)}})).next((()=>n))}getEntries(e,t){let n=Cc();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=Cc(),r=new ju(Ma.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,vf(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return Ya.resolve();let r=new Hu(Kf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(qf(r.first()),qf(r.last())),o=r.getIterator();let s=o.getNext();return zf(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ma.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&Kf(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.U(qf(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),xd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zf(e).W(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Cc();for(const i of e){const e=this.tr(Ma.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Ec(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Cc();const o=jf(t,n),s=jf(t,Ka.max());return zf(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.tr(Ma.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Uf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Bf(e).get("remoteDocumentGlobalKey").next((e=>(da(!!e),e)))}er(e,t){return Bf(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=sd(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ma.fromSegments(t.noDocument.path),r=Id(t.noDocument.readTime);n=Dl.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ha();{const e=Ma.fromSegments(t.unknownDocument.path),r=Id(t.unknownDocument.version);n=Dl.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Da(e[0],e[1]);return Na.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Na.min()))return e}return Dl.newInvalidDocument(e)}}function Vf(e){return new Ff(e)}class Uf extends Mf{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Ic((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Hu(((e,t)=>ka(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=Td(this._r.serializer,o);r=r.add(i.path.popLast());const u=vf(a);n+=u-s.size,t.push(this._r.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=Td(this._r.serializer,o.convertToNoDocument(Na.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),Ya.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Bf(e){return Uu(e,"remoteDocumentGlobal")}function zf(e){return Uu(e,"remoteDocumentsV14")}function qf(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function jf(e,t){const n=t.documentKey.path.toArray();return[e,xd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Kf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=ka(n[o],r[o]),i)return i;return i=ka(n.length,r.length),i||(i=ka(n[n.length-2],r[r.length-2]),i||ka(n[n.length-1],r[r.length-1]))}class Gf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Hf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&uh(n.mutation,e,Yu.empty(),Da.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Fc()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fc();const r=Pc();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Dc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Pc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Fc())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Cc();const o=Oc(),s=Oc();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof dh)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),uh(s.mutation,t,s.mutation.getFieldMask(),Da.now())):o.set(t.key,Yu.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new Gf(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Oc();let r=new ju(((e,t)=>e-t)),i=Fc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Yu.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Fc()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,u=r.value,l=Rc();u.forEach((e=>{if(!i.has(e)){const r=sh(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Ya.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ma.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ya.resolve(Pc());let s=-1,a=i;return o.next((t=>Ya.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Ya.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Fc()))).next((e=>({batchId:s,changes:Nc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ma(t)).next((e=>{let t=Dc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Dc();return this.indexManager.getCollectionParents(e,i).next((s=>Ya.forEach(s,(s=>{const a=function(e,t){return new lc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Dl.newInvalidDocument(r)))}));let n=Dc();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&uh(o.mutation,r,Yu.empty(),Da.now()),Ec(t,r)&&(n=n.insert(e,r))})),n}))}}class Wf{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Ya.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Xh(e.createTime)}}(t)),Ya.resolve()}getNamedQuery(e,t){return Ya.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Dd(e.bundledQuery),readTime:Xh(e.readTime)}}(t)),Ya.resolve()}}class Qf{constructor(){this.overlays=new ju(Ma.comparator),this.lr=new Map}getOverlay(e,t){return Ya.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Pc();return Ya.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Ya.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Ya.resolve()}getOverlaysForCollection(e,t,n){const r=Pc(),i=t.length+1,o=new Ma(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ya.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ju(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Pc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Pc(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Ya.resolve(s)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new bh(t,n));let i=this.lr.get(t);void 0===i&&(i=Fc(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class Yf{constructor(){this.hr=new Hu(Xf.Pr),this.Ir=new Hu(Xf.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new Xf(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new Xf(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new Ma(new Ra([])),n=new Xf(t,e),r=new Xf(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Ma(new Ra([])),n=new Xf(t,e),r=new Xf(t,e+1);let i=Fc();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Xf(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Xf{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Ma.comparator(e.key,t.key)||ka(e.gr,t.gr)}static Tr(e,t){return ka(e.gr,t.gr)||Ma.comparator(e.key,t.key)}}class $f{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Hu(Xf.Pr)}checkEmpty(e){return Ya.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new vh(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.yr=this.yr.add(new Xf(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Ya.resolve(o)}lookupMutationBatch(e,t){return Ya.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return Ya.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ya.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Ya.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Xf(t,0),r=new Xf(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),Ya.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hu(ka);return t.forEach((e=>{const t=new Xf(e,0),r=new Xf(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Ya.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ma.isDocumentKey(i)||(i=i.child(""));const o=new Xf(new Ma(i),0);let s=new Hu(ka);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.gr)),!0)}),o),Ya.resolve(this.br(s))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){da(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Ya.forEach(t.mutations,(r=>{const i=new Xf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new Xf(t,0),r=this.yr.firstAfterOrEqual(n);return Ya.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ya.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Jf{constructor(e){this.Cr=e,this.docs=new ju(Ma.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ya.resolve(n?n.document.mutableCopy():Dl.newInvalidDocument(t))}getEntries(e,t){let n=Cc();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Dl.newInvalidDocument(e))})),Ya.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Cc();const o=t.path,s=new Ma(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Ga(ja(s),n)<=0||(r.has(s.key)||Ec(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Ya.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ha()}vr(e,t){return Ya.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Zf(this)}getSize(e){return Ya.resolve(this.size)}}class Zf extends Mf{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Ya.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class ep{constructor(e){this.persistence=e,this.Fr=new Ic((e=>rc(e)),ic),this.lastRemoteSnapshotVersion=Na.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Yf,this.targetCount=0,this.Nr=xf.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Ya.resolve()}getLastRemoteSnapshotVersion(e){return Ya.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ya.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Ya.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Ya.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new xf(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Ya.resolve()}updateTargetData(e,t){return this.kn(t),Ya.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Ya.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Ya.waitFor(i).next((()=>r))}getTargetCount(e){return Ya.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Ya.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Ya.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ya.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Ya.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Ya.resolve(n)}containsKey(e,t){return Ya.resolve(this.Or.containsKey(t))}}class tp{constructor(e,t){this.Br={},this.overlays={},this.Lr=new au(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new ep(this),this.indexManager=new sf,this.remoteDocumentCache=function(e){return new Jf(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new Ed(t),this.Kr=new Wf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new $f(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){aa("MemoryPersistence","Starting transaction:",e);const r=new np(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Ya.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class np extends Wa{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Gr=new Yf,this.zr=null}static jr(e){return new rp(e)}get Hr(){if(this.zr)return this.zr;throw ha()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Ya.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Ya.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Ya.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ya.forEach(this.Hr,(n=>{const r=Ma.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Na.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Ya.or([()=>Ya.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class ip{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Xa("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mu,{unique:!0}),e.createObjectStore("documentMutations")}(e),op(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=Ya.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),op(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Na.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mu,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Ya.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Zr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(o=o.next((()=>this.ei(i)))),n<8&&r>=8&&(o=o.next((()=>this.ti(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ni(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Du});t.createIndex("collectionPathOverlayIndex",Nu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Pu,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:wu});t.createIndex("documentKeyIndex",bu),t.createIndex("collectionGroupIndex",_u)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.ii(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Iu}).createIndex("sequenceNumberIndex",ku,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Cu}).createIndex("documentKeyIndex",Au,{unique:!1})}(e)))),o}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=vf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Ya.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Ya.forEach(n,(n=>{da(n.userId===t.userId);const r=kd(this.serializer,n);return yf(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new Ra(n),s=function(e){return[0,hu(e)]}(o);r.push(t.get(s).next((n=>n?Ya.resolve():(n=>t.put({targetId:0,path:hu(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>Ya.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Su});const n=t.store("collectionParents"),r=new af,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:hu(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new Ra(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,o]=e;const s=pu(r);return i(s.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Cd(n),i=Ad(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new Ma(Ra.fromString(e.document.name).popFirst(5)):e.noDocument?Ma.fromSegments(e.noDocument.path):e.unknownDocument?Ma.fromSegments(e.unknownDocument.path):ha()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>Ya.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=Vf(this.serializer),i=new tp(rp.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Fc();kd(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Ya.forEach(n,((e,n)=>{const o=new ra(n),s=Fd.ct(this.serializer,o),a=i.getIndexManager(o),u=wf.ct(o,this.serializer,a,i.referenceDelegate);return new Hf(r,u,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Vu(t,au._e),e).next()}))}))}}function op(e){e.createObjectStore("targetDocuments",{keyPath:Tu}).createIndex("documentTargetsIndex",xu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Eu,{unique:!0}),e.createObjectStore("targetGlobal")}const sp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ap{constructor(e,t,n,r,i,o,s,a,u,l){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=o,this.document=s,this.oi=u,this._i=l,this.ai=c,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!ap.D())throw new ma(pa.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Of(this,r),this.Ii=t+"main",this.serializer=new Ed(a),this.Ti=new $a(this.Ii,this.ai,new ip(this.serializer)),this.qr=new Sf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vf(this.serializer),this.Kr=new Od,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===l&&ua("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ma(pa.FAILED_PRECONDITION,sp);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new au(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>lp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(eu(e))return aa("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return aa("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return up(e).get("owner").next((e=>Ya.resolve(this.wi(e))))}Si(e){return lp(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Uu(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Ya.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?Ya.resolve(!0):up(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new ma(pa.FAILED_PRECONDITION,sp);return!1}}return!(!this.networkEnabled||!this.inForeground)||lp(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&aa("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Vu(e,au._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>lp(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return wf.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lf(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Fd.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){aa("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Fu:14===e?Mu:13===e?Lu:12===e?Ou:11===e?Ru:void ha()}(this.ai);let o;return this.Ti.runTransaction(e,r,i,(r=>(o=new Vu(r,this.Lr?this.Lr.next():au._e),"readwrite-primary"===t?this.fi(o).next((e=>!!e||this.gi(o))).next((t=>{if(!t)throw ua("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new ma(pa.FAILED_PRECONDITION,Ha);return n(o)})).next((e=>this.yi(o).next((()=>e)))):this.Li(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Li(e){return up(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ma(pa.FAILED_PRECONDITION,sp)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return up(e).put("owner",t)}static D(){return $a.D()}pi(e){const t=up(e);return t.get("owner").next((e=>this.wi(e)?(aa("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ya.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ua("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;v()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return aa("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ua("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ua("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function up(e){return Uu(e,"owner")}function lp(e){return Uu(e,"clientMetadata")}function cp(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class hp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Fc(),r=Fc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new hp(e,t.fromCache,n,r)}}class dp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fp{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new dp;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(sa()<=L.DEBUG&&aa("QueryEngine","SDK will not create cache indexes for query:",_c(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Ya.resolve()):(sa()<=L.DEBUG&&aa("QueryEngine","Query:",_c(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(sa()<=L.DEBUG&&aa("QueryEngine","The SDK decides to create cache indexes for query:",_c(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mc(t))):Ya.resolve())}zi(e,t){if(dc(t))return Ya.resolve(null);let n=mc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=vc(t,null,"F"),n=mc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Fc(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Yi(t,r);return this.Zi(t,o,i,n.readTime)?this.zi(e,vc(t,null,"F")):this.Xi(e,o,t,n)}))))})))))}ji(e,t,n,r){return dc(t)||r.isEqual(Na.min())?Ya.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const o=this.Yi(t,i);return this.Zi(t,o,n,r)?Ya.resolve(null):(sa()<=L.DEBUG&&aa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_c(t)),this.Xi(e,o,t,qa(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Hu(xc(e));return t.forEach(((t,r)=>{Ec(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return sa()<=L.DEBUG&&aa("QueryEngine","Using full collection scan to execute query:",_c(t)),this.Gi.getDocumentsMatchingQuery(e,t,Ka.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class pp{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new ju(ka),this.ns=new Ic((e=>rc(e)),ic),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hf(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function mp(e,t,n,r){return new pp(e,t,n,r)}async function gp(e,t){const n=fa(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Fc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function yp(e){const t=fa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function vp(e,t,n){let r=Fc(),i=Fc();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Cc();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Na.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):aa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{us:r,cs:i}}))}function wp(e,t){const n=fa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function bp(e,t){const n=fa(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,Ya.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new _d(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function _p(e,t,n){const r=fa(e),i=r.ts.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!eu(e))throw e;aa("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function Ep(e,t,n){const r=fa(e);let i=Na.min(),o=Fc();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=fa(e),i=r.ns.get(n);return void 0!==i?Ya.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,mc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:Na.min(),n?o:Fc()))).next((e=>(Sp(r,Tc(t),e),{documents:e,ls:o})))))}function Tp(e,t){const n=fa(e),r=fa(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function xp(e,t){const n=fa(e),r=n.rs.get(t)||Na.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,qa(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Sp(n,t,e),e)))}function Sp(e,t,n){let r=e.rs.get(t)||Na.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function Ip(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fc();const r=await bp(e,mc(Dd(t.bundledQuery))),i=fa(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=Xh(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(e,t);const s=r.withResumeToken($u.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(s.targetId,s),i.qr.updateTargetData(e,s).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function kp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Cp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ap(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Dp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ma(r.error.code,r.error.message))),o?new Dp(e,t,r.state,i):(ua("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Np{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new ma(n.error.code,n.error.message))),i?new Np(e,n.state,r):(ua("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Uc();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=cu(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Pp(e,i):(ua("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Rp{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Rp(t.clientId,t.onlineState):(ua("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Op{constructor(){this.activeTargetIds=Uc()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lp{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new ju(ka),this.started=!1,this.ps=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=kp(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Op),this.Ss=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(kp(this.persistenceKey,n));if(e){const t=Pp.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Ap(this.persistenceKey,e));if(n){const r=Np.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ap(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return aa("SharedClientState","READ",e,t),t}setItem(e,t){aa("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){aa("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(aa("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void ua("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=au._e;if(null!=e)try{const n=JSON.parse(e);da("number"==typeof n),t=n}catch(e){ua("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==au._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new Dp(this.currentUser,e,t,n),i=Cp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=Cp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=Ap(this.persistenceKey,e),i=new Np(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return Pp.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Dp.Ts(new ra(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return Np.Ts(r,t)}Ms(e){return Rp.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);aa("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.Xs(o,s).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=Uc();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Mp{constructor(){this.eo=new Op,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Op,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fp{ro(e){}shutdown(){}}class Vp{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){aa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){aa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Up=null;function Bp(){return null===Up?Up=268435456+Math.round(2147483648*Math.random()):Up++,"0x"+Up.toString(16)}const zp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qp{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const jp="WebChannelConnection";class Kp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const o=Bp(),s=this.So(e,t);aa("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,s,a,n).then((t=>(aa("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw la("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}Co(e,t,n,r,i,o){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ia,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=zp[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=Bp();return new Promise(((o,s)=>{const a=new Zs;a.setWithCredentials(!0),a.listenOnce(Ys.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Qs.NO_ERROR:const t=a.getResponseJson();aa(jp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Qs.TIMEOUT:aa(jp,"RPC '".concat(e,"' ").concat(i," timed out")),s(new ma(pa.DEADLINE_EXCEEDED,"Request time out"));break;case Qs.HTTP_ERROR:const n=a.getStatus();if(aa(jp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(pa).indexOf(t)>=0?t:pa.UNKNOWN}(t.status);s(new ma(e,t.message))}else s(new ma(pa.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new ma(pa.UNAVAILABLE,"Connection failed."));break;default:ha()}}finally{aa(jp,"RPC '".concat(e,"' ").concat(i," completed."))}}));const u=JSON.stringify(r);aa(jp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",u,n,15)}))}vo(e,t,n){const r=Bp(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Hs(),s=Ws(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");aa(jp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const c=o.createWebChannel(l,a);let h=!1,d=!1;const f=new qp({co:t=>{d?aa(jp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(aa(jp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),aa(jp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},lo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Js.EventType.OPEN,(()=>{d||aa(jp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,Js.EventType.CLOSE,(()=>{d||(d=!0,aa(jp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(c,Js.EventType.ERROR,(t=>{d||(d=!0,la(jp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new ma(pa.UNAVAILABLE,"The operation could not be completed")))})),p(c,Js.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];da(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){aa(jp,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Eh[e];if(void 0!==t)return Sh(t)}(t),i=s.message;void 0===n&&(n=pa.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Ro(new ma(n,i)),c.close()}else aa(jp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(s,Xs.STAT_EVENT,(t=>{t.stat===$s.PROXY?aa(jp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===$s.NOPROXY&&aa(jp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function Gp(){return"undefined"!=typeof window?window:null}function Hp(){return"undefined"!=typeof document?document:null}function Wp(e){return new Gh(e,!0)}class Qp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&aa("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Yp{constructor(e,t,n,r,i,o,s,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Qp(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===pa.RESOURCE_EXHAUSTED?(ua(t.toString()),ua("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===pa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new ma(pa.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return aa("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(aa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Xp extends Yp{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ha()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(da(void 0===t||"string"==typeof t),$u.fromBase64String(t||"")):(da(void 0===t||t instanceof Uint8Array),$u.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?pa.UNKNOWN:Sh(e.code);return new ma(t,e.message||"")}(s);n=new Fh(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ed(e,r.document.name),o=Xh(r.document.updateTime),s=r.document.createTime?Xh(r.document.createTime):Na.min(),a=new Cl({mapValue:{fields:r.document.fields}}),u=Dl.newFoundDocument(i,o,s,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new Lh(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ed(e,r.document),o=r.readTime?Xh(r.readTime):Na.min(),s=Dl.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Lh([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ed(e,r.document),o=r.removedTargetIds||[];n=new Lh([],o,i,null)}else{if(!("filter"in t))return ha();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new _h(r,i),s=e.targetId;n=new Mh(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Na.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Na.min():t.readTime?Xh(t.readTime):Na.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=rd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=oc(r)?{documents:ld(e,r)}:{query:cd(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Qh(e,t.resumeToken);const r=Hh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Na.min())>0){n.readTime=Wh(e,t.snapshotVersion.toTimestamp());const r=Hh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ha()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=rd(this.serializer),t.removeTarget=e,this.e_(t)}}class $p extends Yp{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(da(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(da(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Xh(e.updateTime):Xh(t);return n.isEqual(Na.min())&&(n=Xh(t)),new nh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Xh(e.commitTime);return this.listener.I_(n,t)}return da(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=rd(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>ad(this.serializer,e)))};this.e_(t)}}class Jp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new ma(pa.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,o]=r;return this.connection.wo(e,t,n,i,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===pa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ma(pa.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Co(e,t,n,o,s,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===pa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ma(pa.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class Zp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(ua(t),this.f_=!1):aa("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class em{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{lm(this)&&(aa("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=fa(e);t.C_.add(4),await nm(t),t.M_.set("Unknown"),t.C_.delete(4),await tm(t)}(this))}))})),this.M_=new Zp(n,r)}}async function tm(e){if(lm(e))for(const t of e.v_)await t(!0)}async function nm(e){for(const t of e.v_)await t(!1)}function rm(e,t){const n=fa(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),um(n)?am(n):km(n).Ho()&&om(n,t))}function im(e,t){const n=fa(e),r=km(n);n.D_.delete(t),r.Ho()&&sm(n,t),0===n.D_.size&&(r.Ho()?r.Zo():lm(n)&&n.M_.set("Unknown"))}function om(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Na.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}km(e).u_(t)}function sm(e,t){e.x_.Oe(t),km(e).c_(t)}function am(e){e.x_=new Uh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),km(e).start(),e.M_.g_()}function um(e){return lm(e)&&!km(e).jo()&&e.D_.size>0}function lm(e){return 0===fa(e).C_.size}function cm(e){e.x_=void 0}async function hm(e){e.D_.forEach(((t,n)=>{om(e,t)}))}async function dm(e,t){cm(e),um(e)?(e.M_.w_(t),am(e)):e.M_.set("Unknown")}async function fm(e,t,n){if(e.M_.set("Online"),t instanceof Fh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){aa("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await pm(e,n)}else if(t instanceof Lh?e.x_.$e(t):t instanceof Mh?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(Na.min()))try{const t=await yp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken($u.EMPTY_BYTE_STRING,r.snapshotVersion)),sm(e,t);const i=new _d(r.target,t,n,r.sequenceNumber);om(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){aa("RemoteStore","Failed to raise snapshot:",t),await pm(e,t)}}async function pm(e,t,n){if(!eu(t))throw t;e.C_.add(1),await nm(e),e.M_.set("Offline"),n||(n=()=>yp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{aa("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await tm(e)}))}function mm(e,t){return t().catch((n=>pm(e,n,t)))}async function gm(e){const t=fa(e),n=Cm(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;ym(t);)try{const e=await wp(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,vm(t,e)}catch(e){await pm(t,e)}wm(t)&&bm(t)}function ym(e){return lm(e)&&e.b_.length<10}function vm(e,t){e.b_.push(t);const n=Cm(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function wm(e){return lm(e)&&!Cm(e).jo()&&e.b_.length>0}function bm(e){Cm(e).start()}async function _m(e){Cm(e).E_()}async function Em(e){const t=Cm(e);for(const n of e.b_)t.P_(n.mutations)}async function Tm(e,t,n){const r=e.b_.shift(),i=wh.from(r,t,n);await mm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await gm(e)}async function xm(e,t){t&&Cm(e).h_&&await async function(e,t){if(function(e){return xh(e)&&e!==pa.ABORTED}(t.code)){const n=e.b_.shift();Cm(e).Yo(),await mm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await gm(e)}}(e,t),wm(e)&&bm(e)}async function Sm(e,t){const n=fa(e);n.asyncQueue.verifyOperationInProgress(),aa("RemoteStore","RemoteStore received new credentials");const r=lm(n);n.C_.add(3),await nm(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await tm(n)}async function Im(e,t){const n=fa(e);t?(n.C_.delete(2),await tm(n)):t||(n.C_.add(2),await nm(n),n.M_.set("Unknown"))}function km(e){return e.O_||(e.O_=function(e,t,n){const r=fa(e);return r.A_(),new Xp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:hm.bind(null,e),Io:dm.bind(null,e),a_:fm.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),um(e)?am(e):e.M_.set("Unknown")):(await e.O_.stop(),cm(e))}))),e.O_}function Cm(e){return e.N_||(e.N_=function(e,t,n){const r=fa(e);return r.A_(),new $p(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:_m.bind(null,e),Io:xm.bind(null,e),T_:Em.bind(null,e),I_:Tm.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await gm(e)):(await e.N_.stop(),e.b_.length>0&&(aa("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class Am{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Am(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ma(pa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(e,t){if(ua("AsyncQueue","".concat(t,": ").concat(e)),eu(e))return new ma(pa.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Nm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ma.comparator(t.key,n.key):(e,t)=>Ma.comparator(e.key,t.key),this.keyedMap=Dc(),this.sortedSet=new ju(this.comparator)}static emptySet(e){return new Nm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Nm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Pm{constructor(){this.B_=new ju(Ma.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):ha():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Rm{constructor(e,t,n,r,i,o,s,a,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Rm(e,t,Nm.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Om{constructor(){this.k_=void 0,this.listeners=[]}}class Lm{constructor(){this.queries=new Ic((e=>bc(e)),wc),this.onlineState="Unknown",this.q_=new Set}}async function Mm(e,t){const n=fa(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Om),i)try{o.k_=await n.onListen(r)}catch(e){const n=Dm(e,"Initialization of query '".concat(_c(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Q_(n.onlineState),o.k_&&t.K_(o.k_)&&Bm(n)}async function Fm(e,t){const n=fa(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Vm(e,t){const n=fa(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&Bm(n)}function Um(e,t,n){const r=fa(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function Bm(e){e.q_.forEach((e=>{e.next()}))}class zm{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Rm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=Rm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class qm{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class jm{constructor(e){this.serializer=e}hs(e){return ed(this.serializer,e)}Ps(e){return e.metadata.exists?sd(this.serializer,e.document,!1):Dl.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Xh(e)}}class Km{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=Ra.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new jm(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Fc()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=fa(e);let o=Fc(),s=Cc();for(const l of n){const e=t.hs(l.metadata.name);l.document&&(o=o.add(e));const n=t.Ps(l);n.setReadTime(t.Is(l.metadata.readTime)),s=s.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=await bp(i,function(e){return mc(hc(Ra.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>vp(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,u.targetId).next((()=>i.qr.addMatchingKeys(e,o,u.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new jm(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await Ip(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function Gm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Hm{constructor(e){this.key=e}}class Wm{constructor(e){this.key=e}}class Qm{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Fc(),this.mutatedKeys=Fc(),this._a=xc(e),this.aa=new Nm(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new Pm,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),c=Ec(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;l&&c?l.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.ha(l,c)||(n.track({type:2,doc:c}),f=!0,(a&&this._a(c,a)>0||u&&this._a(c,u)<0)&&(s=!0)):!l&&c?(n.track({type:0,doc:c}),f=!0):l&&!c&&(n.track({type:1,doc:l}),f=!0,(a||u)&&(s=!0)),f&&(c?(o=o.add(c),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:o,la:n,Zi:s,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ha()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const s=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,u=a!==this.sa;return this.sa=a,0!==o.length||u?{snapshot:new Rm(this.query,e.aa,i,o,e.mutatedKeys,0===a,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:s}:{Ta:s}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new Pm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Fc(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new Wm(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new Hm(n))})),t}da(e){this.ia=e.ls,this.oa=Fc();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Rm.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Ym{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Xm{constructor(e){this.key=e,this.Ra=!1}}class $m{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Ic((e=>bc(e)),wc),this.fa=new Map,this.ga=new Set,this.pa=new ju(Ma.comparator),this.ya=new Map,this.wa=new Yf,this.Sa={},this.ba=new Map,this.Da=xf.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function Jm(e,t){const n=xg(e);let r,i;const o=n.ma.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const e=await bp(n.localStore,mc(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Zm(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&rm(n.remoteStore,e)}return i}async function Zm(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await Ep(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return cg(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const o=await Ep(e.localStore,t,!0),s=new Qm(t,o.ls),a=s.ca(o.documents),u=Oh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=s.applyChanges(a,e.isPrimaryClient,u);cg(e,n,l.Ta);const c=new Ym(t,n,s);return e.ma.set(t,c),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),l.snapshot}async function eg(e,t){const n=fa(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!wc(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await _p(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),im(n.remoteStore,r.targetId),ug(n,r.targetId)})).catch(Qa)):(ug(n,r.targetId),await _p(n.localStore,r.targetId,!0))}async function tg(e,t){const n=fa(e);try{const e=await function(e,t){const n=fa(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const s=[];t.targetChanges.forEach(((o,a)=>{const u=i.get(a);if(!u)return;s.push(n.qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,o.addedDocuments,a))));let l=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken($u.EMPTY_BYTE_STRING,Na.min()).withLastLimboFreeSnapshotVersion(Na.min()):o.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(o.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,l,o)&&s.push(n.qr.updateTargetData(e,l))}));let a=Cc(),u=Fc();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(vp(e,o,t.documentUpdates).next((e=>{a=e.us,u=e.cs}))),!r.isEqual(Na.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Ya.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,u))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(da(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?da(r.Ra):e.removedDocuments.size>0&&(da(r.Ra),r.Ra=!1))})),await fg(n,e,t)}catch(e){await Qa(e)}}function ng(e,t,n){const r=fa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=fa(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&Bm(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rg(e,t,n){const r=fa(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),o=i&&i.key;if(o){let e=new ju(Ma.comparator);e=e.insert(o,Dl.newNoDocument(o,Na.min()));const n=Fc().add(o),i=new Rh(Na.min(),new Map,new ju(ka),e,n);await tg(r,i),r.pa=r.pa.remove(o),r.ya.delete(t),dg(r)}else await _p(r.localStore,t,!1).then((()=>ug(r,t,n))).catch(Qa)}async function ig(e,t){const n=fa(e),r=t.batch.batchId;try{const e=await function(e,t){const n=fa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Ya.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);da(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Fc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);ag(n,r,null),sg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fg(n,e)}catch(e){await Qa(e)}}async function og(e,t,n){const r=fa(e);try{const e=await function(e,t){const n=fa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(da(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ag(r,t,n),sg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await fg(r,e)}catch(n){await Qa(n)}}function sg(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function ag(e,t,n){const r=fa(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function ug(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||lg(e,t)}))}function lg(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(im(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),dg(e))}function cg(e,t,n){for(const r of n)r instanceof Hm?(e.wa.addReference(r.key,t),hg(e,r)):r instanceof Wm?(aa("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||lg(e,r.key)):ha()}function hg(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(aa("SyncEngine","New document in limbo: "+n),e.ga.add(r),dg(e))}function dg(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Ma(Ra.fromString(t)),r=e.Da.next();e.ya.set(r,new Xm(n)),e.pa=e.pa.insert(n,r),rm(e.remoteStore,new _d(mc(hc(n.path)),r,"TargetPurposeLimboResolution",au._e))}}async function fg(e,t,n){const r=fa(e),i=[],o=[],s=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{s.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=hp.Qi(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Va.a_(i),await async function(e,t){const n=fa(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ya.forEach(t,(t=>Ya.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ya.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!eu(e))throw e;aa("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,o))}async function pg(e,t){const n=fa(e);if(!n.currentUser.isEqual(t)){aa("SyncEngine","User change. New user:",t.toKey());const e=await gp(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new ma(pa.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fg(n,e._s)}}function mg(e,t){const n=fa(e),r=n.ya.get(t);if(r&&r.Ra)return Fc().add(r.key);{let e=Fc();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function gg(e,t){const n=fa(e),r=await Ep(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&cg(n,t.targetId,i.Ta),i}async function yg(e,t){const n=fa(e);return xp(n.localStore,t).then((e=>fg(n,e)))}async function vg(e,t,n,r){const i=fa(e),o=await function(e,t){const n=fa(e),r=fa(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Ya.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await gm(i.remoteStore):"acknowledged"===n||"rejected"===n?(ag(i,t,r||null),sg(i,t),function(e,t){fa(fa(e).mutationQueue).Fn(t)}(i.localStore,t)):ha(),await fg(i,o)):aa("SyncEngine","Cannot apply mutation batch with id: "+t)}async function wg(e,t,n){const r=fa(e),i=[],o=[];for(const s of t){let e;const t=r.fa.get(s);if(t&&0!==t.length){e=await bp(r.localStore,mc(t[0]));for(const e of t){const t=r.ma.get(e),n=await gg(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await Tp(r.localStore,s);e=await bp(r.localStore,t),await Zm(r,bg(t),s,!1,e.resumeToken)}i.push(e)}return r.Va.a_(o),i}function bg(e){return cc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function _g(e){return function(e){return fa(fa(e).persistence).Bi()}(fa(e).localStore)}async function Eg(e,t,n,r){const i=fa(e);if(i.Ca)return void aa("SyncEngine","Ignoring unexpected query state notification.");const o=i.fa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await xp(i.localStore,Tc(o[0])),r=Rh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,$u.EMPTY_BYTE_STRING);await fg(i,e,r);break}case"rejected":await _p(i.localStore,t,!0),ug(i,t,r);break;default:ha()}}async function Tg(e,t,n){const r=xg(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){aa("SyncEngine","Adding an already active target "+e);continue}const t=await Tp(r.localStore,e),n=await bp(r.localStore,t);await Zm(r,bg(t),n.targetId,!1,n.resumeToken),rm(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await _p(r.localStore,e,!1).then((()=>{im(r.remoteStore,e),ug(r,e)})).catch(Qa)}}function xg(e){const t=fa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=tg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rg.bind(null,t),t.Va.a_=Vm.bind(null,t.eventManager),t.Va.Fa=Um.bind(null,t.eventManager),t}function Sg(e){const t=fa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ig.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=og.bind(null,t),t}class Ig{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Wp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return mp(this.persistence,new fp,e.initialUser,this.serializer)}createPersistence(e){return new tp(rp.jr,this.serializer)}createSharedClientState(e){return new Mp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class kg extends Ig{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await Sg(this.xa.syncEngine),await gm(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return mp(this.persistence,new fp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Nf(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new su(t,this.persistence);return new ou(e.asyncQueue,n)}createPersistence(e){const t=cp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gf.withCacheSize(this.cacheSizeBytes):gf.DEFAULT;return new ap(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Gp(),Hp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Mp}}class Cg extends kg{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof Lp&&(this.sharedClientState.syncEngine={Ys:vg.bind(null,t),Zs:Eg.bind(null,t),Xs:Tg.bind(null,t),Bi:_g.bind(null,t),Js:yg.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=fa(e);if(xg(n),Sg(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await wg(n,e.toArray());n.Ca=!0,await Im(n.remoteStore,!0);for(const r of t)rm(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(ug(n,i),_p(n.localStore,i,!0)))),im(n.remoteStore,i)})),await t,await wg(n,e),function(e){const t=fa(e);t.ya.forEach(((e,n)=>{im(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new ju(Ma.comparator)}(n),n.Ca=!1,await Im(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Gp();if(!Lp.D(t))throw new ma(pa.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=cp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Ag{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ng(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pg.bind(null,this.syncEngine),await Im(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Lm}createDatastore(e){const t=Wp(e.databaseInfo.databaseId),n=function(e){return new Kp(e)}(e.databaseInfo);return function(e,t,n,r){return new Jp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new em(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>ng(this.syncEngine,e,0)),Vp.D()?new Vp:new Fp)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new $m(e,t,n,r,i,o);return s&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=fa(e);aa("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await nm(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function Dg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Ng{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ua("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Pg{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new ga,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new qm(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Rg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ma(pa.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=fa(e),r=rd(n.serializer)+"/documents",i={documents:t.map((e=>Zh(n.serializer,e)))},o=await n.Co("BatchGetDocuments",r,i,t.length),s=new Map;o.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){da(!!t.found),t.found.name,t.found.updateTime;const n=ed(e,t.found.name),r=Xh(t.found.updateTime),i=t.found.createTime?Xh(t.found.createTime):Na.min(),o=new Cl({mapValue:{fields:t.found.fields}});return Dl.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){da(!!t.missing),da(!!t.readTime);const n=ed(e,t.missing),r=Xh(t.readTime);return Dl.newNoDocument(n,r)}(e,t):ha()}(n.serializer,e);s.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=s.get(e.toString());da(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ma.fromPath(t);this.mutations.push(new yh(n,this.precondition(n)))})),await async function(e,t){const n=fa(e),r=rd(n.serializer)+"/documents",i={writes:t.map((e=>ad(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ha();t=Na.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ma(pa.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Na.min())?rh.exists(!1):rh.updateTime(t):rh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Na.min()))throw new ma(pa.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rh.updateTime(t)}return rh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Og{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new Qp(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new Rg(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!uu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!xh(t)}return!1}}class Lg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ra.UNAUTHENTICATED,this.clientId=Ia.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{aa("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(aa("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ma(pa.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Dm(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Mg(e,t){e.asyncQueue.verifyOperationInProgress(),aa("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await gp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Fg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ug(e);aa("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Sm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Sm(t.remoteStore,n))),e._onlineComponents=t}function Vg(e){return"FirebaseError"===e.name?e.code===pa.FAILED_PRECONDITION||e.code===pa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Ug(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){aa("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Vg(n))throw n;la("Error using user provided cache. Falling back to memory cache: "+n),await Mg(e,new Ig)}}else aa("FirestoreClient","Using default OfflineComponentProvider"),await Mg(e,new Ig);return e._offlineComponents}async function Bg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(aa("FirestoreClient","Using user provided OnlineComponentProvider"),await Fg(e,e._uninitializedComponentsProvider._online)):(aa("FirestoreClient","Using default OnlineComponentProvider"),await Fg(e,new Ag))),e._onlineComponents}function zg(e){return Ug(e).then((e=>e.persistence))}function qg(e){return Ug(e).then((e=>e.localStore))}function jg(e){return Bg(e).then((e=>e.remoteStore))}function Kg(e){return Bg(e).then((e=>e.syncEngine))}function Gg(e){return Bg(e).then((e=>e.datastore))}async function Hg(e){const t=await Bg(e),n=t.eventManager;return n.onListen=Jm.bind(null,t.syncEngine),n.onUnlisten=eg.bind(null,t.syncEngine),n}function Wg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ga;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Ng({next:o=>{t.enqueueAndForget((()=>Fm(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new ma(pa.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ma(pa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new zm(hc(n.path),o,{includeMetadataChanges:!0,J_:!0});return Mm(e,s)}(await Hg(e),e.asyncQueue,t,n,r))),r.promise}function Qg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ga;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Ng({next:n=>{t.enqueueAndForget((()=>Fm(e,s))),n.fromCache&&"server"===r.source?i.reject(new ma(pa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new zm(n,o,{includeMetadataChanges:!0,J_:!0});return Mm(e,s)}(await Hg(e),e.asyncQueue,t,n,r))),r.promise}function Yg(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?kh().encode(e):e,function(e,t){return new Pg(e,t)}(function(e,t){if(e instanceof Uint8Array)return Dg(e,t);if(e instanceof ArrayBuffer)return Dg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Wp(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=fa(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=fa(e),r=Xh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Gm(r));const i=new Km(r,e.localStore,t.serializer);let o=await t.Ma();for(;o;){const e=await i.ea(o);e&&n._updateProgress(e),o=await t.Ma()}const s=await i.complete();return await fg(e,s.ra,void 0),await function(e,t){const n=fa(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.na)}catch(e){return la("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Kg(e),i,r)}))}function Xg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const $g=new Map;function Jg(e,t,n){if(!n)throw new ma(pa.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Zg(e,t,n,r){if(!0===t&&!0===r)throw new ma(pa.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ey(e){if(!Ma.isDocumentKey(e))throw new ma(pa.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ty(e){if(Ma.isDocumentKey(e))throw new ma(pa.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ny(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ha()}function ry(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ma(pa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ny(e);throw new ma(pa.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function iy(e,t){if(t<=0)throw new ma(pa.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class oy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ma(pa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ma(pa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ma(pa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ma(pa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ma(pa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ma(pa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ma(pa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new va;switch(e.type){case"firstParty":return new Ea(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ma(pa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$g.get(e);t&&(aa("ComponentProvider","Removing Datastore"),$g.delete(e),t.terminate())}(this),Promise.resolve()}}function ay(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=ry(e,sy))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ra.MOCK_USER;else{t=g(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new ma(pa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ra(o)}e._authCredentials=new wa(new ya(t,n))}}class uy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new uy(this.firestore,e,this._query)}}class ly{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ly(this.firestore,e,this._key)}}class cy extends uy{constructor(e,t,n){super(e,t,hc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ly(this.firestore,null,new Ma(e))}withConverter(e){return new cy(this.firestore,e,this._path)}}function hy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=A(e),Jg("collection","path",t),e instanceof sy){const n=Ra.fromString(t,...r);return ty(n),new cy(e,null,n)}{if(!(e instanceof ly||e instanceof cy))throw new ma(pa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ra.fromString(t,...r));return ty(n),new cy(e.firestore,null,n)}}function dy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=A(e),1===arguments.length&&(t=Ia.newId()),Jg("doc","path",t),e instanceof sy){const n=Ra.fromString(t,...r);return ey(n),new ly(e,null,new Ma(n))}{if(!(e instanceof ly||e instanceof cy))throw new ma(pa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ra.fromString(t,...r));return ey(n),new ly(e.firestore,e instanceof cy?e.converter:null,new Ma(n))}}function fy(e,t){return e=A(e),t=A(t),(e instanceof ly||e instanceof cy)&&(t instanceof ly||t instanceof cy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function py(e,t){return e=A(e),t=A(t),e instanceof uy&&t instanceof uy&&e.firestore===t.firestore&&wc(e._query,t._query)&&e.converter===t.converter}class my{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Qp(this,"async_queue_retry"),this.iu=()=>{const e=Hp();e&&aa("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=Hp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Hp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new ga;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!eu(e))throw e;aa("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ua("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=Am.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&ha()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function gy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class yy{constructor(){this._progressObserver={},this._taskCompletionResolver=new ga,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vy extends sy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new my,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||by(this),this._firestoreClient.terminate()}}function wy(e){return e._firestoreClient||by(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function by(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new ol(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Xg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Lg(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function _y(e,t,n){const r=new ga;return e.asyncQueue.enqueue((async()=>{try{await Mg(e,n),await Fg(e,t),r.resolve()}catch(e){const n=e;if(!Vg(n))throw n;la("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Ey(e){return function(e){const t=new ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=fa(e);lm(n.remoteStore)||aa("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=fa(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=Dm(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Kg(e),t))),t.promise}(wy(e=ry(e,vy)))}function Ty(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await zg(e),n=await jg(e);return t.setNetworkEnabled(!0),function(e){const t=fa(e);return t.C_.delete(0),tm(t)}(n)}))}(wy(e=ry(e,vy)))}function xy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await zg(e),n=await jg(e);return t.setNetworkEnabled(!1),async function(e){const t=fa(e);t.C_.add(0),await nm(t),t.M_.set("Offline")}(n)}))}(wy(e=ry(e,vy)))}function Sy(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=fa(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await qg(e),t)))}(wy(e=ry(e,vy)),t).then((t=>t?new uy(e,null,t.query):null))}function Iy(e){if(e._initialized||e._terminated)throw new ma(pa.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ky{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ky($u.fromBase64String(e))}catch(e){throw new ma(pa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ky($u.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cy{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ma(pa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new La(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ay{constructor(e){this._methodName=e}}class Dy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ma(pa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ma(pa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ka(this._lat,e._lat)||ka(this._long,e._long)}}const Ny=/^__.*__$/;class Py{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new dh(e,this.data,this.fieldMask,t,this.fieldTransforms):new hh(e,this.data,t,this.fieldTransforms)}}class Ry{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new dh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Oy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ha()}}class Ly{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Ly(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return tv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Oy(this.Iu)&&Ny.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class My{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Wp(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ly({Iu:e,methodName:t,gu:n,path:La.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fy(e){const t=e._freezeSettings(),n=Wp(e._databaseId);return new My(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vy(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.pu(o.merge||o.mergeFields?2:0,t,n,i);$y("Data must be an object, but it was:",s,r);const a=Yy(r,s);let u,l;if(o.merge)u=new Yu(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Jy(t,r,n);if(!s.contains(i))throw new ma(pa.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));nv(e,i)||e.push(i)}u=new Yu(e),l=s.fieldTransforms.filter((e=>u.covers(e.field)))}else u=null,l=s.fieldTransforms;return new Py(new Cl(a),u,l)}class Uy extends Ay{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uy}}function By(e,t,n){return new Ly({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class zy extends Ay{_toFieldTransform(e){return new th(e.path,new Wc)}isEqual(e){return e instanceof zy}}class qy extends Ay{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=By(this,e,!0),n=this.yu.map((e=>Qy(e,t))),r=new Qc(n);return new th(e.path,r)}isEqual(e){return this===e}}class jy extends Ay{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=By(this,e,!0),n=this.yu.map((e=>Qy(e,t))),r=new Xc(n);return new th(e.path,r)}isEqual(e){return this===e}}class Ky extends Ay{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Jc(e.serializer,qc(e.serializer,this.wu));return new th(e.path,t)}isEqual(e){return this===e}}function Gy(e,t,n,r){const i=e.pu(1,t,n);$y("Data must be an object, but it was:",i,r);const o=[],s=Cl.empty();zu(r,((e,r)=>{const a=ev(t,e,n);r=A(r);const u=i.Ru(a);if(r instanceof Uy)o.push(a);else{const e=Qy(r,u);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Yu(o);return new Ry(s,a,i.fieldTransforms)}function Hy(e,t,n,r,i,o){const s=e.pu(1,t,n),a=[Jy(t,r,n)],u=[i];if(o.length%2!=0)throw new ma(pa.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(Jy(t,o[d])),u.push(o[d+1]);const l=[],c=Cl.empty();for(let d=a.length-1;d>=0;--d)if(!nv(l,a[d])){const e=a[d];let t=u[d];t=A(t);const n=s.Ru(e);if(t instanceof Uy)l.push(e);else{const r=Qy(t,n);null!=r&&(l.push(e),c.set(e,r))}}const h=new Yu(l);return new Ry(c,h,s.fieldTransforms)}function Wy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Qy(n,e.pu(r?4:3,t))}function Qy(e,t){if(Xy(e=A(e)))return $y("Unsupported field value:",t,e),Yy(e,t);if(e instanceof Ay)return function(e,t){if(!Oy(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Qy(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=A(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Da.fromDate(e);return{timestampValue:Wh(t.serializer,n)}}if(e instanceof Da){const n=new Da(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Wh(t.serializer,n)}}if(e instanceof Dy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ky)return{bytesValue:Qh(t.serializer,e._byteString)};if(e instanceof ly){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:$h(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(ny(e)))}(e,t)}function Yy(e,t){const n={};return qu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zu(e,((e,r)=>{const i=Qy(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Xy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Da||e instanceof Dy||e instanceof ky||e instanceof ly||e instanceof Ay)}function $y(e,t,n){if(!Xy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ny(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function Jy(e,t,n){if((t=A(t))instanceof Cy)return t._internalPath;if("string"==typeof t)return ev(e,t);throw tv("Field path arguments must be of type string or ",e,!1,void 0,n)}const Zy=new RegExp("[~\\*/\\[\\]]");function ev(e,t,n){if(t.search(Zy)>=0)throw tv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Cy(...t.split("."))._internalPath}catch(Xn){throw tv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function tv(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=" in field ".concat(r)),s&&(u+=" in document ".concat(i)),u+=")"),new ma(pa.INVALID_ARGUMENT,a+e+u)}function nv(e,t){return e.some((e=>e.isEqual(t)))}class rv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ly(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ov("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iv extends rv{data(){return super.data()}}function ov(e,t){return"string"==typeof t?ev(e,t):t instanceof Cy?t._internalPath:t._delegate._internalPath}function sv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ma(pa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class av{}class uv extends av{}function lv(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof av&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof hv)).length,n=e.filter((e=>e instanceof cv)).length;if(t>1||t>0&&n>0)throw new ma(pa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class cv extends uv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new cv(e,t,n)}_apply(e){const t=this._parse(e);return wv(e._query,t),new uy(e.firestore,e.converter,yc(e._query,t))}_parse(e){const t=Fy(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ma(pa.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){vv(s,o);const t=[];for(const n of s)t.push(yv(r,e,n));a={arrayValue:{values:t}}}else a=yv(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||vv(s,o),a=Wy(n,t,s,"in"===o||"not-in"===o);return Fl.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class hv extends av{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Vl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)wv(n,i),n=yc(n,i)}(e._query,t),new uy(e.firestore,e.converter,yc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dv extends uv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ma(pa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ma(pa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ol(t,n)}(e._query,this._field,this._direction);return new uy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new lc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class fv extends uv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new fv(e,t,n)}_apply(e){return new uy(e.firestore,e.converter,vc(e._query,this._limit,this._limitType))}}class pv extends uv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new pv(e,t,n)}_apply(e){const t=gv(e,this.type,this._docOrFields,this._inclusive);return new uy(e.firestore,e.converter,function(e,t){return new lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class mv extends uv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new mv(e,t,n)}_apply(e){const t=gv(e,this.type,this._docOrFields,this._inclusive);return new uy(e.firestore,e.converter,function(e,t){return new lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function gv(e,t,n,r){if(n[0]=A(n[0]),n[0]instanceof rv)return function(e,t,n,r,i){if(!r)throw new ma(pa.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of pc(e))if(s.field.isKeyField())o.push(gl(t,r.key));else{const e=r.data.field(s.field);if(nl(e))throw new ma(pa.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new ma(pa.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new Nl(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Fy(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new ma(pa.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let u=0;u<i.length;u++){const o=i[u];if(s[u].field.isKeyField()){if("string"!=typeof o)throw new ma(pa.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!fc(e)&&-1!==o.indexOf("/"))throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(Ra.fromString(o));if(!Ma.isDocumentKey(n))throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Ma(n);a.push(gl(t,i))}else{const e=Wy(n,r,o);a.push(e)}}return new Nl(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function yv(e,t,n){if("string"==typeof(n=A(n))){if(""===n)throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fc(t)&&-1!==n.indexOf("/"))throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ra.fromString(n));if(!Ma.isDocumentKey(r))throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return gl(e,new Ma(r))}if(n instanceof ly)return gl(e,n._key);throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ny(n),"."))}function vv(e,t){if(!Array.isArray(e)||0===e.length)throw new ma(pa.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function wv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ma(pa.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ma(pa.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class bv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return el(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ha()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return zu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Dy(el(e.latitude),el(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=rl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const t=Zu(e);return new Da(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ra.fromString(e);da(bd(n));const r=new sl(n.get(1),n.get(3)),i=new Ma(n.popFirst(5));return r.isEqual(t)||ua("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function _v(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ev extends bv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ky(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ly(this.firestore,null,t)}}class Tv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xv extends rv{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Sv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ov("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Sv extends xv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Iv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Tv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Sv(this._firestore,this._userDataWriter,n.key,n,new Tv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ma(pa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Sv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Tv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Sv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:kv(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function kv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ha()}}function Cv(e,t){return e instanceof xv&&t instanceof xv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Iv&&t instanceof Iv&&e._firestore===t._firestore&&py(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Av extends bv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ky(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ly(this.firestore,null,t)}}function Dv(e){e=ry(e,ly);const t=ry(e.firestore,vy),n=wy(t),r=new Av(t);return function(e,t){const n=new ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=fa(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new ma(pa.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Dm(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await qg(e),t,n))),n.promise}(n,e._key).then((n=>new xv(t,r,e._key,n,new Tv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Nv(e){e=ry(e,uy);const t=ry(e.firestore,vy),n=wy(t),r=new Av(t);return function(e,t){const n=new ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Ep(e,t,!0),i=new Qm(t,r.ls),o=i.ca(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=Dm(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await qg(e),t,n))),n.promise}(n,e._query).then((n=>new Iv(t,r,e,n)))}function Pv(e,t,n){e=ry(e,ly);const r=ry(e.firestore,vy),i=_v(e.converter,t,n);return Mv(r,[Vy(Fy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,rh.none())])}function Rv(e,t,n){e=ry(e,ly);const r=ry(e.firestore,vy),i=Fy(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),u=3;u<s;u++)a[u-3]=arguments[u];return o="string"==typeof(t=A(t))||t instanceof Cy?Hy(i,"updateDoc",e._key,t,n,a):Gy(i,"updateDoc",e._key,t),Mv(r,[o.toMutation(e._key,rh.exists(!0))])}function Ov(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=A(e);let a={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||gy(n[u])||(a=n[u],u++);const l={includeMetadataChanges:a.includeMetadataChanges};if(gy(n[u])){const e=n[u];n[u]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[u+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[u+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let c,h,d;if(e instanceof ly)h=ry(e.firestore,vy),d=hc(e._key.path),c={next:t=>{n[u]&&n[u](Fv(h,e,t))},error:n[u+1],complete:n[u+2]};else{const t=ry(e,uy);h=ry(t.firestore,vy),d=t._query;const r=new Av(h);c={next:e=>{n[u]&&n[u](new Iv(h,r,t,e))},error:n[u+1],complete:n[u+2]},sv(e._query)}return function(e,t,n,r){const i=new Ng(r),o=new zm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Mm(await Hg(e),o))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>Fm(await Hg(e),o)))}}(wy(h),d,l,c)}function Lv(e,t){return function(e,t){const n=new Ng(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){fa(e).q_.add(t),t.next()}(await Hg(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){fa(e).q_.delete(t)}(await Hg(e),n)))}}(wy(e=ry(e,vy)),gy(t)?t:{next:t})}function Mv(e,t){return function(e,t){const n=new ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Sg(e);try{const e=await function(e,t){const n=fa(e),r=Da.now(),i=t.reduce(((e,t)=>e.add(t.key)),Fc());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Cc(),u=Fc();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(u=u.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=lh(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new dh(e.key,t,Al(t.value.mapValue),rh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,u);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:Nc(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new ju(ka)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await fg(r,e.changes),await gm(r.remoteStore)}catch(e){const t=Dm(e,"Failed to persist write");n.reject(t)}}(await Kg(e),t,n))),n.promise}(wy(e),t)}function Fv(e,t,n){const r=n.docs.get(t._key),i=new Av(e);return new xv(e,i,t._key,r,new Tv(n.hasPendingWrites,n.fromCache),t.converter)}const Vv={maxAttempts:5};class Uv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fy(e)}set(e,t,n){this._verifyNotCommitted();const r=Bv(e,this._firestore),i=_v(r.converter,t,n),o=Vy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,rh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Bv(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=A(t))||t instanceof Cy?Hy(this._dataReader,"WriteBatch.update",r._key,t,n,s):Gy(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,rh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bv(e,this._firestore);return this._mutations=this._mutations.concat(new gh(t._key,rh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ma(pa.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bv(e,t){if((e=A(e)).firestore!==t)throw new ma(pa.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class zv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fy(e)}get(e){const t=Bv(e,this._firestore),n=new Ev(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return ha();const r=e[0];if(r.isFoundDocument())return new rv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new rv(this._firestore,n,t._key,null,t.converter);throw ha()}))}set(e,t,n){const r=Bv(e,this._firestore),i=_v(r.converter,t,n),o=Vy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=Bv(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=A(t))||t instanceof Cy?Hy(this._dataReader,"Transaction.update",r._key,t,n,s):Gy(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Bv(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bv(e,this._firestore),n=new Av(this._firestore);return super.get(e).then((e=>new xv(this._firestore,n,t._key,e._document,new Tv(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ia=e}(be),pe(new D("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new vy(new ba(e.getProvider("auth-internal")),new xa(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ma(pa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Se(na,"4.4.0",e),Se(na,"4.4.0","esm2017")}();function qv(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ma("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function jv(){if("undefined"===typeof Uint8Array)throw new ma("unimplemented","Uint8Arrays are not available in this environment.")}function Kv(){if("undefined"==typeof atob)throw new ma("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Gv{constructor(e){this._delegate=e}static fromBase64String(e){return Kv(),new Gv(ky.fromBase64String(e))}static fromUint8Array(e){return jv(),new Gv(ky.fromUint8Array(e))}toBase64(){return Kv(),this._delegate.toBase64()}toUint8Array(){return jv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Hv(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Wv{enableIndexedDbPersistence(e,t){return function(e,t){Iy(e=ry(e,vy));const n=wy(e);if(n._uninitializedComponentsProvider)throw new ma(pa.FAILED_PRECONDITION,"SDK cache is already specified.");la("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Ag;return _y(n,i,new kg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Iy(e=ry(e,vy));const t=wy(e);if(t._uninitializedComponentsProvider)throw new ma(pa.FAILED_PRECONDITION,"SDK cache is already specified.");la("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Ag;return _y(t,r,new Cg(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new ma(pa.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ga;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!$a.D())return Promise.resolve();const t=e+"main";await $a.delete(t)}(cp(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Qv{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof sl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||la("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ay(this._delegate,e,t,n)}enableNetwork(){return Ty(this._delegate)}disableNetwork(){return xy(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Zg("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ey(this._delegate)}onSnapshotsInSync(e){return Lv(this._delegate,e)}get app(){if(!this._appCompat)throw new ma("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uw(this,hy(this._delegate,e))}catch(t){throw ew(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zv(this,dy(this._delegate,e))}catch(t){throw ew(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ow(this,function(e,t){if(e=ry(e,sy),Jg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ma(pa.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new uy(e,null,function(e){return new lc(Ra.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw ew(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=ry(e,vy);const r=Object.assign(Object.assign({},Vv),n);return function(e){if(e.maxAttempts<1)throw new ma(pa.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new ga;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Gg(e);new Og(e.asyncQueue,i,n,t,r).run()})),r.promise}(wy(e),(n=>t(new zv(e,n))),r)}(this._delegate,(t=>e(new Xv(this,t))))}batch(){return wy(this._delegate),new $v(new Uv(this._delegate,(e=>Mv(this._delegate,e))))}loadBundle(e){return function(e,t){const n=wy(e=ry(e,vy)),r=new yy;return Yg(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Sy(this._delegate,e).then((e=>e?new ow(this,e):null))}}class Yv extends bv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gv(new ky(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Zv.forKey(t,this.firestore,null)}}class Xv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Yv(e)}get(e){const t=lw(e);return this._delegate.get(t).then((e=>new rw(this._firestore,new xv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=lw(e);return n?(qv("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=lw(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=lw(e);return this._delegate.delete(t),this}}class $v{constructor(e){this._delegate=e}set(e,t,n){const r=lw(e);return n?(qv("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=lw(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=lw(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Sv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new iw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Jv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Jv(e,new Yv(e),t),r.set(t,i)),i}}Jv.INSTANCES=new WeakMap;class Zv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yv(e)}static forPath(e,t,n){if(e.length%2!==0)throw new ma("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Zv(t,new ly(t._delegate,n,new Ma(e)))}static forKey(e,t,n){return new Zv(t,new ly(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new uw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uw(this.firestore,hy(this._delegate,e))}catch(t){throw ew(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=A(e))instanceof ly&&fy(this._delegate,e)}set(e,t){t=qv("DocumentReference.set",t);try{return t?Pv(this._delegate,e,t):Pv(this._delegate,e)}catch(n){throw ew(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Rv(this._delegate,e):Rv(this._delegate,e,t,...r)}catch(o){throw ew(o,"updateDoc()","DocumentReference.update()")}}delete(){return Mv(ry((e=this._delegate).firestore,vy),[new gh(e._key,rh.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=tw(t),i=nw(t,(e=>new rw(this.firestore,new xv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Ov(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Dv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ry(e,ly);const t=ry(e.firestore,vy);return Wg(wy(t),e._key,{source:"server"}).then((n=>Fv(t,e,n)))}(this._delegate):function(e){e=ry(e,ly);const t=ry(e.firestore,vy);return Wg(wy(t),e._key).then((n=>Fv(t,e,n)))}(this._delegate),t.then((e=>new rw(this.firestore,new xv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Zv(this.firestore,e?this._delegate.withConverter(Jv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ew(e,t,n){return e.message=e.message.replace(t,n),e}function tw(e){for(const t of e)if("object"===typeof t&&!Hv(t))return t;return{}}function nw(e,t){var n,r;let i;return i=Hv(e[0])?e[0]:Hv(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class rw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Cv(this._delegate,e._delegate)}}class iw extends rw{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||ha(),t}}class ow{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yv(e)}where(e,t,n){try{return new ow(this.firestore,lv(this._delegate,function(e,t,n){const r=t,i=ov("where",e);return cv._create(i,r,n)}(e,t,n)))}catch(r){throw ew(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ow(this.firestore,lv(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ov("orderBy",e);return dv._create(n,t)}(e,t)))}catch(n){throw ew(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ow(this.firestore,lv(this._delegate,(iy("limit",t=e),fv._create("limit",t,"F"))))}catch(t){throw ew(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new ow(this.firestore,lv(this._delegate,(iy("limitToLast",t=e),fv._create("limitToLast",t,"L"))))}catch(t){throw ew(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new ow(this.firestore,lv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pv._create("startAt",t,!0)}(...arguments)))}catch(e){throw ew(e,"startAt()","Query.startAt()")}}startAfter(){try{return new ow(this.firestore,lv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pv._create("startAfter",t,!1)}(...arguments)))}catch(e){throw ew(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new ow(this.firestore,lv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mv._create("endBefore",t,!1)}(...arguments)))}catch(e){throw ew(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new ow(this.firestore,lv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mv._create("endAt",t,!0)}(...arguments)))}catch(e){throw ew(e,"endAt()","Query.endAt()")}}isEqual(e){return py(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Nv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ry(e,uy);const t=ry(e.firestore,vy),n=wy(t),r=new Av(t);return Qg(n,e._query,{source:"server"}).then((n=>new Iv(t,r,e,n)))}(this._delegate):function(e){e=ry(e,uy);const t=ry(e.firestore,vy),n=wy(t),r=new Av(t);return sv(e._query),Qg(n,e._query).then((n=>new Iv(t,r,e,n)))}(this._delegate),t.then((e=>new aw(this.firestore,new Iv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=tw(t),i=nw(t,(e=>new aw(this.firestore,new Iv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Ov(this._delegate,r,i)}withConverter(e){return new ow(this.firestore,e?this._delegate.withConverter(Jv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class sw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new iw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ow(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new iw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new sw(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new iw(this._firestore,n))}))}isEqual(e){return Cv(this._delegate,e._delegate)}}class uw extends ow{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zv(this.firestore,e):null}doc(e){try{return new Zv(this.firestore,void 0===e?dy(this._delegate):dy(this._delegate,e))}catch(t){throw ew(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=ry(e.firestore,vy),r=dy(e),i=_v(e.converter,t);return Mv(n,[Vy(Fy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,rh.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Zv(this.firestore,e)))}isEqual(e){return fy(this._delegate,e._delegate)}withConverter(e){return new uw(this.firestore,e?this._delegate.withConverter(Jv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function lw(e){return ry(e,ly)}class cw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Cy(...t)}static documentId(){return new cw(La.keyField().canonicalString())}isEqual(e){return(e=A(e))instanceof Cy&&this._delegate._internalPath.isEqual(e._internalPath)}}class hw{constructor(e){this._delegate=e}static serverTimestamp(){const e=new zy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new hw(e)}static delete(){const e=new Uy("deleteField");return e._methodName="FieldValue.delete",new hw(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qy("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new hw(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jy("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new hw(e)}static increment(e){const t=new Ky("increment",e);return t._methodName="FieldValue.increment",new hw(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const dw={Firestore:Qv,GeoPoint:Dy,Timestamp:Da,Blob:Gv,Transaction:Xv,WriteBatch:$v,DocumentReference:Zv,DocumentSnapshot:rw,Query:ow,QueryDocumentSnapshot:iw,QuerySnapshot:aw,CollectionReference:uw,FieldPath:cw,FieldValue:hw,setLogLevel:function(e){var t;t=e,oa.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var fw;(function(e,t){e.INTERNAL.registerComponent(new D("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},dw)))})(fw=Ke,((e,t)=>new Qv(e,t,new Wv))),fw.registerVersion("@firebase/firestore-compat","0.3.23");Ke.initializeApp({apiKey:"AIzaSyDonHYF4ZQ8eVeB8b9XcmHv8tGt_OMLPHg",authDomain:"firegram-galleria.firebaseapp.com",projectId:"firegram-galleria",storageBucket:"firegram-galleria.appspot.com",messagingSenderId:"1025039459706",appId:"1:1025039459706:web:0b8d5ce05bd52ff83a22c3"});const pw=Ke.storage(),mw=Ke.firestore(),gw=Ke.firestore.FieldValue.serverTimestamp,yw=e=>{const[t,n]=(0,r.useState)(0),[i,o]=(0,r.useState)(null),[s,a]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const t=pw.ref(e.name),r=mw.collection("images");t.put(e).on("state_changed",(e=>{let t=e.bytesTransferred/e.totalBytes*100;n(t)}),(e=>{o(e)}),(async()=>{const e=await t.getDownloadURL(),n=gw();await r.add({url:e,createdAt:n}),a(e)}))}),[e]),{progress:t,url:s,error:i}};var vw=function(e,t){return vw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},vw(e,t)};function ww(e,t){function n(){this.constructor=e}vw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var bw=function(){return bw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},bw.apply(this,arguments)};function _w(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Ew(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Tw=function(){};var xw,Sw=0,Iw="undefined"!==typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),n=Math.max(0,16.7-(t-Sw));Sw=t+n,setTimeout((function(){return e(Sw)}),n)};!function(e){e.Read="read",e.Update="update",e.Render="render",e.PostRender="postRender",e.FixedUpdate="fixedUpdate"}(xw||(xw={}));var kw=1/60*1e3,Cw=!0,Aw=!1,Dw=!1,Nw={delta:0,timestamp:0},Pw=[xw.Read,xw.Update,xw.Render,xw.PostRender],Rw=function(e){return Aw=e},Ow=Pw.reduce((function(e,t){var n=function(e){var t=[],n=[],r=0,i=!1,o=0,s=new WeakSet,a=new WeakSet,u={cancel:function(e){var t=n.indexOf(e);s.add(e),-1!==t&&n.splice(t,1)},process:function(l){var c,h;if(i=!0,t=(c=[n,t])[0],(n=c[1]).length=0,r=t.length)for(o=0;o<r;o++)(h=t[o])(l),!0!==a.has(h)||s.has(h)||(u.schedule(h),e(!0));i=!1},schedule:function(e,o,u){void 0===o&&(o=!1),void 0===u&&(u=!1),Tw("function"===typeof e,"Argument must be a function");var l=u&&i,c=l?t:n;s.delete(e),o&&a.add(e),-1===c.indexOf(e)&&(c.push(e),l&&(r=t.length))}};return u}(Rw);return e.sync[t]=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),Aw||Bw(),n.schedule(e,t,r),e},e.cancelSync[t]=function(e){return n.cancel(e)},e.steps[t]=n,e}),{steps:{},sync:{},cancelSync:{}}),Lw=Ow.steps,Mw=Ow.sync,Fw=Ow.cancelSync,Vw=function(e){return Lw[e].process(Nw)},Uw=function(e){Aw=!1,Nw.delta=Cw?kw:Math.max(Math.min(e-Nw.timestamp,40),1),Cw||(kw=Nw.delta),Nw.timestamp=e,Dw=!0,Pw.forEach(Vw),Dw=!1,Aw&&(Cw=!1,Iw(Uw))},Bw=function(){Aw=!0,Cw=!0,Dw||Iw(Uw)},zw=function(){return Nw};const qw=Mw;var jw=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},Kw=function(e){return e%1?Number(e.toFixed(5)):e},Gw=/(-)?(\d[\d\.]*)/g,Hw=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,Ww=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,Qw={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},Yw=bw(bw({},Qw),{transform:jw(0,1)}),Xw=bw(bw({},Qw),{default:1}),$w=function(e){return{test:function(t){return"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},Jw=$w("deg"),Zw=$w("%"),eb=$w("px"),tb=$w("vh"),nb=$w("vw"),rb=bw(bw({},Zw),{parse:function(e){return Zw.parse(e)/100},transform:function(e){return Zw.transform(100*e)}}),ib=jw(0,255),ob=function(e){return void 0!==e.red},sb=function(e){return void 0!==e.hue};var ab=function(e){return function(t){if("string"!==typeof t)return t;for(var n={},r=function(e){return function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))}(e).replace(/(,|\/)/g," ").split(/ \s*/)}(t),i=0;i<4;i++)n[e[i]]=void 0!==r[i]?parseFloat(r[i]):1;return n}},ub=bw(bw({},Qw),{transform:function(e){return Math.round(ib(e))}});function lb(e,t){return e.startsWith(t)&&Ww.test(e)}var cb={test:function(e){return"string"===typeof e?lb(e,"rgb"):ob(e)},parse:ab(["red","green","blue","alpha"]),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,o=void 0===i?1:i;return function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha;return"rgba("+t+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({red:ub.transform(t),green:ub.transform(n),blue:ub.transform(r),alpha:Kw(Yw.transform(o))})}},hb={test:function(e){return"string"===typeof e?lb(e,"hsl"):sb(e)},parse:ab(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,o=void 0===i?1:i;return function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;return"hsla("+t+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({hue:Math.round(t),saturation:Zw.transform(Kw(n)),lightness:Zw.transform(Kw(r)),alpha:Kw(Yw.transform(o))})}},db=bw(bw({},cb),{test:function(e){return"string"===typeof e&&lb(e,"#")},parse:function(e){var t="",n="",r="";return e.length>4?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),t+=t,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),fb={test:function(e){return"string"===typeof e&&Ww.test(e)||ob(e)||sb(e)},parse:function(e){return cb.test(e)?cb.parse(e):hb.test(e)?hb.parse(e):db.test(e)?db.parse(e):e},transform:function(e){return ob(e)?cb.transform(e):sb(e)?hb.transform(e):e}},pb="${c}",mb="${n}",gb=function(e){return"number"===typeof e?0:e},yb={test:function(e){if("string"!==typeof e||!isNaN(e))return!1;var t=0,n=e.match(Gw),r=e.match(Hw);return n&&(t+=n.length),r&&(t+=r.length),t>0},parse:function(e){var t=e,n=[],r=t.match(Hw);r&&(t=t.replace(Hw,pb),n.push.apply(n,r.map(fb.parse)));var i=t.match(Gw);return i&&n.push.apply(n,i.map(Qw.parse)),n},createTransformer:function(e){var t=e,n=0,r=e.match(Hw),i=r?r.length:0;if(r)for(var o=0;o<i;o++)t=t.replace(r[o],pb),n++;var s=t.match(Gw),a=s?s.length:0;if(s)for(o=0;o<a;o++)t=t.replace(s[o],mb),n++;return function(e){for(var r=t,o=0;o<n;o++)r=r.replace(o<i?pb:mb,o<i?fb.transform(e[o]):Kw(e[o]));return r}},getAnimatableNone:function(e){var t=yb.parse(e);return yb.createTransformer(e)(t.map(gb))}},vb=function(e){return function(t){return 1-e(1-t)}},wb=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},bb=vb,_b=wb,Eb=function(e){return function(t){return Math.pow(t,e)}},Tb=function(e){return function(t){return t*t*((e+1)*t-e)}},xb=function(e){var t=Tb(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}},Sb=function(e){return e},Ib=Eb(2),kb=vb(Ib),Cb=wb(Ib),Ab=function(e){return 1-Math.sin(Math.acos(e))},Db=vb(Ab),Nb=wb(Db),Pb=Tb(1.525),Rb=vb(Pb),Ob=wb(Pb),Lb=xb(1.525),Mb=function(e){var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},Fb=function(e){return 1-Mb(1-e)},Vb=function(e){return e<.5?.5*(1-Mb(1-2*e)):.5*Mb(2*e-1)+.5},Ub=8,Bb=.001,zb=1e-7,qb=10,jb=11,Kb=1/(jb-1),Gb="undefined"!==typeof Float32Array,Hb=function(e,t){return 1-3*t+3*e},Wb=function(e,t){return 3*t-6*e},Qb=function(e){return 3*e},Yb=function(e,t,n){return 3*Hb(t,n)*e*e+2*Wb(t,n)*e+Qb(t)},Xb=function(e,t,n){return((Hb(t,n)*e+Wb(t,n))*e+Qb(t))*e};function $b(e,t,n,r){var i=Gb?new Float32Array(jb):new Array(jb),o=function(t){for(var r,o,s,a=0,u=1,l=jb-1;u!==l&&i[u]<=t;++u)a+=Kb;return--u,r=(t-i[u])/(i[u+1]-i[u]),(s=Yb(o=a+r*Kb,e,n))>=Bb?function(t,r){for(var i=0,o=0;i<Ub;++i){if(0===(o=Yb(r,e,n)))return r;r-=(Xb(r,e,n)-t)/o}return r}(t,o):0===s?o:function(t,r,i){var o,s,a=0;do{(o=Xb(s=r+(i-r)/2,e,n)-t)>0?i=s:r=s}while(Math.abs(o)>zb&&++a<qb);return s}(t,a,a+Kb)};!function(){for(var t=0;t<jb;++t)i[t]=Xb(t*Kb,e,n)}();return function(i){return e===t&&n===r?i:0===i?0:1===i?1:Xb(o(i),t,r)}}var Jb={x:0,y:0,z:0},Zb=function(e){return"number"===typeof e},e_=function(e){return function(t,n,r){return void 0!==r?e(t,n,r):function(r){return e(t,n,r)}}},t_=e_((function(e,t,n){return Math.min(Math.max(n,e),t)})),n_=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},r_=function(e){return n_(e)&&e.hasOwnProperty("z")},i_=function(e,t){return Math.abs(e-t)},o_=function(e,t){if(void 0===t&&(t=Jb),Zb(e)&&Zb(t))return i_(e,t);if(n_(e)&&n_(t)){var n=i_(e.x,t.x),r=i_(e.y,t.y),i=r_(e)&&r_(t)?i_(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}return 0},s_=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},a_=function(e,t,n){return-n*e+n*t+e},u_=function(){return u_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u_.apply(this,arguments)},l_=function(e,t,n){var r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},c_=[db,cb,hb],h_=function(e){return c_.find((function(t){return t.test(e)}))},d_=function(e){return"'"+e+"' is not an animatable color. Use the equivalent color code instead."},f_=function(e,t){var n=h_(e),r=h_(t);Tw(!!n,d_(e)),Tw(!!r,d_(t)),Tw(n.transform===r.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var i=n.parse(e),o=r.parse(t),s=u_({},i),a=n===hb?a_:l_;return function(e){for(var t in s)"alpha"!==t&&(s[t]=a(i[t],o[t],e));return s.alpha=a_(i.alpha,o.alpha,e),n.transform(s)}},p_=function(e,t){return function(n){return t(e(n))}},m_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(p_)};function g_(e,t){return Zb(e)?function(n){return a_(e,t,n)}:fb.test(e)?f_(e,t):w_(e,t)}var y_=function(e,t){var n=e.slice(),r=n.length,i=e.map((function(e,n){return g_(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}};function v_(e){for(var t=yb.parse(e),n=t.length,r=0,i=0,o=0,s=0;s<n;s++)r||"number"===typeof t[s]?r++:void 0!==t[s].hue?o++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:o}}var w_=function(e,t){var n=yb.createTransformer(t),r=v_(e),i=v_(t);return Tw(r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&r.numNumbers>=i.numNumbers,"Complex values '"+e+"' and '"+t+"' too different to mix. Ensure all colors are of the same type."),m_(y_(r.parsed,i.parsed),n)};var b_=function(e){return e},__=function(e){return void 0===e&&(e=b_),e_((function(t,n,r){var i=n-r,o=-(0-t+1)*(0-e(Math.abs(i)));return i<=0?n+o:n-o}))},E_=(__(),__(Math.sqrt),function(e,t){return t?e*(1e3/t):0}),T_=(e_((function(e,t,n){var r=t-e;return((n-e)%r+r)%r+e})),t_(0,1),function(){return function(e,t){var n=this,r=e.middleware,i=e.onComplete;this.isActive=!0,this.update=function(e){n.observer.update&&n.updateObserver(e)},this.complete=function(){n.observer.complete&&n.isActive&&n.observer.complete(),n.onComplete&&n.onComplete(),n.isActive=!1},this.error=function(e){n.observer.error&&n.isActive&&n.observer.error(e),n.isActive=!1},this.observer=t,this.updateObserver=function(e){return t.update(e)},this.onComplete=i,t.update&&r&&r.length&&r.forEach((function(e){return n.updateObserver=e(n.updateObserver,n.complete)}))}}()),x_=function(e,t,n){var r=t.middleware;return new T_({middleware:r,onComplete:n},"function"===typeof e?{update:e}:e)},S_=function(){function e(e){void 0===e&&(e={}),this.props=e}return e.prototype.create=function(t){return new e(t)},e.prototype.start=function(e){void 0===e&&(e={});var t=!1,n={stop:function(){}},r=this.props,i=r.init,o=_w(r,["init"]),s=i(x_(e,o,(function(){t=!0,n.stop()})));return n=s?bw({},n,s):n,t&&n.stop(),n},e.prototype.applyMiddleware=function(e){return this.create(bw({},this.props,{middleware:this.props.middleware?[e].concat(this.props.middleware):[e]}))},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=1===e.length?e[0]:m_.apply(void 0,e);return this.applyMiddleware((function(e){return function(t){return e(n(t))}}))},e}(),I_=function(e){return new S_({init:e})},k_=[eb,Zw,Jw,tb,nb],C_=function(e){return k_.find((function(t){return t.test(e)}))},A_=function(e,t){return e(t)},D_=function(e,t){var n=t.from,r=t.to,i=_w(t,["from","to"]),o=C_(n)||C_(r),s=o.transform,a=o.parse;return e(bw({},i,{from:"string"===typeof n?a(n):n,to:"string"===typeof r?a(r):r})).pipe(s)},N_=function(e){return function(t,n){var r=n.from,i=n.to,o=_w(n,["from","to"]);return t(bw({},o,{from:0,to:1})).pipe(e(r,i))}},P_=N_(f_),R_=N_(w_),O_=function(e,t){var n=function(e){var t=Object.keys(e),n=function(t,n){return void 0!==t&&!e[n](t)};return{getVectorKeys:function(e){return t.reduce((function(t,r){return n(e[r],r)&&t.push(r),t}),[])},testVectorProps:function(e){return e&&t.some((function(t){return n(e[t],t)}))}}}(t),r=n.testVectorProps,i=n.getVectorKeys;return function(t){if(!r(t))return e(t);var n=i(t),o=t[n[0]];return L_(o)(e,t,n)}},L_=function(e){return"number"===typeof e?A_:function(e){return Boolean(C_(e))}(e)?D_:fb.test(e)?P_:yb.test(e)?R_:A_},M_=function(e){return void 0===e&&(e={}),I_((function(t){var n=t.complete,r=t.update,i=e.velocity,o=void 0===i?0:i,s=e.from,a=void 0===s?0:s,u=e.power,l=void 0===u?.8:u,c=e.timeConstant,h=void 0===c?350:c,d=e.restDelta,f=void 0===d?.5:d,p=e.modifyTarget,m=0,g=l*o,y=Math.round(a+g),v="undefined"===typeof p?y:p(y),w=qw.update((function(e){var t=e.delta;m+=t;var i=-g*Math.exp(-m/h),o=i>f||i<-f;r(o?v+i:v),o||(Fw.update(w),n())}),!0);return{stop:function(){return Fw.update(w)}}}))},F_=O_(M_,{from:Qw.test,modifyTarget:function(e){return"function"===typeof e},velocity:Qw.test}),V_=function(e){return void 0===e&&(e={}),I_((function(t){var n=t.update,r=t.complete,i=e.velocity,o=void 0===i?0:i,s=e.from,a=void 0===s?0:s,u=e.to,l=void 0===u?0:u,c=e.stiffness,h=void 0===c?100:c,d=e.damping,f=void 0===d?10:d,p=e.mass,m=void 0===p?1:p,g=e.restSpeed,y=void 0===g?.01:g,v=e.restDelta,w=void 0===v?.01:v,b=o?-o/1e3:0,_=0,E=l-a,T=a,x=T,S=qw.update((function(e){var t=e.delta;_+=t;var i=f/(2*Math.sqrt(h*m)),s=Math.sqrt(h/m)/1e3;if(x=T,i<1){var a=Math.exp(-i*s*_),u=s*Math.sqrt(1-i*i);T=l-a*((b+i*s*E)/u*Math.sin(u*_)+E*Math.cos(u*_))}else{a=Math.exp(-s*_);T=l-a*(E+(b+s*E)*_)}o=E_(T-x,t);var c=Math.abs(o)<=y,d=Math.abs(l-T)<=w;c&&d?(n(T=l),Fw.update(S),r()):n(T)}),!0);return{stop:function(){return Fw.update(S)}}}))},U_=O_(V_,{from:Qw.test,to:Qw.test,stiffness:Qw.test,damping:Qw.test,mass:Qw.test,velocity:Qw.test}),B_=function(e){var t=e.from,n=void 0===t?0:t,r=e.velocity,i=void 0===r?0:r,o=e.min,s=e.max,a=e.power,u=void 0===a?.8:a,l=e.timeConstant,c=void 0===l?700:l,h=e.bounceStiffness,d=void 0===h?500:h,f=e.bounceDamping,p=void 0===f?10:f,m=e.restDelta,g=void 0===m?1:m,y=e.modifyTarget;return I_((function(e){var t,r=e.update,a=e.complete,l=n,h=n,f=!1,m=function(e){return void 0!==o&&e<=o},v=function(e){return void 0!==s&&e>=s},w=function(e){return m(e)||v(e)},b=function(e){r(e),l=h,i=E_((h=e)-l,zw().delta),t&&!f&&function(e,t){return m(e)&&t<0||v(e)&&t>0}(e,i)&&E({from:e,velocity:i})},_=function(e,n){t&&t.stop(),t=e.start({update:b,complete:function(){n?n():a()}})},E=function(e){f=!0,_(U_(bw({},e,{to:m(e.from)?o:s,stiffness:d,damping:p,restDelta:g})))};if(w(n))E({from:n,velocity:i});else if(0!==i){var T=F_({from:n,velocity:i,timeConstant:c,power:u,restDelta:w(n)?20:g,modifyTarget:y});_(T,(function(){w(h)?E({from:h,velocity:i}):a()}))}else a();return{stop:function(){return t&&t.stop()}}}))},z_=O_(B_,{from:Qw.test,velocity:Qw.test,min:Qw.test,max:Qw.test,damping:Qw.test,stiffness:Qw.test,modifyTarget:function(e){return"function"===typeof e}}),q_=function(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?1:r,o=e.ease,s=void 0===o?Sb:o,a=e.reverseEase;return void 0!==a&&a&&(s=bb(s)),I_((function(e){var t=e.update;return{seek:function(e){return t(e)}}})).pipe(s,(function(e){return a_(n,i,e)}))},j_=O_(q_,{ease:function(e){return"function"===typeof e},from:Qw.test,to:Qw.test}),K_=t_(0,1),G_=function(e){return void 0===e&&(e={}),I_((function(t){var n,r=t.update,i=t.complete,o=e.duration,s=void 0===o?300:o,a=e.ease,u=void 0===a?kb:a,l=e.flip,c=void 0===l?0:l,h=e.loop,d=void 0===h?0:h,f=e.yoyo,p=void 0===f?0:f,m=e.repeatDelay,g=void 0===m?0:m,y=e.from,v=void 0===y?0:y,w=e.to,b=void 0===w?1:w,_=e.elapsed,E=void 0===_?0:_,T=e.flipCount,x=void 0===T?0:T,S=e.yoyoCount,I=void 0===S?0:S,k=e.loopCount,C=void 0===k?0:k,A=j_({from:v,to:b,ease:u}).start(r),D=0,N=!1,P=function(e){var t;void 0===e&&(e=!1),A=j_({from:v=(t=[b,v])[0],to:b=t[1],ease:u,reverseEase:e}).start(r)},R=function(){D=K_(s_(0,s,E)),A.seek(D)},O=function(){N=!0,n=qw.update((function(e){var t=e.delta;E+=t,R(),function(){var e=N&&E>s+g;return!!e&&(!(!e||d||c||p)||(E=E-s-g,d&&C<d?(C++,!1):c&&x<c?(x++,P(),!1):!(p&&I<p)||(I++,P(I%2!==0),!1)))}()&&(Fw.update(n),i&&qw.update(i,!1,!0))}),!0)},L=function(){N=!1,n&&Fw.update(n)};return O(),{isActive:function(){return N},getElapsed:function(){return t_(0,s,E)},getProgress:function(){return D},stop:function(){L()},pause:function(){return L(),this},resume:function(){return N||O(),this},seek:function(e){return E=a_(0,s,e),qw.update(R,!1,!0),this},reverse:function(){return P(),this}}}))},H_=t_(0,1),W_=function(e){var t=e.easings,n=e.ease,r=void 0===n?Sb:n,i=e.times,o=e.values,s=_w(e,["easings","ease","times","values"]);t=Array.isArray(t)?t:function(e,t){return e.map((function(){return t||kb})).splice(0,e.length-1)}(o,t),i=i||function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(o);var a=t.map((function(e,t){return j_({from:o[t],to:o[t+1],ease:e})}));return G_(bw({},s,{ease:r})).applyMiddleware((function(e){return function(e,t,n){var r=e.length,i=r-1,o=i-1,s=t.map((function(e){return e.start(n)}));return function(t){t<=e[0]&&s[0].seek(0),t>=e[i]&&s[o].seek(1);for(var n=1;n<r&&!(e[n]>t||n===i);n++);var a=s_(e[n-1],e[n],t);s[n-1].seek(H_(a))}}(i,a,e)}))},Q_=function(e,t,n){return I_((function(r){var i=r.update,o=t.split(" ").map((function(t){return e.addEventListener(t,i,n),t}));return{stop:function(){return o.forEach((function(t){return e.removeEventListener(t,i,n)}))}}}))},Y_=function(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}},X_=function(e,t){return void 0===t&&(t={clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}),t.clientX=t.x=e.clientX,t.clientY=t.y=e.clientY,t.pageX=e.pageX,t.pageY=e.pageY,t},$_=[Y_()];if("undefined"!==typeof document){Q_(document,"touchstart touchmove",{passive:!0,capture:!0}).start((function(e){var t=e.touches;!0;var n=t.length;$_.length=0;for(var r=0;r<n;r++){var i=t[r];$_.push(X_(i))}}))}var J_=Y_();if("undefined"!==typeof document){Q_(document,"mousedown mousemove",!0).start((function(e){!0,X_(e,J_)}))}var Z_=function(e){return I_((function(t){var n=t.complete,r=setTimeout(n,e);return{stop:function(){return clearTimeout(r)}}}))},eE=function(e){return"object"===typeof e&&e.hasOwnProperty("current")},tE=function(){function e(e){var t=this;this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.updateAndNotify=function(e,n){void 0===n&&(n=!0),t.prev=t.current,t.current=e,t.updateSubscribers&&t.prev!==t.current&&t.updateSubscribers.forEach(t.notifySubscriber),n&&t.renderSubscribers&&t.renderSubscribers.forEach(t.notifySubscriber);var r=zw(),i=r.delta,o=r.timestamp;t.lastUpdated!==o&&(t.timeDelta=i,t.lastUpdated=o,qw.postRender(t.scheduleVelocityCheck))},this.notifySubscriber=function(e){e(t.current)},this.scheduleVelocityCheck=function(){return qw.postRender(t.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==t.lastUpdated&&(t.prev=t.current)},this.set(e,!1),this.canTrackVelocity=function(e){return!isNaN(parseFloat(e))}(this.current)}return e.prototype.subscribeTo=function(e,t){var n=this,r=function(){return t(n.current)};return e.add(r),function(){return e.delete(r)}},e.prototype.onChange=function(e){return this.updateSubscribers||(this.updateSubscribers=new Set),this.subscribeTo(this.updateSubscribers,e)},e.prototype.clearListeners=function(){var e;null===(e=this.updateSubscribers)||void 0===e||e.clear()},e.prototype.onRenderRequest=function(e){return this.renderSubscribers||(this.renderSubscribers=new Set),this.notifySubscriber(e),this.subscribeTo(this.renderSubscribers,e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?E_(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers&&this.updateSubscribers.clear(),this.renderSubscribers&&this.renderSubscribers.clear(),this.stop()},e}();function nE(e){return new tE(e)}var rE=function(){function e(e,t){var n=this;this.children=new Set,this.latest={},this.values=new Map,this.valueSubscriptions=new Map,this.config={},this.update=function(){return n.config.onUpdate(n.latest)},this.triggerRender=function(){return n.render()},this.scheduleRender=function(){return qw.render(n.triggerRender,!1,!0)},this.ref=function(e){e?n.mount(e):n.unmount(),n.externalRef&&("function"===typeof n.externalRef?n.externalRef(e):eE(n.externalRef)&&(n.externalRef.current=e))},this.parent=e,this.rootParent=e?e.rootParent:this,this.treePath=e?Ew(e.treePath,[e]):[],this.depth=e?e.depth+1:0,this.externalRef=t}return e.prototype.subscribe=function(e){var t=this;return this.children.add(e),function(){return t.children.delete(e)}},e.prototype.hasValue=function(e){return this.values.has(e)},e.prototype.addValue=function(e,t){this.hasValue(e)&&this.removeValue(e),this.values.set(e,t),this.latest[e]=t.get(),this.element&&this.subscribeToValue(e,t)},e.prototype.removeValue=function(e){var t=this.valueSubscriptions.get(e);t&&t(),this.values.delete(e),delete this.latest[e],this.valueSubscriptions.delete(e)},e.prototype.getValue=function(e,t){var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=new tE(t),this.addValue(e,n)),n},e.prototype.forEachValue=function(e){this.values.forEach(e)},e.prototype.getInstance=function(){return this.element},e.prototype.updateConfig=function(e){void 0===e&&(e={}),this.config=bw({},e)},e.prototype.setSingleStaticValue=function(e,t){this.latest[e]=t},e.prototype.setStaticValues=function(e,t){if("string"===typeof e)this.setSingleStaticValue(e,t);else for(var n in e)this.setSingleStaticValue(n,e[n])},e.prototype.scheduleUpdateLayoutDelta=function(){qw.update(this.rootParent.updateLayoutDelta,!1,!0)},e.prototype.subscribeToValue=function(e,t){var n=this,r=t.onChange((function(t){n.setSingleStaticValue(e,t),n.latest[e]=t,n.config.onUpdate&&qw.update(n.update,!1,!0)})),i=t.onRenderRequest(this.scheduleRender);this.valueSubscriptions.set(e,(function(){r(),i()}))},e.prototype.mount=function(e){var t=this;Tw(!!e,"No ref found. Ensure components created with motion.custom forward refs using React.forwardRef"),this.parent&&(this.removeFromParent=this.parent.subscribe(this)),this.element=this.current=e,this.forEachValue((function(e,n){return t.subscribeToValue(n,e)}))},e.prototype.unmount=function(){var e=this;this.forEachValue((function(t,n){return e.removeValue(n)})),Fw.update(this.update),Fw.render(this.render),this.removeFromParent&&this.removeFromParent()},e}();function iE(e){return e}function oE(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function sE(e){return{x:bw({},e.x),y:bw({},e.y)}}var aE={translate:0,scale:1,origin:0,originPoint:0};function uE(){return{x:bw({},aE),y:bw({},aE)}}var lE=bw(bw({},Qw),{transform:Math.round}),cE={color:fb,backgroundColor:fb,outlineColor:fb,fill:fb,stroke:fb,borderColor:fb,borderTopColor:fb,borderRightColor:fb,borderBottomColor:fb,borderLeftColor:fb,borderWidth:eb,borderTopWidth:eb,borderRightWidth:eb,borderBottomWidth:eb,borderLeftWidth:eb,borderRadius:eb,radius:eb,borderTopLeftRadius:eb,borderTopRightRadius:eb,borderBottomRightRadius:eb,borderBottomLeftRadius:eb,width:eb,maxWidth:eb,height:eb,maxHeight:eb,size:eb,top:eb,right:eb,bottom:eb,left:eb,padding:eb,paddingTop:eb,paddingRight:eb,paddingBottom:eb,paddingLeft:eb,margin:eb,marginTop:eb,marginRight:eb,marginBottom:eb,marginLeft:eb,rotate:Jw,rotateX:Jw,rotateY:Jw,rotateZ:Jw,scale:Xw,scaleX:Xw,scaleY:Xw,scaleZ:Xw,skew:Jw,skewX:Jw,skewY:Jw,distance:eb,translateX:eb,translateY:eb,translateZ:eb,x:eb,y:eb,z:eb,perspective:eb,opacity:Yw,originX:rb,originY:rb,originZ:eb,zIndex:lE,fillOpacity:Yw,strokeOpacity:Yw,numOctaves:lE},hE=[Qw,eb,Zw,Jw,nb,tb,{test:function(e){return"auto"===e},parse:function(e){return e}}],dE=function(e){return function(t){return t.test(e)}},fE=function(e){return hE.find(dE(e))},pE=Ew(hE,[fb,yb]),mE=function(e){return pE.find(dE(e))},gE=function(e){return cE[e]},yE=function(e,t){return t&&"number"===typeof e?t.transform(e):e},vE=["","X","Y","Z"],wE=["x","y","z"];function bE(e,t){return wE.indexOf(e)-wE.indexOf(t)}["translate","scale","rotate","skew","transformPerspective"].forEach((function(e){vE.forEach((function(t){return wE.push(e+t)}))}));var _E=new Set(wE);function EE(e){return _E.has(e)}var TE=new Set(["originX","originY","originZ"]);function xE(e){return TE.has(e)}var SE={x:"translateX",y:"translateY",z:"translateZ"};function IE(e){return e.startsWith("--")}function kE(e,t){return e/(t.max-t.min)*100}var CE={process:function(e,t){return"number"!==typeof e?e:kE(e,t.x)+"% "+kE(e,t.y)+"%"}},AE={borderRadius:bw(bw({},CE),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:CE,borderTopRightRadius:CE,borderBottomLeftRadius:CE,borderBottomRightRadius:CE,boxShadow:{process:function(e,t,n,r){var i=yb.parse(e),o=yb.createTransformer(e),s=n.x.scale*r.x,a=n.y.scale*r.y;i[1]/=s,i[2]/=a;var u=a_(s,a,.5);return"number"===typeof i[3]&&(i[3]/=u),"number"===typeof i[4]&&(i[4]/=u),o(i)}}};function DE(e,t){return"translate3d("+e.x.translate/t.x+"px, "+e.y.translate/t.y+"px, 0) scale("+e.x.scale+", "+e.y.scale+")"}function NE(e,t,n,r,i,o,s,a,u,l,c,h){var d=s.enableHardwareAcceleration,f=s.transformTemplate,p=s.allowTransformNone;o.length=0;var m=!!a,g=!!a,y=!0;for(var v in e){var w=e[v],b=gE(v),_=yE(w,b);if(EE(v)){if(m=!0,r[v]=_,o.push(v),!y)continue;w!==(void 0!==b.default?b.default:0)&&(y=!1)}else if(xE(v))i[v]=_,g=!0;else if("transform"!==v||"function"!==typeof w){var E=IE(v)?n:t;if(a&&AE[v]){var T=AE[v].process(w,h,u,c),x=AE[v].applyTo;if(x)for(var S=x.length,I=0;I<S;I++)E[x[I]]=T;else E[v]=T}else E[v]=_}}if((m||f)&&(a?(t.transform=DE(l,c),f&&(t.transform=f(r,t.transform))):t.transform=function(e,t,n,r,i,o){void 0===i&&(i=!0),void 0===o&&(o=!0);var s="",a=!1;t.sort(bE);for(var u=t.length,l=0;l<u;l++){var c=t[l];s+=(SE[c]||c)+"("+e[c]+") ","z"===c&&(a=!0)}return!a&&i?s+="translateZ(0)":s=s.trim(),n?s=n(e,r?"":s):o&&r&&(s="none"),s}(r,o,f,y,d,p)),g){var k=a?100*l.x.origin+"%":i.originX||"50%",C=a?100*l.y.origin+"%":i.originY||"50%",A=i.originZ||"0";t.transformOrigin=k+" "+C+" "+A}}function PE(e,t){e.min=t.min,e.max=t.max}function RE(e,t,n){return n+t*(e-n)}function OE(e,t,n,r,i){return void 0!==i&&(e=RE(e,i,r)),RE(e,n,r)+t}function LE(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),e.min=OE(e.min,t,n,r,i),e.max=OE(e.max,t,n,r,i)}function ME(e,t){var n=t.x,r=t.y;LE(e.x,n.translate,n.scale,n.originPoint),LE(e.y,r.translate,r.scale,r.originPoint)}function FE(e,t,n,r){var i=r[0],o=r[1],s=r[2];e.min=t.min,e.max=t.max;var a=a_(t.min,t.max,n[s]||.5);LE(e,n[i],n[o],a,n.scale)}var VE=["x","scaleX","originX"],UE=["y","scaleY","originY"];function BE(e,t,n,r,i){return e=RE(e-=t,1/n,r),void 0!==i&&(e=RE(e,1/i,r)),e}function zE(e,t,n){var r=n[0],i=n[1],o=n[2];!function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5);var o=a_(e.min,e.max,r)-t;e.min=BE(e.min,t,n,o,i),e.max=BE(e.max,t,n,o,i)}(e,t[r],t[i],t[o],t.scale)}var qE=t_(0,1);function jE(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),o_(e,t)<n}function KE(e,t){var n=.5,r=e.max-e.min,i=t.max-t.min;return i>r?n=s_(t.min,t.max-r,e.min):r>i&&(n=s_(e.min,e.max-i,t.min)),qE(n)}function GE(e,t,n,r){var i=t.max-t.min,o=n.max-n.min;e.origin=void 0===r?KE(t,n):r,e.originPoint=a_(t.min,t.max,e.origin),e.scale=o/i,jE(e.scale,1,1e-4)&&(e.scale=1),e.translate=function(e,t,n){var r=a_(e.min,e.max,n);return a_(t.min,t.max,n)-r}(t,n,e.origin),jE(e.translate)&&(e.translate=0)}function HE(e,t,n,r){GE(e.x,t.x,n.x,r),GE(e.y,t.y,n.y,r)}function WE(e){return[e("x"),e("y")]}var QE=function(e){return Array.isArray(e)},YE=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},XE=function(e){return{type:"spring",stiffness:700,damping:0===e?100:35}},$E=function(){return{ease:"linear",duration:.3}},JE=function(e){return{type:"keyframes",duration:.8,values:e}},ZE={x:YE,y:YE,z:YE,rotate:YE,rotateX:YE,rotateY:YE,rotateZ:YE,scaleX:XE,scaleY:XE,scale:XE,opacity:$E,backgroundColor:$E,color:$E,default:XE},eT=function(e){var t=e.to,n=e.duration;return I_((function(e){var r=e.update,i=e.complete;r(t),n?Z_(n).start({complete:i}):i()}))},tT=function(e){return Array.isArray(e)?(Tw(4===e.length,"Cubic bezier arrays must contain four numerical values."),$b(e[0],e[1],e[2],e[3])):"string"===typeof e?(Tw(void 0!==t[e],"Invalid easing type '"+e+"'"),t[e]):e},nT=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},rT=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!yb.test(t)||t.startsWith("url(")))},iT=function(e){return 1e3*e},oT={tween:G_,spring:U_,keyframes:W_,inertia:z_,just:eT},sT={tween:function(e){if(e.ease){var t=nT(e.ease)?e.ease[0]:e.ease;e.ease=tT(t)}return e},keyframes:function(e){var t=e.from,n=(e.to,e.velocity,_w(e,["from","to","velocity"]));if(n.values&&null===n.values[0]){var r=Ew(n.values);r[0]=t,n.values=r}return n.ease&&(n.easings=nT(n.ease)?n.ease.map(tT):tT(n.ease)),n.ease=Sb,n}},aT=function(e,t,n){var r=n?n.delay:0;if(void 0===n||!function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection;var t=_w(e,["when","delay","delayChildren","staggerChildren","staggerDirection"]);return Object.keys(t).length}(n))return bw({delay:r},function(e,t){var n;return n=QE(t)?JE:ZE[e]||ZE.default,bw({to:t},n(t))}(e,t));var i=n[e]||n.default||n;return!1===i.type?{delay:i.hasOwnProperty("delay")?i.delay:r,to:QE(t)?t[t.length-1]:t,type:"just"}:QE(t)?bw(bw({values:t,duration:.8,delay:r,ease:"linear"},i),{type:"keyframes"}):bw({type:"tween",to:t,delay:r},i)},uT=function(e,t,n,r){var i=t.get(),o=rT(e,i),s=rT(e,n),a=aT(e,n,r),u=a.type,l=void 0===u?"tween":u,c=_w(a,["type"]),h=o&&s?oT[l]:eT,d=function(e,t){return sT[e]?sT[e](t):t}(l,bw({from:i,velocity:t.getVelocity()},c));return function(e){return e.hasOwnProperty("duration")||e.hasOwnProperty("repeatDelay")}(d)&&(d.duration&&(d.duration=iT(d.duration)),d.repeatDelay&&(d.repeatDelay=iT(d.repeatDelay))),[h,d]};function lT(e,t,n,r){void 0===r&&(r={});var i=r.delay,o=void 0===i?0:i,s=_w(r,["delay"]);return t.start((function(r){var i,a=uT(e,t,n,s),u=a[0],l=a[1],c=l.delay,h=_w(l,["delay"]);void 0!==c&&(o=c);var d=function(){var e=u(h);i=e.start({update:function(e){return t.set(e)},complete:r})};return o?i=Z_(iT(o)).start({complete:d}):d(),function(){i&&i.stop()}}))}function cT(e,t){return oE(function(e,t){var n=e.top,r=e.left,i=e.bottom,o=e.right;void 0===t&&(t=iE);var s=t({x:r,y:n}),a=t({x:o,y:i});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}(e.getBoundingClientRect(),t))}var hT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultConfig={enableHardwareAcceleration:!0,allowTransformNone:!0},t.style={},t.reactStyle={},t.vars={},t.transform={},t.transformOrigin={},t.transformKeys=[],t.config=t.defaultConfig,t.isLayoutProjectionEnabled=!1,t.layoutUpdateListeners=new Set,t.hasViewportBoxUpdated=!1,t.targetBoxFinal={x:{min:0,max:1},y:{min:0,max:1}},t.treeScale={x:1,y:1},t.delta=uE(),t.deltaFinal=uE(),t.stopLayoutAxisAnimation={x:function(){},y:function(){}},t.isTargetBoxLocked=!1,t.axisProgress={x:nE(0),y:nE(0)},t.updateLayoutDelta=function(){t.isLayoutProjectionEnabled&&t.box&&t.updateDeltas(),t.children.forEach(dT)},t}return ww(t,e),t.prototype.removeValue=function(t){e.prototype.removeValue.call(this,t),delete this.vars[t],delete this.style[t]},t.prototype.clean=function(){this.style={},this.vars={},this.transform={}},t.prototype.updateConfig=function(e){void 0===e&&(e={}),this.config=bw(bw({},this.defaultConfig),e)},t.prototype.read=function(e){return this.getComputedStyle()[e]||0},t.prototype.readNativeValue=function(e){if(EE(e)){var t=gE(e);return t&&t.default||0}return this.read(e)},t.prototype.enableLayoutProjection=function(){this.isLayoutProjectionEnabled=!0},t.prototype.hide=function(){!1!==this.isVisible&&(this.isVisible=!1,this.scheduleRender())},t.prototype.show=function(){!0!==this.isVisible&&(this.isVisible=!0,this.scheduleRender())},t.prototype.onLayoutUpdate=function(e){var t=this;return this.layoutUpdateListeners.add(e),function(){return t.layoutUpdateListeners.delete(e)}},t.prototype.layoutReady=function(e){var t=this;this.layoutUpdateListeners.forEach((function(n){n(t.box,t.prevViewportBox||t.box,e)}))},t.prototype.getBoundingBox=function(){var e=this.config.transformPagePoint;return cT(this.element,e)},t.prototype.getBoundingBoxWithoutTransforms=function(){var e,t,n=this.getBoundingBox();return e=n,t=this.latest,zE(e.x,t,VE),zE(e.y,t,UE),n},t.prototype.getComputedStyle=function(){return window.getComputedStyle(this.element)},t.prototype.snapshotBoundingBox=function(){this.prevViewportBox=this.getBoundingBoxWithoutTransforms();var e=this.axisProgress,t=e.x,n=e.y;this.isTargetBoxLocked||t.isAnimating()||n.isAnimating()||(this.targetBox=sE(this.prevViewportBox))},t.prototype.measureLayout=function(){this.box=this.getBoundingBox(),this.boxCorrected=sE(this.box),this.targetBox||(this.targetBox=sE(this.box))},t.prototype.refreshTargetBox=function(){this.targetBox=this.getBoundingBoxWithoutTransforms()},t.prototype.lockTargetBox=function(){this.isTargetBoxLocked=!0},t.prototype.unlockTargetBox=function(){this.stopLayoutAnimation(),this.isTargetBoxLocked=!1},t.prototype.resetTransform=function(){var e=this.config.transformTemplate;this.element.style.transform=e?e({},""):"none",this.scheduleRender()},t.prototype.setAxisTarget=function(e,t,n){var r=this.targetBox[e];r.min=t,r.max=n,this.hasViewportBoxUpdated=!0,this.rootParent.scheduleUpdateLayoutDelta()},t.prototype.startLayoutAxisAnimation=function(e,t){var n=this,r=this.axisProgress[e],i=this.targetBox[e],o=i.min,s=i.max-o;return r.clearListeners(),r.set(o),r.set(o),r.onChange((function(t){return n.setAxisTarget(e,t,t+s)})),lT(e,r,0,t)},t.prototype.stopLayoutAnimation=function(){var e=this;WE((function(t){return e.axisProgress[t].stop()}))},t.prototype.updateDeltas=function(){var e,t,n,r,i,o,s;n=this.boxCorrected,r=this.box,PE(n.x,r.x),PE(n.y,r.y),this.parent&&(i=this.treeScale,o=this.parent.treeScale,s=this.parent.delta,i.x=o.x*s.x.scale,i.y=o.y*s.y.scale),function(e,t){for(var n=t.length,r=0;r<n;r++)ME(e,t[r].delta)}(this.boxCorrected,this.treePath),function(e,t,n){FE(e.x,t.x,n,VE),FE(e.y,t.y,n,UE)}(this.targetBoxFinal,this.targetBox,this.latest),HE(this.delta,this.boxCorrected,this.targetBox),HE(this.deltaFinal,this.boxCorrected,this.targetBoxFinal),this.hasViewportBoxUpdated&&(null===(t=(e=this.config).onViewportBoxUpdate)||void 0===t||t.call(e,this.targetBox,this.delta)),this.hasViewportBoxUpdated=!1;var a=DE(this.deltaFinal,this.treeScale);a!==this.deltaTransform&&this.scheduleRender(),this.deltaTransform=a},t.prototype.build=function(){void 0!==this.isVisible&&(this.style.visibility=this.isVisible?"visible":"hidden"),NE(this.latest,this.style,this.vars,this.transform,this.transformOrigin,this.transformKeys,this.config,this.isLayoutProjectionEnabled&&!!this.box,this.delta,this.deltaFinal,this.treeScale,this.targetBoxFinal)},t.prototype.render=function(){for(var e in this.build(),Object.assign(this.element.style,this.style),this.vars)this.element.style.setProperty(e,this.vars[e])},t}(rE),dT=function(e){return e.updateLayoutDelta()};function fT(e){var t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}function pT(e,t,n){return"string"===typeof e?e:eb.transform(t+n*e)}var mT=function(e,t){return eb.transform(e*t)},gT={offset:"stroke-dashoffset",array:"stroke-dasharray"},yT={offset:"strokeDashoffset",array:"strokeDasharray"};var vT={x:0,y:0,width:0,height:0};function wT(e,t,n,r,i,o,s,a,u,l){var c=e.attrX,h=e.attrY,d=e.originX,f=e.originY,p=e.pathLength,m=e.pathSpacing,g=void 0===m?1:m,y=e.pathOffset,v=void 0===y?0:y;return NE(_w(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),r,n,i,o,s,a),r.transform&&(t.transform=r.transform,delete r.transform),(void 0!==d||void 0!==f||t.transform)&&(t.transformOrigin=function(e,t,n){return pT(t,e.x,e.width)+" "+pT(n,e.y,e.height)}(u||vT,void 0!==d?d:.5,void 0!==f?f:.5)),void 0!==c&&(r.x=c),void 0!==h&&(r.y=h),void 0!==l&&void 0!==p&&function(e,t,n,r,i,o){void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=!0);var s=o?gT:yT;e[s.offset]=mT(-i,t);var a=mT(n,t),u=mT(r,t);e[s.array]=a+" "+u}(r,l,p,g,v,!1),r}var bT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),_T=/([a-z])([A-Z])/g,ET=function(e){return e.replace(_T,"$1-$2").toLowerCase()},TT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attrs={},t.defaultConfig={enableHardwareAcceleration:!1},t.config=t.defaultConfig,t}return ww(t,e),t.prototype.mount=function(t){e.prototype.mount.call(this,t),this.measure()},t.prototype.measure=function(){try{this.dimensions="function"===typeof this.element.getBBox?this.element.getBBox():this.element.getBoundingClientRect()}catch(e){this.dimensions={x:0,y:0,width:0,height:0}}"path"===this.element.tagName&&(this.totalPathLength=this.element.getTotalLength())},t.prototype.clean=function(){e.prototype.clean.call(this),this.attrs={}},t.prototype.read=function(e){return e=bT.has(e)?e:ET(e),this.element.getAttribute(e)},t.prototype.build=function(){wT(this.latest,this.style,this.vars,this.attrs,this.transform,this.transformOrigin,this.transformKeys,this.config,this.dimensions,this.totalPathLength)},t.prototype.render=function(){for(var t in e.prototype.render.call(this),this.attrs)this.element.setAttribute(ET(t),this.attrs[t])},t}(hT);var xT=new Set(["animate","circle","clipPath","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use","view"]);function ST(e){return"string"===typeof e&&xT.has(e)}var IT=(0,r.createContext)(null);function kT(){var e=(0,r.useContext)(IT);if(null===e)return[!0,null];var t=e.isPresent,n=e.onExitComplete,i=e.register,o=DT();(0,r.useEffect)((function(){return i(o)}),[]);return!t&&n?[!1,function(){return null===n||void 0===n?void 0:n(o)}]:[!0]}var CT=0,AT=function(){return CT++},DT=function(){return fT(AT)},NT=function(e,t,n,i,o){var s=fT((function(){return new(ST(e)?TT:hT)(n,o)}));s.updateConfig(bw({enableHardwareAcceleration:!i},t)),s.layoutId=t.layoutId;var a=function(){var e=(0,r.useContext)(IT);return null===e||e.isPresent}();return s.isPresent=void 0!==t.isPresent?t.isPresent:a,s},PT=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","static","layout","layoutId","onLayoutAnimationComplete","onViewportBoxUpdate","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragElastic","dragMomentum","dragPropagation","dragTransition","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","whileHover","whileTap","onHoverEnd","onHoverStart"]);function RT(e){return PT.has(e)}var OT=function(e){return!RT(e)};try{var LT=n(213).Z;OT=function(e){return e.startsWith("on")?!RT(e):LT(e)}}catch(Ow){}function MT(e,t,n){var i="string"===typeof e?function(e){var t={};for(var n in e)OT(n)&&(t[n]=e[n]);return t}(t):t;n.clean(),n.build();var o=ST(e)?function(e){return bw(bw({},e.attrs),{style:bw({},e.reactStyle)})}(n):function(e,t){var n=t.drag,r={style:bw(bw(bw({},e.reactStyle),e.style),e.vars)};return n&&(r.style.userSelect="none",r.draggable=!1),r}(n,t);return(0,r.createElement)(e,bw(bw(bw({},i),{ref:n.ref}),o))}function FT(e){return"string"===typeof e&&e.startsWith("var(--")}var VT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var UT=4;function BT(e,t,n){void 0===n&&(n=1),Tw(n<=UT,'Max CSS variable fallback depth detected in property "'+e+'". This may indicate a circular fallback dependency.');var r=function(e){var t=VT.exec(e);return t?[t[1],t[2]]:[,]}(e),i=r[0],o=r[1];if(i){var s=window.getComputedStyle(t).getPropertyValue(i);return s||(FT(o)?BT(o,t,n+1):o)}}var zT,qT=new Set(["width","height","top","left","right","bottom","x","y"]),jT=function(e){return qT.has(e)},KT=function(e,t){e.set(t,!1),e.set(t)},GT=function(e){return e===Qw||e===eb};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(zT||(zT={}));var HT=function(e,t){return parseFloat(e.split(", ")[t])},WT=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var o=i.match(/^matrix3d\((.+)\)$/);if(o)return HT(o[1],t);var s=i.match(/^matrix\((.+)\)$/);return s?HT(s[1],e):0}},QT=new Set(["x","y","z"]),YT=wE.filter((function(e){return!QT.has(e)}));var XT={width:function(e){var t=e.x;return t.max-t.min},height:function(e){var t=e.y;return t.max-t.min},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:WT(4,13),y:WT(5,14)},$T=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=bw({},t),r=bw({},r);var i=Object.keys(t).filter(jT),o=[],s=!1,a=[];if(i.forEach((function(i){var u=e.getValue(i);if(e.hasValue(i)){var l,c=n[i],h=t[i],d=fE(c);if(QE(h))for(var f=h.length,p=null===h[0]?1:0;p<f;p++)l?Tw(fE(h[p])===l,"All keyframes must be of the same type"):(l=fE(h[p]),Tw(l===d||GT(d)&&GT(l),"Keyframes must be of the same dimension as the current value"));else l=fE(h);if(d!==l)if(GT(d)&&GT(l)){var m=u.get();"string"===typeof m&&u.set(parseFloat(m)),"string"===typeof h?t[i]=parseFloat(h):Array.isArray(h)&&l===eb&&(t[i]=h.map(parseFloat))}else s||(o=function(e){var t=[];return YT.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),s=!0),a.push(i),r[i]=void 0!==r[i]?r[i]:t[i],KT(u,h)}})),a.length){var u=function(e,t,n){var r=t.getBoundingBox(),i=t.getComputedStyle(),o=i.display,s={top:i.top,left:i.left,bottom:i.bottom,right:i.right,transform:i.transform};"none"===o&&t.setStaticValues("display",e.display||"block"),t.render();var a=t.getBoundingBox();return n.forEach((function(n){var o=t.getValue(n);KT(o,XT[n](r,s)),e[n]=XT[n](a,i)})),e}(t,e,a);return o.length&&o.forEach((function(t){var n=t[0],r=t[1];e.getValue(n).set(r)})),e.render(),{target:u,transitionEnd:r}}return{target:t,transitionEnd:r}};function JT(e,t,n,r){return function(e){return Object.keys(e).some(jT)}(t)?$T(e,t,n,r):{target:t,transitionEnd:r}}var ZT=function(e,t,n,r){var i=function(e,t,n){var r=_w(t,[]),i=e.getInstance();if(!(i instanceof HTMLElement))return{target:r,transitionEnd:n};for(var o in n&&(n=bw({},n)),e.forEachValue((function(e){var t=e.get();if(FT(t)){var n=BT(t,i);n&&e.set(n)}})),r){var s=r[o];if(FT(s)){var a=BT(s,i);a&&(r[o]=a,n&&void 0===n[o]&&(n[o]=s))}}return{target:r,transitionEnd:n}}(e,t,r);return JT(e,t=i.target,n,r=i.transitionEnd)};var ex=function(){function e(){this.hasMounted=!1,this.pendingAnimations=[],this.componentControls=new Set}return e.prototype.setVariants=function(e){this.variants=e,this.componentControls.forEach((function(t){return t.setVariants(e)}))},e.prototype.setDefaultTransition=function(e){this.defaultTransition=e,this.componentControls.forEach((function(t){return t.setDefaultTransition(e)}))},e.prototype.subscribe=function(e){var t=this;return this.componentControls.add(e),this.variants&&e.setVariants(this.variants),this.defaultTransition&&e.setDefaultTransition(this.defaultTransition),function(){return t.componentControls.delete(e)}},e.prototype.start=function(e,t){var n=this;if(this.hasMounted){var r=[];return this.componentControls.forEach((function(n){var i=n.start(e,{transitionOverride:t});r.push(i)})),Promise.all(r)}return new Promise((function(r){n.pendingAnimations.push({animation:[e,t],resolve:r})}))},e.prototype.set=function(e){return Tw(this.hasMounted,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),this.componentControls.forEach((function(t){return t.apply(e)}))},e.prototype.stop=function(){this.componentControls.forEach((function(e){return e.stop()}))},e.prototype.mount=function(){var e=this;this.hasMounted=!0,this.pendingAnimations.forEach((function(t){var n=t.animation,r=t.resolve;return e.start.apply(e,n).then(r)}))},e.prototype.unmount=function(){this.hasMounted=!1,this.stop()},e}(),tx=(0,r.createContext)({static:!1}),nx=function(e){return"string"===typeof e||Array.isArray(e)},rx=function(e){return e instanceof ex},ix=function(e,t,n,i,o){void 0===i&&(i=!1);var s,a=o.initial,u=o.animate,l=o.variants,c=o.whileTap,h=o.whileHover,d=o.layoutId,f=(0,r.useContext)(IT),p=null===f||void 0===f?void 0:f.id;n.isPresenceRoot=e.presenceId!==p,void 0!==(null===f||void 0===f?void 0:f.initial)&&(a=f.initial),!1!==a||rx(u)?"boolean"!==typeof a&&(s=a):s=u;var m=(0,r.useRef)(!1),g=l||nx(u)||nx(c)||nx(h)||rx(u),y=nx(s)?s:e.initial,v=nx(u)?u:e.animate,w=i?y:null,b=g&&nx(v)?v:null,_=(0,r.useMemo)((function(){return{controls:g?t:e.controls,initial:y,animate:v,visualElement:n,hasMounted:m,isReducedMotion:e.isReducedMotion,presenceId:p}}),[w,b,e.isReducedMotion,u,d,p]);return _.static=i,function(e,t){void 0===t&&(t=!1);var n=(0,r.useRef)(!0);(!t||t&&n.current)&&e(),n.current=!1}((function(){var n=s||e.initial;n&&t.apply(n)}),!i),(0,r.useEffect)((function(){m.current=!0}),[]),_},ox=function(e){var t=e.animate,n=e.variants,r=e.inherit;return(void 0===r||r)&&!!n&&(!t||t instanceof ex)},sx=function(e){return e instanceof tE};function ax(e,t,n,r){for(var i in void 0===r&&(r=!1),r&&(e.reactStyle={}),n){var o=n[i],s=!1;if(sx(o))ux.has(i)||(e.addValue(i,o),s=!0);else if(EE(i)||xE(i)){if(e.hasValue(i)){if(o!==t[i]){e.getValue(i).set(o)}}else e.addValue(i,nE(o));s=!0}else r&&(e.reactStyle[i]=o);s&&(t[i]=o)}}var ux=new Set([]),lx=function(){return{}},cx=function(e){return QE(e)?e[e.length-1]||0:e},hx=function(e){return/^\-?\d*\.?\d+$/.test(e)},dx=function(){function e(e,t){var n=this,r=t.makeTargetAnimatable;this.props={},this.variants={},this.baseTarget={},this.overrides=[],this.resolvedOverrides=[],this.activeOverrides=new Set,this.isAnimating=new Set,this.hasValue=function(e){return!n.visualElement.hasValue(e)},this.visualElement=e,this.makeTargetAnimatable=r,this.visualElement.forEachValue((function(e,t){return n.baseTarget[t]=e.get()}))}return e.prototype.setProps=function(e){this.props=e},e.prototype.setVariants=function(e){e&&(this.variants=e)},e.prototype.setDefaultTransition=function(e){e&&(this.defaultTransition=e)},e.prototype.setValues=function(e,t){var n=void 0===t?{}:t,r=n.isActive,i=void 0===r?new Set:r,o=n.priority,s=this.resolveVariant(e),a=s.target,u=s.transitionEnd;for(var l in a=this.transformValues(bw(bw({},a),u))){if(i.has(l))return;if(i.add(l),a){var c=cx(a[l]);if(this.visualElement.hasValue(l)){var h=this.visualElement.getValue(l);h&&h.set(c)}else this.visualElement.addValue(l,nE(c));o||(this.baseTarget[l]=c)}}},e.prototype.transformValues=function(e){var t=this.props.transformValues;return t?t(e):e},e.prototype.checkForNewValues=function(e){var t=Object.keys(e).filter(this.hasValue),n=t.length;if(n)for(var r=0;r<n;r++){var i=t[r],o=e[i],s=null;if(Array.isArray(o)&&(s=o[0]),null===s){var a=this.visualElement.readNativeValue(i);s=void 0!==a?a:e[i],Tw(null!==s,'No initial value for "'+i+'" can be inferred. Ensure an initial value for "'+i+'" is defined on the component.')}"string"===typeof s&&hx(s)?s=parseFloat(s):!mE(s)&&yb.test(o)&&(s=yb.getAnimatableNone(o)),this.visualElement.addValue(i,nE(s)),this.baseTarget[i]=s}},e.prototype.resolveVariant=function(e){if(!e)return{target:void 0,transition:void 0,transitionEnd:void 0};(function(e){return"function"===typeof e})(e)&&(e=e(this.props.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(this.visualElement),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(this.visualElement)));var t=e.transition;return{transition:void 0===t?this.defaultTransition:t,transitionEnd:e.transitionEnd,target:_w(e,["transition","transitionEnd"])}},e.prototype.getHighestPriority=function(){return this.activeOverrides.size?Math.max.apply(Math,Array.from(this.activeOverrides)):0},e.prototype.setOverride=function(e,t){this.overrides[t]=e,this.children&&this.children.forEach((function(n){return n.setOverride(e,t)}))},e.prototype.startOverride=function(e){var t=this.overrides[e];if(t)return this.start(t,{priority:e})},e.prototype.clearOverride=function(e){var t=this;if(this.children&&this.children.forEach((function(t){return t.clearOverride(e)})),this.overrides[e]){this.activeOverrides.delete(e);var n=this.getHighestPriority();if(this.resetIsAnimating(),n)this.overrides[n]&&this.startOverride(n);var r=this.resolvedOverrides[e];if(r){var i={};for(var o in this.baseTarget)void 0!==r[o]&&(i[o]=this.baseTarget[o]);this.onStart(),this.animate(i).then((function(){return t.onComplete()}))}}},e.prototype.apply=function(e){return Array.isArray(e)?this.applyVariantLabels(e):"string"===typeof e?this.applyVariantLabels([e]):void this.setValues(e)},e.prototype.applyVariantLabels=function(e){var t=this,n=new Set;Ew(e).reverse().forEach((function(r){var i=t.resolveVariant(t.variants[r]),o=i.target,s=i.transitionEnd;s&&t.setValues(s,{isActive:n}),o&&t.setValues(o,{isActive:n}),t.children&&t.children.size&&t.children.forEach((function(t){return t.applyVariantLabels(e)}))}))},e.prototype.start=function(e,t){var n,r=this;return void 0===t&&(t={}),t.priority&&this.activeOverrides.add(t.priority),this.resetIsAnimating(t.priority),n=function(e){return Array.isArray(e)}(e)?this.animateVariantLabels(e,t):"string"===typeof e?this.animateVariant(e,t):this.animate(e,t),this.onStart(),n.then((function(){return r.onComplete()}))},e.prototype.animate=function(e,t){var n=this,r=void 0===t?{}:t,i=r.delay,o=void 0===i?0:i,s=r.priority,a=void 0===s?0:s,u=r.transitionOverride,l=this.resolveVariant(e),c=l.target,h=l.transition,d=l.transitionEnd;if(u&&(h=u),!c)return Promise.resolve();c=this.transformValues(c),d&&(d=this.transformValues(d)),this.checkForNewValues(c);var f=this.transformValues(function(e,t,n){var r,i,o={};for(var s in e)o[s]=null!==(r=fx(s,t))&&void 0!==r?r:null===(i=n.getValue(s))||void 0===i?void 0:i.get();return o}(c,h,this.visualElement));if(this.makeTargetAnimatable){var p=this.makeTargetAnimatable(this.visualElement,c,f,d);c=p.target,d=p.transitionEnd}a&&(this.resolvedOverrides[a]=c),this.checkForNewValues(c);var m=[];for(var g in c){var y=this.visualElement.getValue(g);if(y&&c&&void 0!==c[g]){var v=c[g];a||(this.baseTarget[g]=cx(v)),this.isAnimating.has(g)||(this.isAnimating.add(g),m.push(lT(g,y,v,bw({delay:o},h))))}}var w=Promise.all(m);return d?w.then((function(){n.setValues(d,{priority:a})})):w},e.prototype.animateVariantLabels=function(e,t){var n=this,r=Ew(e).reverse().map((function(e){return n.animateVariant(e,t)}));return Promise.all(r)},e.prototype.animateVariant=function(e,t){var n=this,r=!1,i=0,o=0,s=1,a=t&&t.priority||0,u=this.variants[e],l=u?function(){return n.animate(u,t)}:function(){return Promise.resolve()},c=this.children?function(){return n.animateChildren(e,i,o,s,a)}:function(){return Promise.resolve()};if(u&&this.children){var h=this.resolveVariant(u).transition;h&&(r=h.when||r,i=h.delayChildren||i,o=h.staggerChildren||o,s=h.staggerDirection||s)}if(r){var d="beforeChildren"===r?[l,c]:[c,l],f=d[1];return(0,d[0])().then(f)}return Promise.all([l(),c()])},e.prototype.animateChildren=function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),!this.children)return Promise.resolve();var o=[],s=(this.children.size-1)*n,a=1===r?function(e){return e*n}:function(e){return s-e*n};return Array.from(this.children).forEach((function(n,r){var s=n.animateVariant(e,{priority:i,delay:t+a(r)});o.push(s)})),Promise.all(o)},e.prototype.onStart=function(){var e=this.props.onAnimationStart;e&&e()},e.prototype.onComplete=function(){var e=this.props.onAnimationComplete;e&&e()},e.prototype.checkOverrideIsAnimating=function(e){for(var t=this.overrides.length,n=e+1;n<t;n++){var r=this.resolvedOverrides[n];if(r)for(var i in r)this.isAnimating.add(i)}},e.prototype.resetIsAnimating=function(e){void 0===e&&(e=0),this.isAnimating.clear(),e<this.getHighestPriority()&&this.checkOverrideIsAnimating(e),this.children&&this.children.forEach((function(t){return t.resetIsAnimating(e)}))},e.prototype.stop=function(){this.visualElement.forEachValue((function(e){return e.stop()}))},e.prototype.addChild=function(e){this.children||(this.children=new Set),this.children.add(e),this.overrides.forEach((function(t,n){t&&e.setOverride(t,n)}))},e.prototype.removeChild=function(e){this.children&&this.children.delete(e)},e.prototype.resetChildren=function(){this.children&&this.children.clear()},e}();function fx(e,t){if(t)return(t[e]||t.default||t).from}function px(e,t,n){var i=ox(t),o=t.variants,s=t.transition,a=(0,r.useContext)(tx).controls,u=(0,r.useContext)(IT),l=fT((function(){return new dx(e,n)}));return u&&!u.isPresent||(l.resetChildren(),l.setProps(t),l.setVariants(o),l.setDefaultTransition(s)),(0,r.useEffect)((function(){i&&a&&a.addChild(l)})),(0,r.useEffect)((function(){return function(){t.onAnimationComplete;var e=_w(t,["onAnimationComplete"]);l.setProps(e),a&&a.removeChild(l)}}),[]),l}var mx,gx=(0,r.createContext)({transformPagePoint:function(e){return e},features:[]});!function(e){e.Target="Target",e.VariantLabel="VariantLabel",e.AnimationSubscription="AnimationSubscription"}(mx||(mx={}));var yx=function(e){return function(t){return e(t),null}};function vx(e,t){void 0===t&&(t=!1);e.transition;var n=e.transitionEnd,r=_w(e,["transition","transitionEnd"]);return t?bw(bw({},r),n):r}var wx,bx,_x=function(e){var t,n=e instanceof tE?e.get():e;return Array.from(new Set((t=n)?Array.isArray(t)?t:[t]:[]))};var Ex,Tx,xx=((wx={})[mx.Target]=yx((function(e){return function(e,t,n,i){var o=(0,r.useRef)(!0),s=(0,r.useRef)(null);s.current||(s.current=vx(e,!0)),(0,r.useEffect)((function(){var r,a,u={},l=vx(e),c=vx(e,!0);for(var h in l){var d=o.current&&(!n.hasValue(h)||n.getValue(h).get()!==c[h]),f=null!==c[h],p=(r=s.current[h],void 0!==(a=c[h])&&(Array.isArray(r)&&Array.isArray(a)?!function(e,t){if(null===t)return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}(a,r):r!==a));f&&(p||d)&&(u[h]=l[h])}o.current=!1,s.current=bw(bw({},s.current),c),Object.keys(u).length&&t.start(bw(bw({},u),{transition:e.transition||i,transitionEnd:e.transitionEnd}))}),[e])}(e.animate,e.controls,e.visualElement,e.transition)})),wx[mx.VariantLabel]=yx((function(e){var t=e.animate,n=e.inherit,i=void 0===n||n,o=e.controls;return function(e,t,n,i){var o=_x(t),s=(0,r.useContext)(tx),a=s.hasMounted&&s.hasMounted.current,u=(0,r.useRef)(!1);(0,r.useEffect)((function(){var t,r,l=!1;n?(l=!!a,o=_x(s.animate)):l=u.current||(t=_x(e),r=o,t.join(",")!==r.join(",")),l&&i.start(o),u.current=!0}),function(e){return[e.join(",")]}(o))}(e.initial,t,i,o)})),wx[mx.AnimationSubscription]=yx((function(e){return function(e,t){var n=(0,r.useMemo)((function(){return e.subscribe(t)}),[e]);(0,r.useEffect)((function(){return function(){n&&n()}}),[n])}(e.animate,e.controls)})),wx),Sx=function(e){return e.animate instanceof ex},Ix=["initial","animate","whileTap","whileHover"],kx=((bx={})[mx.Target]=function(e){return void 0!==e.animate&&(t=e.animate,!(Array.isArray(t)||"string"===typeof t))&&!Sx(e);var t},bx[mx.VariantLabel]=function(e){return void 0!==e.variants||Ix.some((function(t){return"string"===typeof e[t]}))},bx[mx.AnimationSubscription]=Sx,bx),Cx=function(e){var t=void 0;for(var n in mx)kx[n](e)&&(t=n);return t?xx[t]:void 0};!function(e){e[e.Entering=0]="Entering",e[e.Present=1]="Present",e[e.Exiting=2]="Exiting"}(Ex||(Ex={})),function(e){e[e.Hide=0]="Hide",e[e.Show=1]="Show"}(Tx||(Tx={}));var Ax={measureLayout:function(e){return e.measureLayout()},layoutReady:function(e){return e.layoutReady()}},Dx=function(e,t){return e.depth-t.depth};function Nx(){var e=new Set;return{add:function(t){return e.add(t)},flush:function(t){var n=void 0===t?Ax:t,r=n.measureLayout,i=n.layoutReady,o=Array.from(e).sort(Dx);o.forEach((function(e){return e.resetTransform()})),o.forEach(r),o.forEach(i),o.forEach((function(e){e.isPresent&&(e.presence=Ex.Present)})),e.clear()}}}function Px(e){return!!e.forceUpdate}var Rx=(0,r.createContext)(Nx());function Ox(e){return(0,r.useEffect)((function(){return function(){return e()}}),[])}function Lx(e,t){var n=t.defaultFeatures,i=t.useVisualElement,o=t.render,s=t.animationControlsConfig;return(0,r.forwardRef)((function(t,a){var u=(0,r.useContext)(tx),l=ox(t),c=u.static||t.static||!1,h=i(e,t,u.visualElement,c,a);!function(e,t){var n=fT(lx);for(var r in n){var i=EE(r)||xE(r),o=t[r],s=t.style&&t.style[r],a=o&&sx(t[r]),u=s&&sx(t.style[r]);(i&&!o&&!s||!i&&!a&&!u)&&(e.removeValue(r),delete n[r])}ax(e,n,t),t.style&&ax(e,n,t.style,!0),t.transformValues&&(e.reactStyle=t.transformValues(e.reactStyle))}(h,t);var d=px(h,t,s),f=ix(u,d,h,c,t),p=function(e,t,n,i,o,s,a,u){var l=(0,r.useContext)(gx);if(t||"undefined"===typeof window)return null;var c=Ew(e,l.features),h=c.length,d=[],f=Cx(o);f&&d.push((0,r.createElement)(f,{key:"animation",initial:o.initial,animate:o.animate,variants:o.variants,transition:o.transition,controls:i,inherit:u,visualElement:n}));for(var p=0;p<h;p++){var m=c[p],g=m.shouldRender,y=m.key,v=m.Component;g(o,a)&&d.push((0,r.createElement)(v,bw({key:y},o,{localContext:s,parentContext:a,visualElement:n,controls:i})))}return d}(n,c,h,d,t,f,u,l),m=o(e,t,h);return function(e){var t=(0,r.useContext)(Rx);Ox((function(){Px(t)&&t.remove(e)}))}(h),(0,r.createElement)(r.Fragment,null,(0,r.createElement)(tx.Provider,{value:f},m),p)}))}function Mx(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var Fx=Mx("dragHorizontal"),Vx=Mx("dragVertical");function Ux(e){var t=!1;if("y"===e)t=Vx();else if("x"===e)t=Fx();else{var n=Fx(),r=Vx();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}var Bx=!1;"undefined"!==typeof window&&document.addEventListener("touchmove",(function(e){Bx&&e.preventDefault()}),{passive:!1});var zx=function(){return Bx=!1};function qx(e,t,n,r){if(n)return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function jx(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function Kx(e){return!!e.touches}var Gx={pageX:0,pageY:0};function Hx(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||Gx;return{x:n[t+"X"],y:n[t+"Y"]}}function Wx(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function Qx(e,t){return void 0===t&&(t="page"),{point:Kx(e)?Hx(e,t):Wx(e,t)}}function Yx(e){return Qx(e,"client")}var Xx,$x=function(e,t){if(void 0===t&&(t=!1),e){var n=function(t){return e(t,Qx(t))};return t?function(e){if(e)return function(t){var n=t instanceof MouseEvent;(!n||n&&0===t.button)&&e(t)}}(n):n}},Jx="undefined"!==typeof window,Zx=function(){return Jx&&null===window.onpointerdown},eS=function(){return Jx&&null===window.ontouchstart},tS=function(){return Jx&&null===window.onmousedown},nS={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},rS={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function iS(e){return Zx()?e:eS()?rS[e]:tS()?nS[e]:e}function oS(e,t,n,r){return qx(e,iS(t),$x(n,"pointerdown"===t),r)}function sS(e,t,n,i){return function(e,t,n,i){(0,r.useEffect)((function(){var r=e.current;if(n&&r)return qx(r,t,n,i)}),[e,t,n,i])}(e,iS(t),$x(n,"pointerdown"===t),i)}!function(e){e.subtract=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.relativeTo=function(e){var t;return function(n){var r=n.x,i=n.y,o=void 0!==t?t:t="string"===typeof e?document.getElementById(e):e;if(o){var s=o.getBoundingClientRect();return{x:r-s.left-window.scrollX,y:i-s.top-window.scrollY}}}}}(Xx||(Xx={}));var aS=function(){function e(e,t,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=lS(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=o_(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,o=zw().timestamp;r.history.push(bw(bw({},i),{timestamp:o}));var s=r.handlers,a=s.onStart,u=s.onMove;t||(a&&a(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),u&&u(r.lastMoveEvent,e)}}},!(Kx(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=i;var o=uS(Qx(e),this.transformPagePoint),s=o.point,a=zw().timestamp;this.history=[bw(bw({},s),{timestamp:a})];var u=t.onSessionStart;u&&u(e,lS(o,this.history));var l=oS(window,"pointermove",(function(e,t){return r.handlePointerMove(e,t)})),c=oS(window,"pointerup",(function(e,t){return r.handlePointerUp(e,t)}));this.removeListeners=function(){l&&l(),c&&c()}}}return e.prototype.handlePointerMove=function(e,t){this.lastMoveEvent=e,this.lastMoveEventInfo=uS(t,this.transformPagePoint),jx(e)&&0===e.buttons?this.handlePointerUp(e,t):qw.update(this.updatePoint,!0)},e.prototype.handlePointerUp=function(e,t){this.end();var n=this.handlers.onEnd;if(n){var r=lS(uS(t,this.transformPagePoint),this.history);n&&n(e,r)}},e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),Fw.update(this.updatePoint),zx()},e}();function uS(e,t){return t?{point:t(e.point)}:e}function lS(e,t){var n=e.point;return{point:n,delta:Xx.subtract(n,hS(t)),offset:Xx.subtract(n,cS(t)),velocity:dS(t,.1)}}function cS(e){return e[0]}function hS(e){return e[e.length-1]}function dS(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=hS(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>iT(t)));)n--;if(!r)return{x:0,y:0};var o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};var s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function fS(e,t,n,r,i){var o=e-t*n;return r?function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?a_(r,e,n):Math.max(e,r):void 0!==i&&e>i&&(e=n?a_(i,e,n):Math.min(e,i)),e}(o,r,i):o}function pS(e,t,n){var r={},i=e.max-e.min;return void 0!==t&&(r.min=e.min+t),void 0!==n&&(r.max=Math.max(e.min+n-i,e.min+n)),r}function mS(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=[i,r])[0],i=n[1]),{min:e.min+r,max:e.min+i}}var gS,yS=new WeakMap,vS=function(){function e(e){var t=e.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.props={},this.cursorProgress={x:.5,y:.5},this.openGlobalLock=null,this.panSession=null,this.visualElement=t,this.visualElement.enableLayoutProjection(),yS.set(t,this)}return e.prototype.start=function(e,t){var n=this,r=void 0===t?{}:t,i=r.snapToCursor,o=void 0!==i&&i,s=r.cursorProgress;o&&this.snapToCursor(e);var a=this.props.transformPagePoint;this.panSession=new aS(e,{onSessionStart:function(){Bx=!0,n.stopMotion()},onStart:function(e,t){var r,i,o=n.props,a=o.drag,u=o.dragPropagation;if(!a||u||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=Ux(a),n.openGlobalLock)){n.prepareBoundingBox(),n.visualElement.lockTargetBox(),n.resolveDragConstraints();var l=Yx(e).point;WE((function(e){var t=n.visualElement.targetBox[e],r=t.min,i=t.max;n.cursorProgress[e]=s?s[e]:s_(r,i,l[e])})),n.isDragging=!0,n.currentDirection=null,null===(i=(r=n.props).onDragStart)||void 0===i||i.call(r,e,t)}},onMove:function(e,t){var r,i,o,s,a=n.props,u=a.dragPropagation,l=a.dragDirectionLock;if(u||n.openGlobalLock){var c=t.offset;if(l&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(c),void(null!==n.currentDirection&&(null===(i=(r=n.props).onDirectionLock)||void 0===i||i.call(r,n.currentDirection)));n.updateAxis("x",e),n.updateAxis("y",e),null===(s=(o=n.props).onDrag)||void 0===s||s.call(o,e,t),gS=e}},onEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:a})},e.prototype.prepareBoundingBox=function(){var e=this.visualElement.getInstance(),t=e.style.transform;this.visualElement.resetTransform(),this.visualElement.measureLayout(),e.style.transform=t,this.visualElement.refreshTargetBox()},e.prototype.resolveDragConstraints=function(){var e=this.props.dragConstraints;this.constraints=!!e&&(eE(e)?this.resolveRefConstraints(this.visualElement.box,e):function(e,t){var n=t.top,r=t.left,i=t.bottom,o=t.right;return{x:pS(e.x,r,o),y:pS(e.y,n,i)}}(this.visualElement.box,e))},e.prototype.resolveRefConstraints=function(e,t){var n=this.props,r=n.onMeasureDragConstraints,i=n.transformPagePoint,o=t.current;Tw(null!==o,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop."),this.constraintsBox=cT(o,i);var s=function(e,t){return{x:mS(e.x,t.x),y:mS(e.y,t.y)}}(e,this.constraintsBox);if(r){var a=r(function(e){var t=e.x,n=e.y;return{top:n.min,bottom:n.max,left:t.min,right:t.max}}(s));a&&(s=oE(a))}return s},e.prototype.cancelDrag=function(){zx(),this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null)},e.prototype.stop=function(e,t){var n;this.visualElement.unlockTargetBox(),null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var r=this.isDragging;if(this.cancelDrag(),r){var i=this.props,o=i.dragMomentum,s=i.dragElastic,a=i.onDragEnd;if(o||s){var u=t.velocity;this.animateDragEnd(u)}null===a||void 0===a||a(e,t)}},e.prototype.snapToCursor=function(e){this.prepareBoundingBox(),this.cursorProgress.x=.5,this.cursorProgress.y=.5,this.updateAxis("x",e),this.updateAxis("y",e)},e.prototype.updateAxis=function(e,t){var n,r=this.props,i=r.drag,o=r.dragElastic;if(wS(e,i,this.currentDirection)){var s=this.visualElement.box[e],a=s.max-s.min,u=this.cursorProgress[e],l=fS(Yx(t).point[e],a,u,null===(n=this.constraints)||void 0===n?void 0:n[e],o);this.visualElement.setAxisTarget(e,l,l+a)}},e.prototype.updateProps=function(e){var t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,o=e.dragPropagation,s=void 0!==o&&o,a=e.dragConstraints,u=void 0!==a&&a,l=e.dragElastic,c=void 0===l?.35:l,h=e.dragMomentum,d=void 0===h||h,f=_w(e,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=bw({drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:u,dragElastic:c,dragMomentum:d},f)},e.prototype.animateDragEnd=function(e){var t=this,n=this.props,r=n.drag,i=n.dragMomentum,o=n.dragElastic,s=n.dragTransition,a=WE((function(n){if(wS(n,r,t.currentDirection)){var a=t.constraints?t.constraints[n]:{},u=o?200:1e6,l=o?40:1e7,c=bw(bw({type:"inertia",velocity:i?e[n]:0,bounceStiffness:u,bounceDamping:l,timeConstant:750,restDelta:1,restSpeed:10},s),a);return t.visualElement.startLayoutAxisAnimation(n,c)}}));return Promise.all(a).then((function(){var e,n;null===(n=(e=t.props).onDragTransitionEnd)||void 0===n||n.call(e)}))},e.prototype.stopMotion=function(){this.visualElement.stopLayoutAnimation()},e.prototype.scalePoint=function(){var e=this,t=this.props,n=t.drag,r=t.dragConstraints;if(eE(r)&&this.constraintsBox){this.stopMotion();var i={x:0,y:0};WE((function(t){i[t]=KE(e.visualElement.targetBox[t],e.constraintsBox[t])})),this.prepareBoundingBox(),this.resolveDragConstraints(),WE((function(t){if(wS(t,n,null)){var r=function(e,t,n){var r=e.max-e.min,i=a_(t.min,t.max-r,n);return{min:i,max:i+r}}(e.visualElement.targetBox[t],e.constraintsBox[t],i[t]),o=r.min,s=r.max;e.visualElement.setAxisTarget(t,o,s)}}))}},e.prototype.mount=function(e){var t=this,n=oS(e.getInstance(),"pointerdown",(function(e){var n=t.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=qx(window,"resize",(function(){t.scalePoint()})),i=e.onLayoutUpdate((function(){t.isDragging&&t.resolveDragConstraints()})),o=e.prevSnapshot;return(null===o||void 0===o?void 0:o.isDragging)&&this.start(gS,{cursorProgress:o.cursorProgress}),function(){null===n||void 0===n||n(),null===r||void 0===r||r(),null===i||void 0===i||i(),t.cancelDrag()}},e}();function wS(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var bS={key:"drag",shouldRender:function(e){return!!e.drag},Component:yx((function(e){var t=e.visualElement;return function(e,t){var n=e.dragControls,i=(0,r.useContext)(gx).transformPagePoint,o=fT((function(){return new vS({visualElement:t})}));o.updateProps(bw(bw({},e),{transformPagePoint:i})),(0,r.useEffect)((function(){return n&&n.subscribe(o)}),[o]),(0,r.useEffect)((function(){return o.mount(t)}),[])}(_w(e,["visualElement"]),t)}))};var _S=function(e,t){return!!t&&(e===t||_S(e,t.parentElement))},ES=["whileHover","whileTap","whileDrag"],TS=function(e){return ES.indexOf(e)+1},xS=TS("whileTap");var SS=TS("whileHover"),IS=function(e){return function(t,n){jx(t)&&e(t,n)}};function kS(e,t){!function(e,t){var n=e.onPan,i=e.onPanStart,o=e.onPanEnd,s=e.onPanSessionStart,a=n||i||o||s,u=(0,r.useRef)(null),l=(0,r.useContext)(gx).transformPagePoint,c={onSessionStart:s,onStart:i,onMove:n,onEnd:function(e,t){u.current=null,o&&o(e,t)}};(0,r.useEffect)((function(){null!==u.current&&u.current.updateHandlers(c)})),sS(t,"pointerdown",a&&function(e){u.current=new aS(e,c,{transformPagePoint:l})}),Ox((function(){return u.current&&u.current.end()}))}(e,t),function(e,t){var n=e.onTap,i=e.onTapStart,o=e.onTapCancel,s=e.whileTap,a=e.controls,u=n||i||o||s,l=(0,r.useRef)(!1),c=(0,r.useRef)(null);function h(){c.current&&c.current(),c.current=null}s&&a&&a.setOverride(s,xS);var d=(0,r.useRef)(null);d.current=function(e,r){var i=t.current;if(h(),l.current&&i){l.current=!1,a&&s&&a.clearOverride(xS);var u=Ux(!0);u&&(u(),_S(i,e.target)?n&&n(e,r):o&&o(e,r))}},sS(t,"pointerdown",u?function(e,n){h(),c.current=oS(window,"pointerup",(function(e,t){return d.current(e,t)})),t.current&&!l.current&&(l.current=!0,i&&i(e,n),a&&s&&a.startOverride(xS))}:void 0),Ox(h)}(e,t),function(e,t){var n=e.whileHover,r=e.onHoverStart,i=e.onHoverEnd,o=e.controls;n&&o&&o.setOverride(n,SS),sS(t,"pointerenter",IS((function(e,t){r&&r(e,t),n&&o&&o.startOverride(SS)}))),sS(t,"pointerleave",IS((function(e,t){i&&i(e,t),n&&o&&o.clearOverride(SS)})))}(e,t)}var CS=["onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","whileTap","whileHover","onHoverStart","onHoverEnd"],AS={key:"gestures",shouldRender:function(e){return CS.some((function(t){return e.hasOwnProperty(t)}))},Component:yx((function(e){var t=e.visualElement;kS(_w(e,["visualElement"]),t)}))},DS={key:"exit",shouldRender:function(e){return!!e.exit&&!ox(e)},Component:yx((function(e){var t=e.animate,n=e.controls,i=e.exit,o=kT(),s=o[0],a=o[1],u=(0,r.useContext)(IT),l=(0,r.useRef)(!1),c=void 0!==(null===u||void 0===u?void 0:u.custom)?u.custom:e.custom;(0,r.useEffect)((function(){s?!l.current||!t||"boolean"===typeof t||t instanceof ex||n.start(t):(!l.current&&i&&(n.setProps(bw(bw({},e),{custom:c})),n.start(i).then(a)),l.current=!0),s&&(l.current=!1)}),[t,n,c,i,s,a,e])}))};var NS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frameTarget={x:{min:0,max:0},y:{min:0,max:0}},t.stopAxisAnimation={x:void 0,y:void 0},t.animate=function(e,n,r){void 0===r&&(r={});var i=r.originBox,o=r.targetBox,s=r.visibilityAction,a=_w(r,["originBox","targetBox","visibilityAction"]),u=t.props,l=u.visualElement,c=u.layout,h=function(e,t){return RS(e.x,t.x)||RS(e.y,t.y)}(n=i||n,e=o||e),d=WE((function(r){if("position"===c){var i=e[r].max-e[r].min;n[r].max=n[r].min+i}if(!l.isTargetBoxLocked)return void 0===s?h?t.animateAxis(r,e[r],n[r],a):l.setAxisTarget(r,e[r].min,e[r].max):void(s===Tx.Hide?l.hide():l.show())}));return l.render(),Promise.all(d).then((function(){var e,n;null===(e=a.onLayoutAnimationComplete)||void 0===e||e.call(a),l.isPresent?l.presence=Ex.Present:(null===(n=a.onLayoutAnimationComplete)||void 0===n||n.call(a),t.safeToRemove())}))},t}return ww(t,e),t.prototype.componentDidMount=function(){var e=this.props.visualElement;e.enableLayoutProjection(),this.unsubLayoutReady=e.onLayoutUpdate(this.animate)},t.prototype.componentWillUnmount=function(){var e=this;this.unsubLayoutReady(),WE((function(t){var n,r;return null===(r=(n=e.stopAxisAnimation)[t])||void 0===r?void 0:r.call(n)}))},t.prototype.animateAxis=function(e,t,n,r){var i,o,s=void 0===r?{}:r,a=s.transition,u=s.crossfadeOpacity;null===(o=(i=this.stopAxisAnimation)[e])||void 0===o||o.call(i);var l=this.props.visualElement,c=this.frameTarget[e],h=l.axisProgress[e];h.clearListeners(),h.set(0),h.set(0);var d=u&&this.createCrossfadeAnimation(u),f=function(){var r=h.get()/1e3;!function(e,t,n,r){e.min=a_(t.min,n.min,r),e.max=a_(t.max,n.max,r)}(c,n,t,r),l.setAxisTarget(e,c.min,c.max),null===d||void 0===d||d(r)};f();var p=lT("x"===e?"layoutX":"layoutY",h,1e3,a||this.props.transition||OS),m=h.onChange(f);return this.stopAxisAnimation[e]=function(){h.stop(),m()},p},t.prototype.createCrossfadeAnimation=function(e){var t=this.props.visualElement.getValue("opacity",0);return function(n){t.set(MS(a_(0,1,n))),e.set(FS(a_(1,0,n)))}},t.prototype.safeToRemove=function(){var e,t;null===(t=(e=this.props).safeToRemove)||void 0===t||t.call(e)},t.prototype.render=function(){return null},t}(r.Component),PS={key:"animate-layout",shouldRender:function(e){return!!e.layout||!!e.layoutId},Component:function(e){var t=kT()[1];return(0,r.createElement)(NS,bw({},e,{safeToRemove:t}))}};function RS(e,t){return e.min!==t.min||e.max!==t.max}var OS={duration:.45,ease:[.4,0,.1,1]};function LS(e,t,n){return function(r){return r<e?0:r>t?1:n(s_(e,t,r))}}var MS=LS(0,.5,Db),FS=LS(.5,.95,Sb),VS=function(e){function t(t){var n=e.call(this,t)||this,r=t.syncLayout;return Px(r)||(n.componentDidUpdate=function(){return r.flush()}),n}return ww(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.syncLayout,n=e.visualElement;Px(t)&&t.register(n)},t.prototype.getSnapshotBeforeUpdate=function(){var e=this.props,t=e.syncLayout,n=e.visualElement;return Px(t)?t.syncUpdate():(n.snapshotBoundingBox(),t.add(n)),null},t.prototype.componentDidUpdate=function(){},t.prototype.render=function(){return null},t}(r.Component);function US(e){var t={defaultFeatures:e,useVisualElement:NT,render:MT,animationControlsConfig:{makeTargetAnimatable:ZT}};var n=new Map;return new Proxy({custom:function(e){return Lx(e,t)}},{get:function(e,r){return"custom"===r?e.custom:(n.has(r)||n.set(r,Lx(r,t)),n.get(r))}})}var BS=US([{key:"measure-layout",shouldRender:function(e){return!!e.drag||!!e.layout||!!e.layoutId},Component:function(e){var t=(0,r.useContext)(Rx);return r.createElement(VS,bw({},e,{syncLayout:t}))}},bS,AS,DS,PS]);function zS(e,t){return t&&e!==t.lead?{visibilityAction:Tx.Hide}:t&&e.presence!==Ex.Entering&&e===t.lead&&t.lead!==t.prevLead?{visibilityAction:Tx.Show}:(e.presence===Ex.Entering?n=null===t||void 0===t?void 0:t.getFollowOrigin():e.presence===Ex.Exiting&&(r=null===t||void 0===t?void 0:t.getFollowTarget()),{originBox:n,targetBox:r});var n,r}function qS(e,t){var n,r,i,o={},s=t&&t.lead,a=null===s||void 0===s?void 0:s.presence;return t&&e===s?e.presence===Ex.Entering?o.originBox=t.getFollowOrigin():e.presence===Ex.Exiting&&(o.targetBox=t.getFollowTarget()):t&&e===t.follow&&(o.transition=t.getLeadTransition(),a===Ex.Entering?o.targetBox=t.getLeadTarget():a===Ex.Exiting&&(o.originBox=t.getLeadOrigin())),(null===(n=null===t||void 0===t?void 0:t.follow)||void 0===n?void 0:n.isPresenceRoot)||(null===s||void 0===s?void 0:s.isPresenceRoot)?(t&&e!==s?t&&e===t.follow?s&&a!==Ex.Entering&&a===Ex.Exiting&&(o.crossfadeOpacity=null===(i=null===t||void 0===t?void 0:t.lead)||void 0===i?void 0:i.getValue("opacity",1)):o.visibilityAction=Tx.Hide:e.presence===Ex.Entering&&(o.crossfadeOpacity=null===(r=null===t||void 0===t?void 0:t.follow)||void 0===r?void 0:r.getValue("opacity",0)),o):o}var jS=function(){function e(){this.order=[],this.hasChildren=!1}return e.prototype.add=function(e){var t,n=e.config.layoutOrder;if(void 0===n)this.order.push(e);else{var r=this.order.findIndex((function(e){return n<=(e.config.layoutOrder||0)}));-1===r&&(e.presence=this.hasChildren?Ex.Entering:Ex.Present,r=this.order.length),this.order.splice(r,0,e)}if(this.snapshot){e.prevSnapshot=this.snapshot,e.prevViewportBox=this.snapshot.boundingBox;var i=this.snapshot.latestMotionValues;for(var o in i)e.hasValue(o)?null===(t=e.getValue(o))||void 0===t||t.set(i[o]):e.addValue(o,nE(i[o]))}this.hasChildren=!0},e.prototype.remove=function(e){var t=this.order.findIndex((function(t){return e===t}));-1!==t&&this.order.splice(t,1)},e.prototype.updateLeadAndFollow=function(){this.prevLead=this.lead,this.prevFollow=this.follow;var e=function(e,t){for(var n=t[0],r=t[1],i=void 0,o=0,s=void 0,a=e.length,u=!1,l=a-1;l>=0;l--){var c=e[l];if(l===a-1&&(u=c.isPresent),u)i=c;else{var h=e[l-1];h&&h.isPresent&&(i=c)}if(i){o=l;break}}if(i||(i=e[0]),s=e[o-1],i)for(l=o-1;l>=0;l--)if((c=e[l]).isPresent){s=c;break}return i!==n&&!u&&s===r&&e.find((function(e){return e===n}))&&(i=n),[i,s]}(this.order,[this.lead,this.follow]),t=e[0],n=e[1];this.lead=t,this.follow=n},e.prototype.updateSnapshot=function(){if(this.lead){var e={boundingBox:this.lead.prevViewportBox,latestMotionValues:{}};this.lead.forEachValue((function(t,n){var r=t.get();EE(r)||(e.latestMotionValues[n]=r)}));var t=yS.get(this.lead);t&&t.isDragging&&(e.isDragging=!0,e.cursorProgress=t.cursorProgress),this.snapshot=e}},e.prototype.isLeadPresent=function(){var e;return this.lead&&(null===(e=this.lead)||void 0===e?void 0:e.presence)!==Ex.Exiting},e.prototype.shouldStackAnimate=function(){return!0},e.prototype.getFollowOrigin=function(){var e;return this.follow?this.follow.prevViewportBox:null===(e=this.snapshot)||void 0===e?void 0:e.boundingBox},e.prototype.getFollowTarget=function(){var e;return null===(e=this.follow)||void 0===e?void 0:e.box},e.prototype.getLeadOrigin=function(){var e;return null===(e=this.lead)||void 0===e?void 0:e.prevViewportBox},e.prototype.getLeadTarget=function(){var e;return null===(e=this.lead)||void 0===e?void 0:e.box},e.prototype.getLeadTransition=function(){var e;return null===(e=this.lead)||void 0===e?void 0:e.config.transition},e}();!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=new Set,t.stacks=new Map,t.hasMounted=!1,t.updateScheduled=!1,t.renderScheduled=!1,t.syncContext=bw(bw({},Nx()),{syncUpdate:function(e){return t.scheduleUpdate(e)},forceUpdate:function(){t.syncContext=bw({},t.syncContext),t.scheduleUpdate(!0)},register:function(e){return t.addChild(e)},remove:function(e){return t.removeChild(e)}}),t}ww(t,e),t.prototype.componentDidMount=function(){this.hasMounted=!0,this.updateStacks()},t.prototype.componentDidUpdate=function(){this.startLayoutAnimation()},t.prototype.shouldComponentUpdate=function(){return this.renderScheduled=!0,!0},t.prototype.startLayoutAnimation=function(){var e=this;this.renderScheduled=this.updateScheduled=!1;var t=this.props.type;this.children.forEach((function(e){e.isPresent?e.presence!==Ex.Entering&&(e.presence=e.presence===Ex.Exiting?Ex.Entering:Ex.Present):e.presence=Ex.Exiting})),this.updateStacks();var n="crossfade"===t?qS:zS,r={measureLayout:function(e){return e.measureLayout()},layoutReady:function(t){var r=t.layoutId;t.layoutReady(n(t,e.getStack(r)))}};this.children.forEach((function(t){return e.syncContext.add(t)})),this.syncContext.flush(r),this.stacks.forEach((function(e){return e.snapshot=void 0}))},t.prototype.updateStacks=function(){this.stacks.forEach((function(e){return e.updateLeadAndFollow()}))},t.prototype.scheduleUpdate=function(e){void 0===e&&(e=!1),!e&&this.updateScheduled||(this.updateScheduled=!0,this.children.forEach((function(e){return e.snapshotBoundingBox()})),this.stacks.forEach((function(e){return e.updateSnapshot()})),!e&&this.renderScheduled||(this.renderScheduled=!0,this.forceUpdate()))},t.prototype.addChild=function(e){this.children.add(e),this.addToStack(e),e.presence=this.hasMounted?Ex.Entering:Ex.Present},t.prototype.removeChild=function(e){this.scheduleUpdate(),this.children.delete(e),this.removeFromStack(e)},t.prototype.addToStack=function(e){var t=this.getStack(e.layoutId);null===t||void 0===t||t.add(e)},t.prototype.removeFromStack=function(e){var t=this.getStack(e.layoutId);null===t||void 0===t||t.remove(e)},t.prototype.getStack=function(e){if(void 0!==e)return!this.stacks.has(e)&&this.stacks.set(e,new jS),this.stacks.get(e)},t.prototype.render=function(){return(0,r.createElement)(Rx.Provider,{value:this.syncContext},this.props.children)}}(r.Component);function KS(){return{scrollX:nE(0),scrollY:nE(0),scrollXProgress:nE(0),scrollYProgress:nE(0)}}KS();var GS=nE(null);if("undefined"!==typeof window)if(window.matchMedia){var HS=window.matchMedia("(prefers-reduced-motion)"),WS=function(){return GS.set(HS.matches)};HS.addListener(WS),WS()}else GS.set(!1);!function(){function e(){this.componentControls=new Set}e.prototype.subscribe=function(e){var t=this;return this.componentControls.add(e),function(){return t.componentControls.delete(e)}},e.prototype.start=function(e,t){this.componentControls.forEach((function(n){n.start(e.nativeEvent||e,t)}))}}();!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initialState={},t}ww(t,e),t.prototype.updateLayoutDelta=function(){},t.prototype.build=function(){},t.prototype.clean=function(){},t.prototype.getBoundingBox=function(){return{x:{min:0,max:0},y:{min:0,max:0}}},t.prototype.readNativeValue=function(e){return this.initialState[e]||0},t.prototype.render=function(){this.build()}}(rE);const QS=e=>{let{file:t,setFile:n}=e;const{progress:i,url:o}=yw(t);return(0,r.useEffect)((()=>{o&&n(null)}),[o,n]),r.createElement(BS.div,{className:"progress-bar",initial:{width:0},animate:{width:i+"%"}})},YS=()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),o=["image/png","image/jpeg"];return r.createElement("form",null,r.createElement("label",null,r.createElement("input",{type:"file",onChange:e=>{let n=e.target.files[0];n&&o.includes(n.type)?(t(n),i("")):(t(null),i("Please select an image file (png or jpg)"))}}),r.createElement("span",null,"+")),r.createElement("div",{className:"output"},n&&r.createElement("div",{className:"error"},n),e&&r.createElement("div",null,e.name),e&&r.createElement(QS,{file:e,setFile:t})))},XS=e=>{const[t,n]=(0,r.useState)([]);return(0,r.useEffect)((()=>{const t=mw.collection(e).orderBy("createdAt","desc").onSnapshot((e=>{let t=[];e.forEach((e=>{t.push({...e.data(),id:e.id})})),n(t)}));return()=>t()}),[e]),{docs:t}},$S=e=>{let{setSelectedImg:t}=e;const{docs:n}=XS("images");return r.createElement("div",{className:"img-grid"},n&&n.map((e=>r.createElement(BS.div,{className:"img-wrap",key:e.id,layout:!0,whileHover:{opacity:1},s:!0,onClick:()=>t(e.url)},r.createElement(BS.img,{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})))))},JS=e=>{let{setSelectedImg:t,selectedImg:n}=e;return r.createElement(BS.div,{className:"backdrop",onClick:e=>{e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},r.createElement(BS.img,{src:n,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}}))};const ZS=function(){const[e,t]=(0,r.useState)(null);return r.createElement("div",{className:"App"},r.createElement(o,null),r.createElement(YS,null),r.createElement($S,{setSelectedImg:t}),e&&r.createElement(JS,{selectedImg:e,setSelectedImg:t}))};i.render(r.createElement(r.StrictMode,null,r.createElement(ZS,null)),document.getElementById("root"))})()})();
//# sourceMappingURL=main.a9aa03b2.js.map